(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Dojc:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("mrSG"),o=a("xzLf"),n=a("n3+I"),s=a("fXoL"),c=a("tyNb");let r=(()=>{class t{constructor(t,e,a){this.router=t,this.apiLogin=e,this.root=a}canActivate(t,e){return Object(i.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);try{const e=t.data.expectedRole.split(","),a=yield this.apiLogin.role();return e.indexOf(a)>=0?(yield this.root.setBlockUI(!1),!0):(yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1)}catch(e){return console.log(e),yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1}})}}return t.\u0275fac=function(e){return new(e||t)(s.dc(c.b),s.dc(o.a),s.dc(n.a))},t.\u0275prov=s.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"b/mn":function(t,e,a){"use strict";a.r(e),a.d(e,"AdminEmailSettingModule",function(){return bt});var i=a("ofXK"),o=a("3Pt+"),n=a("ADsi"),s=a("AKYE"),c=a("tyNb"),r=a("mrSG"),l=a("n3+I"),m=a("PLN7"),d=a("Q+/z"),b=a("Hlss"),u=a("M9IT"),h=a("Dh3D"),p=a("+0xr"),f=a("wHSu"),g=a("Sm0T"),v=a("fXoL"),E=a("dNgK"),w=a("0IaG"),Y=a("Wp6s"),k=a("kmnG"),Z=a("qFsG"),C=a("bTqV"),D=a("lJxs"),y=a("AytR"),I=a("tk/3");let H=(()=>{class t{constructor(t){this.api=t,this.url=y.a.api+y.a.path}getAllPoEmail(t,e,a){const i=`${this.url}/v1/get-poemail?length=${t.length}&pageIndex=${t.pageIndex}&pageSize=${t.pageSize}&active=${e.active}&direction=${e.direction}&text=${a.searchText}`;return console.log(i),this.api.get(i).pipe(Object(D.a)(t=>t.data))}savePoEmail(t){return this.api.post(this.url+"/v1/save-poemail",t)}deletePoEmail(t){return this.api.post(this.url+"/v1/delete-po-email",{id:t})}}return t.\u0275fac=function(e){return new(e||t)(v.dc(I.b))},t.\u0275prov=v.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M=a("6NWb");const U=["paginator"],T=["sort"];function B(t,e){1&t&&(v.Zb(0,"mat-error"),v.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e37\u0e48\u0e2d "),v.Yb())}function F(t,e){1&t&&(v.Zb(0,"span"),v.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07"),v.Yb())}function S(t,e){1&t&&(v.Zb(0,"span"),v.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c"),v.Yb())}function K(t,e){if(1&t&&(v.Zb(0,"mat-error"),v.Kc(1,F,2,0,"span",6),v.Kc(2,S,2,0,"span",6),v.Yb()),2&t){const t=v.lc();v.Hb(1),v.tc("ngIf",t.poEmailForm.controls.email.errors.email),v.Hb(1),v.tc("ngIf",t.poEmailForm.controls.email.errors.required)}}function O(t,e){1&t&&(v.Zb(0,"mat-header-cell",29),v.Mc(1," \u0e0a\u0e37\u0e48\u0e2d "),v.Yb())}function L(t,e){if(1&t&&(v.Zb(0,"mat-cell",30),v.Mc(1),v.Yb()),2&t){const t=e.$implicit;v.Hb(1),v.Oc(" ",t.name," ")}}function P(t,e){1&t&&(v.Zb(0,"mat-header-cell",29),v.Mc(1," \u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c "),v.Yb())}function j(t,e){if(1&t&&(v.Zb(0,"mat-cell",31),v.Mc(1),v.Yb()),2&t){const t=e.$implicit;v.Hb(1),v.Oc(" ",t.email," ")}}function x(t,e){1&t&&(v.Zb(0,"mat-header-cell",29),v.Mc(1," Created "),v.Yb())}function $(t,e){if(1&t&&(v.Zb(0,"mat-cell",32),v.Mc(1),v.mc(2,"date"),v.Yb()),2&t){const t=e.$implicit;v.Hb(1),v.Oc(" ",v.nc(2,1,t.created_at)," ")}}function z(t,e){1&t&&(v.Zb(0,"mat-header-cell",33),v.Mc(1," \u0e08\u0e31\u0e14\u0e01\u0e32\u0e23 "),v.Yb())}function A(t,e){if(1&t){const t=v.ac();v.Zb(0,"mat-cell",34),v.Zb(1,"button",35),v.hc("click",function(){v.Dc(t);const a=e.$implicit;return v.lc().clickToEdit(a)}),v.Ub(2,"fa-icon",36),v.Yb(),v.Zb(3,"button",35),v.hc("click",function(){v.Dc(t);const a=e.$implicit;return v.lc().deleteEmail(a.id)}),v.Ub(4,"fa-icon",36),v.Yb(),v.Yb()}if(2&t){const t=v.lc();v.Hb(2),v.tc("icon",t.faPen),v.Hb(2),v.tc("icon",t.faTrash)}}function R(t,e){1&t&&v.Ub(0,"mat-header-row")}function q(t,e){1&t&&v.Ub(0,"mat-row")}const X=function(){return[10,25,100]};let N=(()=>{class t{constructor(t,e,a,i,n,s){this.fb=t,this.root=e,this.api=a,this.snackBar=i,this.confirmDialog=n,this.poEmailService=s,this.faPen=f.j,this.faTrash=f.o,this.poEmailForm=this.fb.group({id:[null],name:["",[o.w.required]],email:["",[o.w.required]]}),this.searchForm=this.fb.group({searchText:[""]}),this.isUpdate=!1,this.poEmailTable=[],this.listLength=0,this.displayedColumns=["name","email","created_at","manage"],this.deleteEmailConfirmDialog={header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e01\u0e32\u0e23\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"\u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e19\u0e35\u0e49\u0e08\u0e23\u0e34\u0e07\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"},this.unsub=[]}ngOnInit(){this.getPoEmailList(),this.unsub[0]=this.paginator.page.subscribe(()=>this.getPoEmailList()),this.unsub[1]=this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.getPoEmailList()}),this.unsub[2]=this.searchForm.valueChanges.subscribe(()=>{this.paginator.pageIndex=0,this.getPoEmailList()})}getPoEmailList(){const t={pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize?this.paginator.pageSize:10,length:this.listLength?this.listLength:0},e={active:this.sort.active,direction:this.sort.direction},a=this.searchForm.value;null!=this.unsub[3]&&this.unsub[3].unsubscribe(),this.unsub[3]=this.poEmailService.getAllPoEmail(t,e,a).subscribe(t=>{console.log(t),this.poEmailTable=t.list,this.listLength=t.number})}clickToEdit(t){console.log(t),this.poEmailForm.patchValue({id:t.id,email:t.email,name:t.name})}saveEmail(){return Object(r.a)(this,void 0,void 0,function*(){this.isUpdate||(yield this.addEmail())})}addEmail(){return Object(r.a)(this,void 0,void 0,function*(){this.root.setBlockUI(!0),this.poEmailService.savePoEmail(this.poEmailForm.value).subscribe(t=>{console.log(t),this.root.setBlockUI(!1),this.poEmailForm.reset(),this.getPoEmailList(),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3})},t=>{console.log(t),this.root.setBlockUI(!1),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+t.error.message,warning:!0},duration:3e3})})})}reset(){}deleteEmail(t){return Object(r.a)(this,void 0,void 0,function*(){this.confirmDialog.open(b.a,{data:this.deleteEmailConfirmDialog}).afterClosed().subscribe(e=>Object(r.a)(this,void 0,void 0,function*(){e&&this.softDeleteEmail(t)}))})}softDeleteEmail(t){this.root.setBlockUI(!0),this.poEmailService.deletePoEmail(t).subscribe(t=>{console.log(t),this.getPoEmailList(),this.root.setBlockUI(!1),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e25\u0e1a\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3})},t=>{this.root.setBlockUI(!1),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+t.error.message,warning:!0},duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(v.Tb(o.e),v.Tb(l.a),v.Tb(m.a),v.Tb(E.b),v.Tb(w.b),v.Tb(H))},t.\u0275cmp=v.Nb({type:t,selectors:[["app-po-email-setting"]],viewQuery:function(t,e){if(1&t&&(v.Tc(U,3,u.a),v.Tc(T,3,h.a)),2&t){let t;v.zc(t=v.ic())&&(e.paginator=t.first),v.zc(t=v.ic())&&(e.sort=t.first)}},decls:43,vars:11,consts:[[1,"mat-elevation-z8"],[1,"product-form",3,"formGroup"],[1,"w3-row"],[1,"w3-half","w3-padding"],[1,"w3-block"],["matInput","","placeholder","\u0e0a\u0e37\u0e48\u0e2d","id","po-name","name","po-name","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","id","po-email","name","po-email","formControlName","email","email",""],[1,"w3-padding","full-width"],["mat-raised-button","","color","accent",1,"w3-right",2,"margin-left","8px",3,"disabled","click"],["mat-raised-button","",1,"w3-right",2,"margin-right","8px",3,"click"],[1,"w3-row",3,"formGroup"],["matInput","","placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32","formControlName","searchText"],["matSort","","matSortActive","created_at","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["sort","matSort"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","\u0e23\u0e38\u0e48\u0e19",4,"matCellDef"],["matColumnDef","email"],["data-label","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c",4,"matCellDef"],["matColumnDef","created_at"],["data-label","Created",4,"matCellDef"],["matColumnDef","manage"],["class","set-header-center",4,"matHeaderCellDef"],["class","set-col-center","data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSizeOptions"],["paginator",""],["mat-sort-header",""],["data-label","\u0e23\u0e38\u0e48\u0e19"],["data-label","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c"],["data-label","Created"],[1,"set-header-center"],["data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",1,"set-col-center"],["mat-button","",3,"click"],[3,"icon"]],template:function(t,e){1&t&&(v.Zb(0,"p"),v.Mc(1,"po-email-setting works!"),v.Yb(),v.Zb(2,"mat-card",0),v.Zb(3,"form",1),v.Zb(4,"div",2),v.Zb(5,"div",3),v.Zb(6,"mat-form-field",4),v.Ub(7,"input",5),v.Kc(8,B,2,0,"mat-error",6),v.Yb(),v.Yb(),v.Zb(9,"div",3),v.Zb(10,"mat-form-field",4),v.Ub(11,"input",7),v.Kc(12,K,3,2,"mat-error",6),v.Yb(),v.Yb(),v.Yb(),v.Zb(13,"div",2),v.Zb(14,"div",8),v.Zb(15,"button",9),v.hc("click",function(){return e.saveEmail()}),v.Mc(16,"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"),v.Yb(),v.Zb(17,"button",10),v.hc("click",function(){return e.reset()}),v.Mc(18,"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"),v.Yb(),v.Yb(),v.Yb(),v.Yb(),v.Yb(),v.Ub(19,"br"),v.Zb(20,"mat-card",0),v.Zb(21,"div",11),v.Zb(22,"mat-form-field",4),v.Ub(23,"input",12),v.Yb(),v.Yb(),v.Zb(24,"div",2),v.Zb(25,"mat-table",13,14),v.Xb(27,15),v.Kc(28,O,2,0,"mat-header-cell",16),v.Kc(29,L,2,1,"mat-cell",17),v.Wb(),v.Xb(30,18),v.Kc(31,P,2,0,"mat-header-cell",16),v.Kc(32,j,2,1,"mat-cell",19),v.Wb(),v.Xb(33,20),v.Kc(34,x,2,0,"mat-header-cell",16),v.Kc(35,$,3,3,"mat-cell",21),v.Wb(),v.Xb(36,22),v.Kc(37,z,2,0,"mat-header-cell",23),v.Kc(38,A,5,2,"mat-cell",24),v.Wb(),v.Kc(39,R,1,0,"mat-header-row",25),v.Kc(40,q,1,0,"mat-row",26),v.Yb(),v.Ub(41,"mat-paginator",27,28),v.Yb(),v.Yb()),2&t&&(v.Hb(3),v.tc("formGroup",e.poEmailForm),v.Hb(5),v.tc("ngIf",e.poEmailForm.controls.name.invalid&&e.poEmailForm.controls.name.errors.required),v.Hb(4),v.tc("ngIf",e.poEmailForm.controls.email.invalid&&(e.poEmailForm.controls.email.dirty||e.poEmailForm.controls.email.touched)),v.Hb(3),v.tc("disabled",e.poEmailForm.invalid),v.Hb(6),v.tc("formGroup",e.searchForm),v.Hb(4),v.tc("dataSource",e.poEmailTable),v.Hb(14),v.tc("matHeaderRowDef",e.displayedColumns),v.Hb(1),v.tc("matRowDefColumns",e.displayedColumns),v.Hb(1),v.tc("length",e.listLength)("pageSizeOptions",v.wc(10,X)))},directives:[Y.a,o.x,o.o,o.g,k.c,Z.b,o.c,o.n,o.f,i.m,o.d,C.b,p.j,h.a,p.c,p.e,p.b,p.g,p.i,u.a,k.b,p.d,h.b,p.a,M.a,p.f,p.h],pipes:[i.e],styles:[""]}),t})();function W(t,e){1&t&&(v.Zb(0,"mat-error"),v.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e37\u0e48\u0e2d "),v.Yb())}function G(t,e){1&t&&(v.Zb(0,"span"),v.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07"),v.Yb())}function Q(t,e){1&t&&(v.Zb(0,"span"),v.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c"),v.Yb())}function _(t,e){if(1&t&&(v.Zb(0,"mat-error"),v.Kc(1,G,2,0,"span",9),v.Kc(2,Q,2,0,"span",9),v.Yb()),2&t){v.lc();const t=v.Ac(14);v.Hb(1),v.tc("ngIf",t.errors.email),v.Hb(1),v.tc("ngIf",t.errors.required)}}function J(t,e){1&t&&(v.Zb(0,"mat-header-cell",30),v.Mc(1," \u0e0a\u0e37\u0e48\u0e2d "),v.Yb())}function V(t,e){if(1&t&&(v.Zb(0,"mat-cell",31),v.Mc(1),v.Yb()),2&t){const t=e.$implicit;v.Hb(1),v.Oc(" ",t.name," ")}}function tt(t,e){1&t&&(v.Zb(0,"mat-header-cell",30),v.Mc(1," \u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c "),v.Yb())}function et(t,e){if(1&t&&(v.Zb(0,"mat-cell",32),v.Mc(1),v.Yb()),2&t){const t=e.$implicit;v.Hb(1),v.Oc(" ",t.email," ")}}function at(t,e){1&t&&(v.Zb(0,"mat-header-cell",30),v.Mc(1," Created "),v.Yb())}function it(t,e){if(1&t&&(v.Zb(0,"mat-cell",33),v.Mc(1),v.mc(2,"date"),v.Yb()),2&t){const t=e.$implicit;v.Hb(1),v.Oc(" ",v.nc(2,1,t.createdAt)," ")}}function ot(t,e){1&t&&(v.Zb(0,"mat-header-cell",34),v.Mc(1," \u0e08\u0e31\u0e14\u0e01\u0e32\u0e23 "),v.Yb())}function nt(t,e){if(1&t){const t=v.ac();v.Zb(0,"mat-cell",35),v.Zb(1,"button",36),v.hc("click",function(){v.Dc(t);const a=e.$implicit;return v.lc().editEmail(a.id)}),v.Ub(2,"fa-icon",37),v.Yb(),v.Zb(3,"button",36),v.hc("click",function(){v.Dc(t);const a=e.$implicit;return v.lc().deleteEmail(a.id)}),v.Ub(4,"fa-icon",37),v.Yb(),v.Yb()}if(2&t){const t=v.lc();v.Hb(2),v.tc("icon",t.faPen),v.Hb(2),v.tc("icon",t.faTrash)}}function st(t,e){1&t&&v.Ub(0,"mat-header-row")}function ct(t,e){1&t&&v.Ub(0,"mat-row")}const rt=function(){return[5,10,25,100]},lt={id:"",name:"",email:""},mt=[{path:"",component:(()=>{class t{constructor(t,e,a,i,o){this.root=t,this.api=e,this.snackBar=a,this.confirmDialog=i,this.stuck=o,this.faPen=f.j,this.faTrash=f.o,this.isUpdate=!1,this.adminEmailList=[],this.adminEmailData=lt,this.adminEmailTable=[],this.displayedColumns=["name","email","created","manage"],this.deleteEmailConfirmDialog={header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e01\u0e32\u0e23\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"\u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e19\u0e35\u0e49\u0e08\u0e23\u0e34\u0e07\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"},this.unsub={},this.unsub.errorMessage=this.root.apiError$.subscribe(t=>this.errorMessage=t)}ngOnInit(){return Object(r.a)(this,void 0,void 0,function*(){yield this.getEmailList(),yield this.root.setHeaderText("Admin email"),this.checkStuck(),document.getElementById("name").focus()})}checkStuck(){this.stuck.check(this.adminEmailData)&&(this.adminEmailData={id:"",name:"",email:""})}getEmailList(){return Object(r.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const t=yield this.api.gets("/email-admin").toPromise();yield this.root.setBlockUI(!1),console.log(t),t&&t.success&&t.emailList&&(this.adminEmailList=t.emailList,yield this.genEmailTable())})}saveEmail(){return Object(r.a)(this,void 0,void 0,function*(){this.isUpdate?yield this.updateEmail():yield this.addEmail()})}addEmail(){return Object(r.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const t=yield this.api.post("/email-admin",this.adminEmailData).toPromise();yield this.root.setBlockUI(!1),t&&t.success?(this.isUpdate=!1,yield this.getEmailList(),yield this.reset(),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3})):this.snackBar.openFromComponent(d.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3})})}updateEmail(){return Object(r.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const t=yield this.api.post("/email-admin-update",this.adminEmailData).toPromise();yield this.root.setBlockUI(!1),t&&t.success?(this.isUpdate=!1,yield this.getEmailList(),yield this.reset(),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e41\u0e01\u0e49\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3})):this.snackBar.openFromComponent(d.a,{data:{message:"\u0e41\u0e01\u0e49\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3})})}deleteEmail(t){return Object(r.a)(this,void 0,void 0,function*(){this.confirmDialog.open(b.a,{data:this.deleteEmailConfirmDialog}).afterClosed().subscribe(e=>Object(r.a)(this,void 0,void 0,function*(){e&&(yield this.updateEmailStatus(t))}))})}updateEmailStatus(t){return Object(r.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const e=yield this.api.post("/email-admin-delete",{id:t}).toPromise();yield this.root.setBlockUI(!1),e&&e.success?(this.isUpdate=!1,yield this.getEmailList(),yield this.reset(),this.snackBar.openFromComponent(d.a,{data:{message:"\u0e25\u0e1a\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3})):this.snackBar.openFromComponent(d.a,{data:{message:"\u0e25\u0e1a\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3})})}editEmail(t){return Object(r.a)(this,void 0,void 0,function*(){if(t){this.isUpdate=!0;const e=this.adminEmailList.find(e=>e.id===t);this.adminEmailData={id:t,name:e.name,email:e.email}}})}genEmailTable(){return Object(r.a)(this,void 0,void 0,function*(){this.adminEmailTable=new p.k(this.adminEmailList),this.adminEmailTable.paginator=this.paginator,this.adminEmailTable.sort=this.sort})}applyFilter(t){this.adminEmailTable.filter=t.trim().toLowerCase(),this.adminEmailTable.paginator&&this.adminEmailTable.paginator.firstPage()}reset(){return Object(r.a)(this,void 0,void 0,function*(){this.adminEmailData=lt})}ngOnDestroy(){this.reset(),this.unsub.errorMessage.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(v.Tb(l.a),v.Tb(m.a),v.Tb(E.b),v.Tb(w.b),v.Tb(g.a))},t.\u0275cmp=v.Nb({type:t,selectors:[["app-admin-email-setting"]],viewQuery:function(t,e){if(1&t&&(v.Tc(u.a,3),v.Tc(h.a,3)),2&t){let t;v.zc(t=v.ic())&&(e.paginator=t.first),v.zc(t=v.ic())&&(e.sort=t.first)}},decls:45,vars:10,consts:[[1,"w3-container"],[1,"mat-elevation-z8"],[1,"product-form"],["addAdminForm","ngForm"],[1,"w3-row"],[1,"w3-half","w3-padding"],[1,"w3-block"],["matInput","","placeholder","\u0e0a\u0e37\u0e48\u0e2d","id","name","name","name","required","",3,"ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","id","email","name","email","required","","email","",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"w3-padding","full-width"],["mat-raised-button","","color","accent",1,"w3-right",2,"margin-left","8px",3,"disabled","click"],["mat-raised-button","",1,"w3-right",2,"margin-right","8px",3,"click"],["matInput","","placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","\u0e23\u0e38\u0e48\u0e19",4,"matCellDef"],["matColumnDef","email"],["data-label","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c",4,"matCellDef"],["matColumnDef","created"],["data-label","Created",4,"matCellDef"],["matColumnDef","manage"],["class","set-header-center",4,"matHeaderCellDef"],["class","set-col-center","data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["data-label","\u0e23\u0e38\u0e48\u0e19"],["data-label","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c"],["data-label","Created"],[1,"set-header-center"],["data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",1,"set-col-center"],["mat-button","",3,"click"],[3,"icon"]],template:function(t,e){if(1&t&&(v.Ub(0,"br"),v.Zb(1,"div",0),v.Zb(2,"mat-card",1),v.Zb(3,"form",2,3),v.Zb(5,"div",4),v.Zb(6,"div",5),v.Zb(7,"mat-form-field",6),v.Zb(8,"input",7,8),v.hc("ngModelChange",function(t){return e.adminEmailData.name=t}),v.Yb(),v.Kc(10,W,2,0,"mat-error",9),v.Yb(),v.Yb(),v.Zb(11,"div",5),v.Zb(12,"mat-form-field",6),v.Zb(13,"input",10,11),v.hc("ngModelChange",function(t){return e.adminEmailData.email=t}),v.Yb(),v.Kc(15,_,3,2,"mat-error",9),v.Yb(),v.Yb(),v.Yb(),v.Zb(16,"div",4),v.Zb(17,"div",12),v.Zb(18,"button",13),v.hc("click",function(){return e.saveEmail()}),v.Mc(19,"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"),v.Yb(),v.Zb(20,"button",14),v.hc("click",function(){return e.reset()}),v.Mc(21,"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"),v.Yb(),v.Yb(),v.Yb(),v.Yb(),v.Yb(),v.Ub(22,"br"),v.Zb(23,"mat-card",1),v.Zb(24,"div",4),v.Zb(25,"mat-form-field",6),v.Zb(26,"input",15),v.hc("keyup",function(t){return e.applyFilter(t.target.value)}),v.Yb(),v.Yb(),v.Yb(),v.Zb(27,"div",4),v.Zb(28,"mat-table",16),v.Xb(29,17),v.Kc(30,J,2,0,"mat-header-cell",18),v.Kc(31,V,2,1,"mat-cell",19),v.Wb(),v.Xb(32,20),v.Kc(33,tt,2,0,"mat-header-cell",18),v.Kc(34,et,2,1,"mat-cell",21),v.Wb(),v.Xb(35,22),v.Kc(36,at,2,0,"mat-header-cell",18),v.Kc(37,it,3,3,"mat-cell",23),v.Wb(),v.Xb(38,24),v.Kc(39,ot,2,0,"mat-header-cell",25),v.Kc(40,nt,5,2,"mat-cell",26),v.Wb(),v.Kc(41,st,1,0,"mat-header-row",27),v.Kc(42,ct,1,0,"mat-row",28),v.Yb(),v.Ub(43,"mat-paginator",29),v.Yb(),v.Yb(),v.Ub(44,"app-po-email-setting"),v.Yb()),2&t){const t=v.Ac(4),a=v.Ac(9),i=v.Ac(14);v.Hb(8),v.tc("ngModel",e.adminEmailData.name),v.Hb(2),v.tc("ngIf",a.invalid&&a.errors.required),v.Hb(3),v.tc("ngModel",e.adminEmailData.email),v.Hb(2),v.tc("ngIf",i.invalid&&(i.dirty||i.touched)),v.Hb(3),v.tc("disabled",t.invalid),v.Hb(10),v.tc("dataSource",e.adminEmailTable),v.Hb(13),v.tc("matHeaderRowDef",e.displayedColumns),v.Hb(1),v.tc("matRowDefColumns",e.displayedColumns),v.Hb(1),v.tc("pageSizeOptions",v.wc(9,rt))}},directives:[Y.a,o.x,o.o,o.p,k.c,Z.b,o.c,o.u,o.n,o.q,i.m,o.d,C.b,p.j,h.a,p.c,p.e,p.b,p.g,p.i,u.a,N,k.b,p.d,h.b,p.a,M.a,p.f,p.h],pipes:[i.e],styles:[""]}),t})(),canActivate:[a("Dojc").a],data:{expectedRole:"admin,manager"}}];let dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v.Rb({type:t}),t.\u0275inj=v.Qb({imports:[[c.f.forChild(mt)],c.f]}),t})(),bt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v.Rb({type:t}),t.\u0275inj=v.Qb({imports:[[i.c,o.i,o.t,n.a,s.a,dt]]}),t})()}}]);