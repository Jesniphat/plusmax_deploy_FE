(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Dojc:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("mrSG"),n=i("xzLf"),a=i("n3+I"),c=i("fXoL"),r=i("tyNb");let d=(()=>{class t{constructor(t,e,i){this.router=t,this.apiLogin=e,this.root=i}canActivate(t,e){return Object(o.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);try{const e=t.data.expectedRole.split(","),i=yield this.apiLogin.role();return e.indexOf(i)>=0?(yield this.root.setBlockUI(!1),!0):(yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1)}catch(e){return console.log(e),yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1}})}}return t.\u0275fac=function(e){return new(e||t)(c.dc(r.b),c.dc(n.a),c.dc(a.a))},t.\u0275prov=c.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},FJqe:function(t,e,i){"use strict";i.r(e),i.d(e,"RequestModule",function(){return Ie});var o=i("3Pt+"),n=i("ofXK"),a=i("tyNb"),c=i("Dojc"),r=i("mrSG"),d=i("M9IT"),s=i("+0xr"),l=i("R0Ic"),u=i("n3+I"),b=i("PLN7"),m=i("eDjg"),p=i("Hlss"),h=i("0IaG"),f=i("fXoL"),g=i("bTqV"),v=i("kmnG"),C=i("qFsG");function y(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",13,14),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.i=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.i)("ngModel",t.data.input.i)("required",t.data.label.i)}}function M(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",15,16),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.ii=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.ii)("ngModel",t.data.input.ii)("required",t.data.label.ii)}}function Y(t,e){if(1&t&&(f.Zb(0,"div",9),f.Kc(1,y,4,3,"div",10),f.Kc(2,M,4,3,"div",10),f.Yb()),2&t){const t=f.lc();f.Hb(1),f.tc("ngIf",t.data.label.i),f.Hb(1),f.tc("ngIf",t.data.label.ii)}}function Z(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",17,18),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.iii=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.iii)("ngModel",t.data.input.iii)("required",t.data.label.iii)}}function q(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",19,20),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.iv=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.iv)("ngModel",t.data.input.iv)("required",t.data.label.iv)}}function w(t,e){if(1&t&&(f.Zb(0,"div",9),f.Kc(1,Z,4,3,"div",10),f.Kc(2,q,4,3,"div",10),f.Yb()),2&t){const t=f.lc();f.Hb(1),f.tc("ngIf",t.data.label.iii),f.Hb(1),f.tc("ngIf",t.data.label.iv)}}function P(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",21,22),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.v=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.v)("ngModel",t.data.input.v)("required",t.data.label.v)}}function I(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",23,24),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.vi=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.vi)("ngModel",t.data.input.vi)("required",t.data.label.vi)}}function L(t,e){if(1&t&&(f.Zb(0,"div",9),f.Kc(1,P,4,3,"div",10),f.Kc(2,I,4,3,"div",10),f.Yb()),2&t){const t=f.lc();f.Hb(1),f.tc("ngIf",t.data.label.v),f.Hb(1),f.tc("ngIf",t.data.label.vi)}}function x(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",25,26),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.vii=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.vii)("ngModel",t.data.input.vii)("required",t.data.label.vii)}}function H(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",27,28),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.viii=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.viii)("ngModel",t.data.input.viii)("required",t.data.label.viii)}}function k(t,e){if(1&t&&(f.Zb(0,"div",9),f.Kc(1,x,4,3,"div",10),f.Kc(2,H,4,3,"div",10),f.Yb()),2&t){const t=f.lc();f.Hb(1),f.tc("ngIf",t.data.label.vii),f.Hb(1),f.tc("ngIf",t.data.label.viii)}}function O(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",11),f.Zb(1,"mat-form-field",12),f.Zb(2,"input",29,30),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc(2).data.input.ix=e}),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2);f.Hb(2),f.tc("placeholder",t.data.label.ix)("ngModel",t.data.input.ix)("required",t.data.label.ix)}}function D(t,e){if(1&t&&(f.Zb(0,"div",9),f.Kc(1,O,4,3,"div",10),f.Yb()),2&t){const t=f.lc();f.Hb(1),f.tc("ngIf",t.data.label.ix)}}function F(t,e){1&t&&(f.Zb(0,"div",9),f.Mc(1,"10"),f.Yb())}let B=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(this.data.input)}}return t.\u0275fac=function(e){return new(e||t)(f.Tb(h.f),f.Tb(h.a))},t.\u0275cmp=f.Nb({type:t,selectors:[["app-input-dialog"]],decls:20,vars:11,consts:[[1,"w3-modal-content"],[1,"w3-container"],["mat-dialog-title",""],["mat-dialog-content",""],["dialogForm","ngForm"],["class","w3-row",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-button","","color","primary",1,"w3-left",3,"disabled","click"],["mat-button","","color","warn",1,"w3-right",3,"click"],[1,"w3-row"],["class","w3-col w3-half",4,"ngIf"],[1,"w3-col","w3-half"],[1,"w3-block","w3-padding"],["matInput","","name","i",3,"placeholder","ngModel","required","ngModelChange"],["i","ngModel"],["matInput","","name","ii",3,"placeholder","ngModel","required","ngModelChange"],["ii","ngModel"],["matInput","","name","iii",3,"placeholder","ngModel","required","ngModelChange"],["iii","ngModel"],["matInput","","name","iv",3,"placeholder","ngModel","required","ngModelChange"],["iv","ngModel"],["matInput","","name","v",3,"placeholder","ngModel","required","ngModelChange"],["v","ngModel"],["matInput","","name","vi",3,"placeholder","ngModel","required","ngModelChange"],["vi","ngModel"],["matInput","","name","vii",3,"placeholder","ngModel","required","ngModelChange"],["vii","ngModel"],["matInput","","name","viii",3,"placeholder","ngModel","required","ngModelChange"],["viii","ngModel"],["matInput","","name","ix",3,"placeholder","ngModel","required","ngModelChange"],["ix","ngModel"]],template:function(t,e){if(1&t&&(f.Zb(0,"div",0),f.Zb(1,"div",1),f.Zb(2,"h1",2),f.Mc(3),f.Yb(),f.Zb(4,"div",3),f.Zb(5,"p"),f.Mc(6),f.Yb(),f.Zb(7,"form",null,4),f.Kc(9,Y,3,2,"div",5),f.Kc(10,w,3,2,"div",5),f.Kc(11,L,3,2,"div",5),f.Kc(12,k,3,2,"div",5),f.Kc(13,D,2,1,"div",5),f.Kc(14,F,2,0,"div",5),f.Yb(),f.Yb(),f.Zb(15,"div",6),f.Zb(16,"button",7),f.hc("click",function(){return e.onConfirm()}),f.Mc(17),f.Yb(),f.Zb(18,"button",8),f.hc("click",function(){return e.onCancel()}),f.Mc(19),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&t){const t=f.Ac(8);f.Hb(3),f.Nc(e.data.header),f.Hb(3),f.Nc(e.data.body),f.Hb(3),f.tc("ngIf",e.data.number>0),f.Hb(1),f.tc("ngIf",e.data.number>2),f.Hb(1),f.tc("ngIf",e.data.number>4),f.Hb(1),f.tc("ngIf",e.data.number>6),f.Hb(1),f.tc("ngIf",e.data.number>8),f.Hb(1),f.tc("ngIf",e.data.number>10),f.Hb(2),f.tc("disabled",t.invalid),f.Hb(1),f.Nc(e.data.confirmButton),f.Hb(2),f.Nc(e.data.cancelButton)}},directives:[h.g,h.d,o.x,o.o,o.p,n.m,h.c,g.b,v.c,C.b,o.c,o.n,o.q,o.u],styles:[""]}),t})();var _=i("AytR"),K=i("7FpO");function N(t,e){if(1&t&&(f.Zb(0,"option",18),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.title),f.Hb(1),f.Oc(" ",t.title," ")}}function A(t,e){if(1&t&&(f.Zb(0,"option",18),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.rate),f.Hb(1),f.Oc(" ",t.title," ")}}function S(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",19),f.Zb(1,"div",20),f.Zb(2,"mat-form-field",7),f.Zb(3,"select",21),f.hc("ngModelChange",function(t){return e.$implicit.importDuty=t}),f.Kc(4,A,2,2,"option",10),f.Yb(),f.Yb(),f.Yb(),f.Zb(5,"div",22),f.Zb(6,"p",7),f.Zb(7,"label"),f.Mc(8),f.Yb(),f.Yb(),f.Yb(),f.Zb(9,"div",20),f.Zb(10,"mat-form-field",7),f.Zb(11,"input",23),f.hc("keyup",function(){f.Dc(t);const i=e.index;return f.lc().calWeightWithTotal(i)})("ngModelChange",function(t){return e.$implicit.weight=t}),f.Yb(),f.Yb(),f.Yb(),f.Zb(12,"div",20),f.Zb(13,"mat-form-field",7),f.Zb(14,"input",24),f.hc("keyup",function(){return f.Dc(t),f.lc().calWeight()})("ngModelChange",function(t){return e.$implicit.sumWeight=t}),f.Yb(),f.Yb(),f.Yb(),f.Zb(15,"div",25),f.Zb(16,"mat-form-field",7),f.Zb(17,"input",26),f.hc("ngModelChange",function(t){return e.$implicit.total=t})("keyup",function(){f.Dc(t);const i=e.index;return f.lc().calWeightWithTotal(i)}),f.Yb(),f.Yb(),f.Yb(),f.Zb(18,"div",25),f.Zb(19,"mat-form-field",7),f.Zb(20,"input",27),f.hc("ngModelChange",function(t){return e.$implicit.price=t}),f.Yb(),f.Yb(),f.Yb(),f.Zb(21,"div",25),f.Zb(22,"mat-form-field",7),f.Zb(23,"input",28),f.hc("ngModelChange",function(t){return e.$implicit.sumPrice=t}),f.Yb(),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit,i=f.lc();f.Hb(3),f.tc("name",t.id+"-duty")("ngModel",t.importDuty),f.Hb(1),f.tc("ngForOf",i.importDuty),f.Hb(4),f.Qc("",t.brand," ",t.productName," model: ",t.model,""),f.Hb(3),f.tc("name",t.id+"-weight")("ngModel",t.weight),f.Hb(3),f.tc("name",t.id+"-sum-weight")("ngModel",t.sumWeight),f.Hb(3),f.tc("name",t.id+"-amount")("ngModel",t.total),f.Hb(3),f.tc("name",t.id+"-price")("ngModel",t.price),f.Hb(3),f.tc("name",t.id+"-sum-price")("ngModel",t.sumPrice)}}function T(t,e){if(1&t&&(f.Zb(0,"option",18),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.value),f.Hb(1),f.Oc(" ",t.viewValue," ")}}let j=(()=>{class t{constructor(t,e,i,o){this.dialogRef=t,this.data=e,this.api=i,this.root=o,this.currencyList=[],this.importDuty=[],this.profitList=[];for(let n=0;n<50;n++)this.profitList.push({value:n+1+"",viewValue:n+1+"%"});e.totalWight&&(e.totalWight=null),e.saleProfit&&(e.saleProfit=null)}ngOnInit(){this.getDuty(),console.log(this.data),this.data&&this.data.selectedDatas&&this.data.selectedDatas.length>0&&this.data.selectedDatas.forEach((t,e)=>{this.calWeightWithTotal(e)})}getDuty(){return Object(r.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const t=_.a.calUrl,e={method:"GET"},i=yield fetch(t+"/api/getImportDuty",e).then(t=>t.json());i&&i.categories&&i.categories.length>0&&(this.importDuty=i.categories);const o=yield fetch(t+"/api/getCurrency",e).then(t=>t.json());if(o&&o.currencies&&o.currencies.length>0){this.currencyList=o.currencies;const t=[];this.currencyList.forEach(e=>{t.push(e.title)}),-1===t.indexOf(this.data.currency)&&(this.data.currency=null)}yield this.root.setBlockUI(!1)})}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(this.data)}numberOnly(t){const e=t.which?t.which:t.keyCode;return 46===e||!(e>31&&(e<48||e>57))}calWeight(){return Object(r.a)(this,void 0,void 0,function*(){this.data.totalWight=0,this.data.selectedDatas.forEach(t=>{(null!=t.sumWeight||isNaN(t.sumWeight))&&(this.data.totalWight+=""===t.sumWeight?0:parseFloat(t.sumWeight))}),this.data.totalWight=parseFloat(this.data.totalWight).toFixed(2)})}calWeightWithTotal(t){return Object(r.a)(this,void 0,void 0,function*(){let e=0;isNaN(parseFloat(this.data.selectedDatas[t].weight))||(e=parseFloat(this.data.selectedDatas[t].weight)),this.data.selectedDatas[t].sumWeight=(this.data.selectedDatas[t].total*e).toFixed(2),yield this.calWeight()})}}return t.\u0275fac=function(e){return new(e||t)(f.Tb(h.f),f.Tb(h.a),f.Tb(b.a),f.Tb(u.a))},t.\u0275cmp=f.Nb({type:t,selectors:[["app-cal-cost-popup"]],decls:35,vars:11,consts:[[1,"w3-modal-content"],[1,"w3-container"],["mat-dialog-title",""],["mat-dialog-content",""],["dialogForm","ngForm"],[1,"w3-row"],[1,"w3-col","w3-half"],[1,"w3-block","my-padding"],["matNativeControl","","name","currency","placeholder","Currency","required","",3,"ngModel","ngModelChange"],["currency","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","w3-row","style","border: solid 1px gray; margin-bottom: 5px;",4,"ngFor","ngForOf"],["matInput","","type","text","name","totalWight","placeholder","Total weight (KG.)","required","",3,"ngModel","keypress","ngModelChange"],["matNativeControl","","name","saleProfit","placeholder","Sale profit (%)","required","",3,"ngModel","ngModelChange"],["saleProfit","ngModel"],["mat-dialog-actions","","align","end"],["mat-button","","color","primary",1,"w3-left",3,"disabled","click"],["mat-button","","color","warn",1,"w3-right",3,"click"],[3,"value"],[1,"w3-row",2,"border","solid 1px gray","margin-bottom","5px"],[1,"w3-col","s12","m2","l2"],["matNativeControl","","placeholder","Import duty(%)","required","",3,"name","ngModel","ngModelChange"],[1,"w3-col","s12","m3","l3"],["matInput","","appOnlyNum","","type","text","placeholder","Weight(KG.)","required","",3,"name","ngModel","keyup","ngModelChange"],["matInput","","appOnlyNum","","type","text","placeholder","Sum Weight(KG.)","required","",3,"name","ngModel","keyup","ngModelChange"],[1,"w3-col","s12","m1","l1"],["matInput","","appOnlyNum","","type","text","placeholder","Amount","required","",3,"name","ngModel","ngModelChange","keyup"],["matInput","","appOnlyNum","","type","text","placeholder","Price","required","",3,"name","ngModel","ngModelChange"],["matInput","","appOnlyNum","","type","text","placeholder","Sum Price","required","",3,"name","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(f.Zb(0,"div",0),f.Zb(1,"div",1),f.Zb(2,"h1",2),f.Mc(3),f.Yb(),f.Zb(4,"div",3),f.Zb(5,"p"),f.Mc(6),f.Yb(),f.Zb(7,"form",null,4),f.Zb(9,"div",5),f.Zb(10,"div",6),f.Zb(11,"mat-form-field",7),f.Zb(12,"select",8,9),f.hc("ngModelChange",function(t){return e.data.currency=t}),f.Kc(14,N,2,2,"option",10),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Kc(15,S,24,16,"div",11),f.Zb(16,"div",5),f.Zb(17,"div",6),f.Mc(18," \xa0 "),f.Yb(),f.Zb(19,"div",6),f.Zb(20,"mat-form-field",7),f.Zb(21,"input",12),f.hc("keypress",function(t){return e.numberOnly(t)})("ngModelChange",function(t){return e.data.totalWight=t}),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Zb(22,"div",5),f.Zb(23,"div",6),f.Mc(24," \xa0 "),f.Yb(),f.Zb(25,"div",6),f.Zb(26,"mat-form-field",7),f.Zb(27,"select",13,14),f.hc("ngModelChange",function(t){return e.data.saleProfit=t}),f.Kc(29,T,2,2,"option",10),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Zb(30,"div",15),f.Zb(31,"button",16),f.hc("click",function(){return e.onConfirm()}),f.Mc(32),f.Yb(),f.Zb(33,"button",17),f.hc("click",function(){return e.onCancel()}),f.Mc(34),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&t){const t=f.Ac(8);f.Hb(3),f.Nc(e.data.header),f.Hb(3),f.Nc(e.data.body),f.Hb(6),f.tc("ngModel",e.data.currency),f.Hb(2),f.tc("ngForOf",e.currencyList),f.Hb(1),f.tc("ngForOf",e.data.selectedDatas),f.Hb(6),f.tc("ngModel",e.data.totalWight),f.Hb(6),f.tc("ngModel",e.data.saleProfit),f.Hb(2),f.tc("ngForOf",e.profitList),f.Hb(2),f.tc("disabled",t.invalid),f.Hb(1),f.Nc(e.data.confirmButton),f.Hb(2),f.Nc(e.data.cancelButton)}},directives:[h.g,h.d,o.x,o.o,o.p,v.c,C.b,o.v,o.u,o.n,o.q,n.l,o.c,h.c,g.b,o.r,o.y,K.a],styles:[".my-padding[_ngcontent-%COMP%]{padding:8px 4px!important}"]}),t})();var R=i("Q+/z"),W=i("wHSu"),$=i("Sm0T"),U=i("f2kA"),E=i("INes"),X=i("BF3V"),z=i("dNgK"),J=i("b6Qw"),Q=i("Wp6s"),G=i("/1cH"),V=i("gfTr"),tt=i("6NWb"),et=i("7EHt"),it=i("FKr1"),ot=i("QibW");const nt=["requestProductList"];function at(t,e){if(1&t&&(f.Zb(0,"option",93),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.id),f.Hb(1),f.Oc(" ",t.name," ")}}function ct(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",23),f.Zb(1,"mat-expansion-panel",91),f.Zb(2,"mat-expansion-panel-header"),f.Zb(3,"mat-panel-title"),f.Mc(4," Open request by "),f.Yb(),f.Ub(5,"mat-panel-description"),f.Yb(),f.Zb(6,"mat-form-field",6),f.Zb(7,"mat-label"),f.Mc(8,"Sales"),f.Yb(),f.Zb(9,"select",92),f.hc("ngModelChange",function(e){return f.Dc(t),f.lc().requestBy=e}),f.Kc(10,at,2,2,"option",11),f.Yb(),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc();f.Hb(1),f.tc("expanded",!0),f.Hb(8),f.tc("ngModel",t.requestBy),f.Hb(1),f.tc("ngForOf",t.saleLists)}}function rt(t,e){if(1&t&&(f.Zb(0,"div",23),f.Zb(1,"div",94),f.Zb(2,"span",95),f.Mc(3),f.Yb(),f.Yb(),f.Yb()),2&t){const t=f.lc();f.Hb(3),f.Oc("PO: ",t.po,"")}}function dt(t,e){if(1&t&&(f.Zb(0,"mat-option",93),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.customer),f.Hb(1),f.Oc(" ",t.customer," ")}}function st(t,e){1&t&&(f.Zb(0,"mat-error"),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e37\u0e48\u0e2d "),f.Yb())}function lt(t,e){1&t&&(f.Zb(0,"mat-hint",95),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e0a\u0e37\u0e48\u0e2d\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07 "),f.Yb())}function ut(t,e){1&t&&(f.Zb(0,"span"),f.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07"),f.Yb())}function bt(t,e){if(1&t&&(f.Zb(0,"mat-error"),f.Kc(1,ut,2,0,"span",12),f.Yb()),2&t){f.lc();const t=f.Ac(23);f.Hb(1),f.tc("ngIf",t.errors.email)}}function mt(t,e){1&t&&(f.Zb(0,"mat-error"),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e25\u0e39\u0e01\u0e04\u0e49\u0e32 "),f.Yb())}function pt(t,e){1&t&&(f.Zb(0,"mat-error"),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48\u0e0a\u0e37\u0e48\u0e2d\u0e25\u0e39\u0e01\u0e04\u0e49\u0e32 "),f.Yb())}function ht(t,e){if(1&t){const t=f.ac();f.Zb(0,"tr",31),f.Zb(1,"td",32),f.Mc(2),f.Yb(),f.Zb(3,"td",33),f.Mc(4),f.Yb(),f.Zb(5,"td",34),f.Zb(6,"button",96),f.hc("click",function(){f.Dc(t);const i=e.$implicit;return f.lc().downloadFile(i.id,i.original_name)}),f.Ub(7,"fa-icon",28),f.Yb(),f.Yb(),f.Zb(8,"td",34),f.Zb(9,"button",96),f.hc("click",function(){f.Dc(t);const i=e.$implicit;return f.lc().removeFile(i.id)}),f.Ub(10,"fa-icon",28),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit,i=f.lc();f.Hb(2),f.Nc(t.original_name),f.Hb(2),f.Oc(" ","request"==t.type?"Requester":"supplier"==t.type?"Supplier":"",""),f.Hb(3),f.tc("icon",i.faDownload),f.Hb(3),f.tc("icon",i.faTrashAlt)}}function ft(t,e){if(1&t&&(f.Zb(0,"mat-option",93),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.name),f.Hb(1),f.Oc(" ",t.name," ")}}function gt(t,e){1&t&&(f.Zb(0,"mat-error"),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e1a\u0e23\u0e19\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),f.Yb())}function vt(t,e){1&t&&(f.Zb(0,"mat-hint",95),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e41\u0e1a\u0e23\u0e19\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07 "),f.Yb())}function Ct(t,e){if(1&t&&(f.Zb(0,"mat-option",93),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("value",t.model),f.Hb(1),f.Oc(" ",t.model," ")}}function yt(t,e){1&t&&(f.Zb(0,"mat-error"),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e42\u0e21\u0e40\u0e14\u0e25\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),f.Yb())}function Mt(t,e){1&t&&(f.Zb(0,"mat-error"),f.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e08\u0e33\u0e19\u0e27\u0e19\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),f.Yb())}function Yt(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e22\u0e35\u0e48\u0e2b\u0e49\u0e2d "),f.Yb())}const Zt=function(t){return{color:t}};function qt(t,e){if(1&t&&(f.Zb(0,"mat-cell",97),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("ngStyle",f.xc(2,Zt,"deleted"==t.priceStatus?"lightgray":"")),f.Hb(1),f.Oc(" ",t.brand," ")}}function wt(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e42\u0e21\u0e40\u0e14\u0e25 "),f.Yb())}function Pt(t,e){if(1&t&&(f.Zb(0,"mat-cell",98),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("ngStyle",f.xc(2,Zt,"deleted"==t.priceStatus?"lightgray":"")),f.Hb(1),f.Oc(" ",t.model," ")}}function It(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e08\u0e33\u0e19\u0e27\u0e19 "),f.Yb())}function Lt(t,e){if(1&t&&(f.Zb(0,"mat-cell",99),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.tc("ngStyle",f.xc(2,Zt,"deleted"==t.priceStatus?"lightgray":"")),f.Hb(1),f.Oc(" ",t.total," ")}}function xt(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e23\u0e32\u0e04\u0e32 "),f.Yb())}function Ht(t,e){if(1&t&&(f.Zb(0,"mat-cell",100),f.Zb(1,"div"),f.Zb(2,"div"),f.Mc(3),f.Yb(),f.Yb(),f.Yb()),2&t){const t=e.$implicit;f.tc("ngStyle",f.xc(2,Zt,"deleted"==t.priceStatus?"lightgray":"")),f.Hb(3),f.Oc(" \u0e21\u0e35\u0e1c\u0e39\u0e49\u0e40\u0e2a\u0e19\u0e2d\u0e23\u0e32\u0e04\u0e32\u0e41\u0e25\u0e49\u0e27 ",t.priceNumber," \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 ")}}function kt(t,e){1&t&&(f.Zb(0,"mat-header-cell",101),f.Mc(1," \u0e08\u0e31\u0e14\u0e01\u0e32\u0e23 "),f.Yb())}function Ot(t,e){if(1&t){const t=f.ac();f.Zb(0,"button",104),f.hc("click",function(){f.Dc(t);const e=f.lc().$implicit;return f.lc().editProduct(e.productId)}),f.Ub(1,"fa-icon",28),f.Yb()}if(2&t){const t=f.lc().$implicit,e=f.lc();f.tc("disabled",t.priceNumber>0),f.Hb(1),f.tc("icon",e.faPen)}}function Dt(t,e){if(1&t){const t=f.ac();f.Zb(0,"mat-cell",102),f.Kc(1,Ot,2,2,"button",103),f.Zb(2,"button",104),f.hc("click",function(){f.Dc(t);const i=e.$implicit;return f.lc().deleteProductList(i.productId)}),f.Ub(3,"fa-icon",28),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit,i=f.lc();f.Hb(1),f.tc("ngIf",0===i.requestCustomer.id),f.Hb(1),f.tc("disabled",t.priceNumber>0||"deleted"==t.priceStatus),f.Hb(1),f.tc("icon",i.faTrashAlt)}}function Ft(t,e){if(1&t&&(f.Zb(0,"div",114),f.Mc(1),f.Yb()),2&t){const t=f.lc().$implicit;f.Hb(1),f.Oc(" Supplier \u0e01\u0e33\u0e2b\u0e19\u0e14\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e31\u0e49\u0e19\u0e15\u0e48\u0e33 ",t.minTotal," \u0e0b\u0e36\u0e48\u0e07\u0e21\u0e32\u0e01\u0e27\u0e48\u0e32\u0e08\u0e33\u0e19\u0e27\u0e19\u0e2a\u0e34\u0e19\u0e04\u0e04\u0e49\u0e32\u0e17\u0e35\u0e48\u0e17\u0e48\u0e32\u0e19\u0e02\u0e2d ")}}function Bt(t,e){if(1&t&&(f.Zb(0,"span"),f.Mc(1),f.Yb()),2&t){const t=f.lc(2).$implicit,e=f.lc(4);f.Hb(1),f.Qc("\u0e08\u0e32\u0e01: ",t.supplierName," \u0e23\u0e32\u0e04\u0e32\u0e17\u0e38\u0e19\u0e0b\u0e31\u0e1e\u0e1e\u0e25\u0e32\u0e22: ",e.addComma(t.supplierPrice)," ","0"!=t.local_charge?"Local charge: "+e.addComma(t.local_charge)+" "+t.currency:""," ")}}function _t(t,e){if(1&t&&(f.Zb(0,"span"),f.Mc(1),f.Yb()),2&t){const t=f.lc(2).$implicit;f.Hb(1),f.Oc(" \u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38: ",t.remark," ")}}function Kt(t,e){1&t&&f.Ub(0,"br")}function Nt(t,e){if(1&t){const t=f.ac();f.Zb(0,"mat-form-field",119),f.Zb(1,"input",120),f.hc("ngModelChange",function(e){f.Dc(t);const i=f.lc(3).index,o=f.lc(3).$implicit;return f.lc().requestProductList[o.rowNo].offered[i].remark=e}),f.Yb(),f.Yb()}if(2&t){const t=f.lc(3).index,e=f.lc(3).$implicit,i=f.lc();f.Hb(1),f.tc("ngModel",i.requestProductList[e.rowNo].offered[t].remark)}}function At(t,e){if(1&t){const t=f.ac();f.Zb(0,"span"),f.Kc(1,Nt,2,1,"mat-form-field",117),f.Mc(2," \xa0\xa0 "),f.Zb(3,"button",118),f.hc("click",function(){f.Dc(t);const e=f.lc(2),i=e.index,o=e.$implicit,n=f.lc(3).$implicit,a=f.lc();return a.approveRemark(a.requestProductList[n.rowNo].offered[i].remark,o.requestId,o.supplierSendId)}),f.Mc(4,"Approve"),f.Yb(),f.Yb()}if(2&t){const t=f.lc(6);f.Hb(1),f.tc("ngIf",t.requestProductList.length>0)}}function St(t,e){1&t&&f.Ub(0,"br")}function Tt(t,e){if(1&t&&(f.Zb(0,"span",121),f.Mc(1),f.Yb()),2&t){const t=f.lc(2).$implicit;f.Hb(1),f.Pc(" * \u0e21\u0e35\u0e01\u0e32\u0e23\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19 Model \u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e08\u0e32\u0e01\u0e17\u0e32\u0e07 Supplier \u0e08\u0e32\u0e01 ",t.model," \u0e40\u0e1b\u0e47\u0e19 ",t.changed_model," ")}}function jt(t,e){if(1&t&&(f.Zb(0,"div",115),f.Mc(1),f.Kc(2,Bt,2,3,"span",12),f.Kc(3,_t,2,1,"span",12),f.Kc(4,Kt,1,0,"br",12),f.Kc(5,At,5,1,"span",12),f.Kc(6,St,1,0,"br",12),f.Kc(7,Tt,2,2,"span",116),f.Yb()),2&t){const t=f.lc().$implicit,e=f.lc(4);f.Hb(1),f.Rc(" ",e.addComma(t.price)," ",t.currency," \u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e31\u0e49\u0e19\u0e15\u0e48\u0e33: ",e.addComma(t.minTotal)," \u0e40\u0e04\u0e23\u0e37\u0e48\u0e2d\u0e07 \u0e08\u0e31\u0e14\u0e2a\u0e48\u0e07: ",t.sendDay," \u0e27\u0e31\u0e19\u0e17\u0e33\u0e01\u0e32\u0e23 "),f.Hb(1),f.tc("ngIf",e.role&&"admin"==e.role),f.Hb(1),f.tc("ngIf",""!==t.remark&&"admin"==e.userRole||"1"==t.remark_approved),f.Hb(1),f.tc("ngIf",""!==t.remark&&"admin"==e.userRole&&"0"==t.remark_approved),f.Hb(1),f.tc("ngIf",""!==t.remark&&"admin"==e.userRole&&"0"==t.remark_approved),f.Hb(1),f.tc("ngIf","1"==t.is_changed),f.Hb(1),f.tc("ngIf","1"==t.is_changed)}}function Rt(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",110),f.Zb(1,"mat-radio-button",111),f.hc("click",function(){f.Dc(t);const i=e.$implicit,o=f.lc(3).$implicit,n=f.lc();return n.clickRadio(o.rowNo,i.id,n.requestProductList[o.rowNo].selectedId)}),f.Kc(2,Ft,2,1,"div",112),f.Kc(3,jt,8,10,"div",113),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit;f.Hb(1),f.tc("value",t.id)("disabled",t.minTotal>t.total),f.Hb(1),f.tc("ngIf",t.minTotal>t.total),f.Hb(1),f.tc("ngIf",t.minTotal<=t.total)}}function Wt(t,e){if(1&t){const t=f.ac();f.Zb(0,"div"),f.Zb(1,"mat-radio-group",108),f.hc("ngModelChange",function(e){f.Dc(t);const i=f.lc(2).$implicit;return f.lc().requestProductList[i.rowNo].selectedId=e}),f.Kc(2,Rt,4,4,"div",109),f.Yb(),f.Yb()}if(2&t){const t=f.lc(2).$implicit,e=f.lc();f.Hb(1),f.tc("ngModel",e.requestProductList[t.rowNo].selectedId)("disabled","deleted"==t.priceStatus||"job_close"==t.priceStatus),f.Hb(1),f.tc("ngForOf",t.offered)}}function $t(t,e){if(1&t&&(f.Zb(0,"div",106),f.Zb(1,"div",107),f.Kc(2,Wt,3,3,"div",12),f.Yb(),f.Yb()),2&t){const t=f.lc().$implicit,e=f.lc();f.tc("@detailExpand",t==e.expandedElement&&t.offered.length>0?"expanded":"collapsed"),f.Hb(2),f.tc("ngIf",e.isArrays(t.offered))}}function Ut(t,e){if(1&t&&(f.Zb(0,"mat-cell"),f.Kc(1,$t,3,2,"div",105),f.Yb()),2&t){const t=e.$implicit,i=f.lc();f.Ib("colspan",i.displayedColumns.length),f.Hb(1),f.tc("ngIf",i.isArrays(t.offered)&&t.offered.length>0)}}function Et(t,e){1&t&&f.Ub(0,"mat-header-row")}function Xt(t,e){if(1&t){const t=f.ac();f.Zb(0,"mat-row",122),f.hc("click",function(){f.Dc(t);const i=e.$implicit,o=f.lc();return o.expandedElement=o.expandedElement===i?null:i}),f.Yb()}if(2&t){const t=e.$implicit,i=f.lc();f.Lb("example-expanded-row",i.expandedElement===t)}}function zt(t,e){if(1&t&&f.Ub(0,"mat-row",123),2&t){const t=e.$implicit,i=f.lc();f.tc("@detailExpand",t==i.expandedElement?"expanded":"collapsed")}}function Jt(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48 "),f.Yb())}function Qt(t,e){if(1&t&&(f.Zb(0,"mat-cell",124),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.Hb(1),f.Oc(" ",t.code," ")}}function Gt(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 "),f.Yb())}function Vt(t,e){if(1&t&&(f.Zb(0,"mat-cell",125),f.Mc(1),f.mc(2,"date"),f.Yb()),2&t){const t=e.$implicit;f.Hb(1),f.Oc(" ",f.nc(2,1,t.created_at)," ")}}function te(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Currency "),f.Yb())}function ee(t,e){if(1&t&&(f.Zb(0,"mat-cell",126),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.Hb(1),f.Oc(" ",t.currency," ")}}function ie(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e23\u0e32\u0e04\u0e32\u0e23\u0e27\u0e21(\u0e23\u0e32\u0e04\u0e32\u0e23\u0e27\u0e21 sale profit) "),f.Yb())}function oe(t,e){if(1&t&&(f.Zb(0,"mat-cell",127),f.Mc(1),f.Yb()),2&t){const t=e.$implicit,i=f.lc();f.Hb(1),f.Oc(" ",i.addComma(t.profit)," THB")}}function ne(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34 "),f.Yb())}function ae(t,e){if(1&t&&(f.Zb(0,"mat-cell",128),f.Mc(1),f.Yb()),2&t){const t=e.$implicit;f.Hb(1),f.Oc(" ",t.approved_at," ")}}function ce(t,e){1&t&&(f.Zb(0,"mat-header-cell"),f.Mc(1," \u0e2a\u0e16\u0e32\u0e19\u0e30 "),f.Yb())}function re(t,e){if(1&t&&(f.Zb(0,"mat-cell",129),f.Zb(1,"span",130),f.Mc(2),f.Yb(),f.Yb()),2&t){const t=e.$implicit;f.Hb(1),f.tc("ngStyle",f.xc(2,Zt,"Wait Approve"==t.status?"blue":"approved"==t.status?"green":"red")),f.Hb(1),f.Oc(" ",t.status.toUpperCase()," ")}}const de=function(){return{minimumFractionDigits:2}};function se(t,e){if(1&t&&(f.Zb(0,"div",110),f.Mc(1),f.Yb()),2&t){const t=e.$implicit,i=f.lc(3);f.Hb(1),f.Sc([" \u0e22\u0e35\u0e48\u0e2b\u0e49\u0e2d: ",t.brand_name," \u0e23\u0e38\u0e48\u0e19: ",t.product_name," Model: ",t.model," \u0e08\u0e33\u0e19\u0e27\u0e19: ",i.addComma(t.total)," \u0e40\u0e04\u0e23\u0e37\u0e48\u0e2d\u0e07 \u0e23\u0e32\u0e04\u0e32\u0e17\u0e38\u0e19: ",i.addComma(t.price)," ",t.currency," \u0e23\u0e32\u0e04\u0e32\u0e17\u0e38\u0e19\u0e23\u0e27\u0e21: ",(t.price*t.total).toLocaleString("en-US",f.wc(10,de))," ",t.currency," \u0e23\u0e32\u0e04\u0e32\u0e17\u0e38\u0e19 + \u0e01\u0e33\u0e44\u0e23: ",i.addComma(t.line_item_profit)," THB \u0e23\u0e32\u0e04\u0e32\u0e17\u0e38\u0e19 + \u0e01\u0e33\u0e44\u0e23\u0e23\u0e27\u0e21: ",i.addComma(t.line_profit)," THB "])}}function le(t,e){if(1&t&&(f.Zb(0,"div"),f.Kc(1,se,2,11,"div",109),f.Yb()),2&t){const t=f.lc().$implicit;f.Hb(1),f.tc("ngForOf",t.items)}}function ue(t,e){if(1&t&&(f.Zb(0,"mat-cell"),f.Zb(1,"div",106),f.Zb(2,"div",107),f.Kc(3,le,2,1,"div",12),f.Yb(),f.Yb(),f.Yb()),2&t){const t=e.$implicit,i=f.lc();f.Ib("colspan",i.calDisplayColumn.length),f.Hb(1),f.tc("@detailExpand",t==i.expandedCal?"expanded":"collapsed"),f.Hb(2),f.tc("ngIf",i.isArrays(t.items))}}function be(t,e){1&t&&f.Ub(0,"mat-header-row")}function me(t,e){if(1&t){const t=f.ac();f.Zb(0,"mat-row",122),f.hc("click",function(){f.Dc(t);const i=e.$implicit,o=f.lc();return o.expandedCal=o.expandedCal===i?null:i}),f.Yb()}if(2&t){const t=e.$implicit,i=f.lc();f.Lb("example-expanded-row",i.expandedCal===t)}}function pe(t,e){if(1&t&&f.Ub(0,"mat-row",123),2&t){const t=e.$implicit,i=f.lc();f.tc("@detailExpand",t==i.expandedCal?"expanded":"collapsed")}}function he(t,e){if(1&t){const t=f.ac();f.Zb(0,"button",89),f.hc("click",function(){return f.Dc(t),f.lc().closeJob()}),f.Mc(1,"\u0e1b\u0e34\u0e14\u0e07\u0e32\u0e19"),f.Yb()}if(2&t){const t=f.lc();f.tc("disabled","job_close"==t.requestCustomer.status)}}const fe=function(){return["expandedDetail"]},ge=function(){return["expandedDetailCal"]},ve={id:0,name:"",email:"",tel:null,prNo:"",address:"",customerId:0},Ce={brand:"",brandId:null,name:"",productId:null,model:"",description:"",total:0,productCountyId:0},ye=[];let Me=(()=>{class t{constructor(t,e,i,o,n,a,c,r,d,s,l,u,b){this.confirmDialog=t,this.inputDialog=e,this.root=i,this.api=o,this.snackBar=n,this.router=a,this.route=c,this.diff=r,this.cookieService=d,this.stuck=s,this.userService=l,this.excelService=u,this.autoComServer=b,this.requestCustomer=Object.assign({},ve),this.requestProduct=Object.assign({},Ce),this.faPen=W.j,this.faTrashAlt=W.p,this.faAngleRight=W.b,this.faAngleDown=W.a,this.faUpload=W.q,this.faTimesCircle=W.n,this.faExternalLinkAlt=W.e,this.faPaperclip=W.i,this.faDownload=W.c,this.isEditList=!1,this.editIndex=0,this.requestId=null,this.errorMessage="",this.role="",this.requestBy=0,this.isWait=!1,this.unsub={errorMessage:null},this.canProduct=!1,this.canModel=!1,this.canAddProduct=!1,this.isCustomer=!1,this.customerList=[],this.brandList=[],this.productList=[],this.displayedColumn=["brand","name","model","total"],this.displayedColumns=["brand","model","total","priceNumber","manage"],this.calDisplayColumn=["no","created_at","currency","sum_price","approved_at","status"],this.deleteRequestProductConfirmDialog={header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e01\u0e32\u0e23\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"\u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"},this.closeJobConfirmDialog={header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e01\u0e32\u0e23\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"\u0e2b\u0e32\u0e01\u0e17\u0e48\u0e32\u0e19\u0e17\u0e33\u0e01\u0e32\u0e23\u0e1b\u0e34\u0e14\u0e07\u0e32\u0e19\u0e08\u0e30\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e32\u0e04\u0e32\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e43\u0e2b\u0e21\u0e48\u0e44\u0e14\u0e49\u0e2d\u0e35\u0e01 \u0e42\u0e1b\u0e23\u0e14\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e43\u0e2b\u0e49\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e17\u0e48\u0e32\u0e19\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e32\u0e04\u0e32\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07 \u0e41\u0e25\u0e30\u0e04\u0e23\u0e1a\u0e15\u0e32\u0e21\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"},this.approveRemarkConfirmDialog={header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e01\u0e32\u0e23\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"\u0e2b\u0e32\u0e01\u0e17\u0e33\u0e01\u0e32\u0e23 Approve \u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38\u0e08\u0e30\u0e21\u0e35\u0e1c\u0e25\u0e43\u0e2b\u0e49\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14\u0e08\u0e32\u0e01 Supplier \u0e19\u0e35\u0e49\u0e43\u0e19\u0e04\u0e33\u0e02\u0e2d\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e41\u0e1b\u0e25\u0e07 \u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e15\u0e48\u0e2d\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"},this.confirmPo={header:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e07\u0e40\u0e25\u0e02 po",body:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e07\u0e40\u0e25\u0e02 po \u0e17\u0e35\u0e48\u0e17\u0e48\u0e32\u0e19\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07",number:1,label:{i:"po"},input:{i:""}},this.getApiDialog={header:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25",body:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a\u0e16\u0e49\u0e27\u0e19",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07",number:9,currency:null,totalWight:null,saleProfit:null,selectedDatas:[]},this.getCalConfirmDialog={header:"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"},this.uploadAttachFileUrl=_.a.api+_.a.path+"/attach",this.attachFileList=[],this.fileUploadQueue=null,this.checkkk="",this.po="",this.unsub.errorMessage=this.root.apiError$.subscribe(t=>this.errorMessage=t),this.requestProductList=ye,this.cookieService.delete("linkTo")}ngOnInit(){return Object(r.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("Open request"),this.requestId=this.route.snapshot.paramMap.get("id"),this.requestId&&(this.requestCustomer.id=this.requestId),this.user=yield this.userService.getUser(),this.userRole=yield this.userService.getRole(),yield this.root.setBlockUI(!0),yield this.getSales(),yield this.getBrandList(),yield this.getCalCost(),console.log(this.requestCustomer.id),0!==this.requestCustomer.id&&"0"!==this.requestCustomer.id?yield this.getRequestById():yield this.checkStuckData(),yield this.root.setBlockUI(!1),(yield document.getElementById("requestCustomerName")).focus()})}getRequestById(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.api.gets("/get-request-byid?id="+this.requestCustomer.id).toPromise(),e=yield this.userService.getRole();if(console.log(t),t){this.role=t.role,this.requestCustomer=t.requestList,this.requestBy=this.requestCustomer.requestById,this.requestProductList=t.requestListDetail,this.attachFileList=t.attachFiles;const i=t.submitListDetail;this.requestProductList.forEach((t,o)=>{this.requestProductList[o].offered=[],this.requestProductList[o].rowNo=o,i.forEach(e=>{e.productId===t.productId&&(this.requestProductList[o].offered.push(e),this.requestProductList[o].expanded=!1,this.requestProductList[o].selectedId=null)}),this.requestProductList[o].offered.sort((t,e)=>t.price>e.price?1:e.price>t.price?-1:0),"admin"===e||1!==this.requestCustomer.min_over&&"1"!==this.requestCustomer.min_over||(this.requestProductList[o].offered=this.requestProductList[o].offered.filter((t,e)=>{if(0===e)return t})),this.requestProductList[o].priceNumber=this.requestProductList[o].offered.length,this.requestProductList[o].priceStatus=t.priceStatus,this.requestProductList[o].costText=t.costAftercalSup&&t.costAftercalSale?"\u0e21\u0e35\u0e01\u0e32\u0e23\u0e04\u0e33\u0e19\u0e27\u0e13\u0e23\u0e32\u0e04\u0e32\u0e15\u0e49\u0e19\u0e17\u0e38\u0e19\u0e41\u0e25\u0e49\u0e27 supplier: "+t.costAftercalSup+" sale: "+t.costAftercalSale:"\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35\u0e01\u0e32\u0e23\u0e04\u0e33\u0e19\u0e27\u0e13\u0e23\u0e32\u0e04\u0e32\u0e15\u0e49\u0e19\u0e17\u0e38\u0e19"}),"job_close"===this.requestCustomer.status&&(this.po=this.requestCustomer.po,yield this.setDefaultBox(this.requestProductList))}console.log(this.requestProductList),yield this.genRequestProductListTable()})}setDefaultBox(t){return Object(r.a)(this,void 0,void 0,function*(){this.requestProductList=t.filter((t,e)=>(t.offered.forEach(e=>{"selected"===e.sStatus&&(t.selectedId=e.id)}),t.id=t.id))})}addProductFromExcel(t){return Object(r.a)(this,void 0,void 0,function*(){const e=t.target.files[0];let i=yield this.excelService.getJson(e);if(i=i.reduce((t,e)=>{let i;return t.find((t,o)=>(i=o,t.brand===e.brand&&t.model===e.model))?(t[i].qty+=e.qty,t):t.concat([e])},[]),i.length<0)this.snackBar.openFromComponent(R.a,{data:{message:"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e43\u0e19\u0e44\u0e1f\u0e25\u0e4c",warning:!0},duration:3e3});else{yield this.root.setBlockUI(!0),yield this.getProductList(),this.requestProductList=[];for(let t=0;t<i.length;t++){const e=this.brandList.find(e=>e.name.toLowerCase()===i[t].brand.toLowerCase());if(null==e){this.snackBar.openFromComponent(R.a,{data:{message:"Brand \u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07",warning:!0},duration:3e3});break}const o=e.id,n=e.name,a=e.productCountyId,c=this.productList.find(e=>e.model===i[t].model);let r=0;if(null!=c&&(r=c.id),0===r){const e={id:r,brand:n,name:i[t].model,model:i[t].model,status:"1",productCountyId:a,description:i[t].description};r=(yield this.api.post("/add-product",e).toPromise()).productID,console.log("add new product"),yield this.getProductList()}this.requestProductList.push({brand:n,brandId:o,name:i[t].model,productId:r,model:i[t].model,description:i[t].description,total:i[t].qty,offered:[],selectedId:null,expanded:!1,priceStatus:"pending",priceNumber:0,rowNo:t})}this.root.setBlockUI(!1),yield this.genRequestProductListTable()}})}addProductList(){return Object(r.a)(this,void 0,void 0,function*(){if(0===this.requestProduct.productId){yield this.root.setBlockUI(!0);const t={id:this.requestProduct.productId,brand:this.requestProduct.brand,name:this.requestProduct.model,model:this.requestProduct.model,status:"1",productCountyId:this.requestProduct.productCountyId,description:this.requestProduct.description},e=yield this.api.post("/add-product",t).toPromise();e&&null!=e||(this.root.setBlockUI(!1),this.snackBar.openFromComponent(R.a,{data:{message:"\u0e17\u0e48\u0e32\u0e19\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e0b\u0e49\u0e33",error:!0},duration:3e3})),this.requestProduct.productId=e.productID,this.root.setBlockUI(!1);const i=yield this.api.post("/find-product-bybrand-all",{brandId:e.brandID,product:this.requestProduct.model.replace(/\s+/g," ")}).toPromise();i&&i.length>0&&i.forEach(t=>{this.productList.push(t)})}if(this.isEditList)this.productList.forEach((t,e)=>{t.id===this.requestProduct.productId&&(this.requestProductList[this.editIndex]={brand:t.brand,brandId:t.brandId,name:t.name,productId:t.id,model:t.model,description:t.createdBy,total:this.requestProduct.total,offered:[],selectedId:null,expanded:!1,priceStatus:"pending",priceNumber:0,rowNo:this.requestProductList.length})});else{if(this.requestProductList.find(t=>t.productId===this.requestProduct.productId))return void this.snackBar.openFromComponent(R.a,{data:{message:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e0b\u0e49\u0e33",error:!0},duration:3e3});this.productList.forEach((t,e)=>{t.id===this.requestProduct.productId&&this.requestProductList.push({brand:t.brand,brandId:t.brandId,name:t.name,productId:t.id,model:t.model,description:t.createdBy,total:this.requestProduct.total,offered:[],selectedId:null,expanded:!1,priceStatus:"pending",priceNumber:0,rowNo:this.requestProductList.length})})}yield this.genRequestProductListTable(),yield this.resetProductAdd(),this.editIndex=0,this.isEditList=!1})}editProduct(t){return Object(r.a)(this,void 0,void 0,function*(){this.isEditList=!0;const e=this.requestProductList.find((e,i)=>(this.editIndex=i,e.productId===t));this.requestProduct={brand:e.brand,brandId:e.brandId,name:e.name,productId:e.productId,model:e.model,description:e.description,total:e.total},yield this.checkAutoHave(this.requestProduct.brand,"brandList"),yield this.checkAutoHave(this.requestProduct.model,"productModelList")})}deleteProductList(t){return Object(r.a)(this,void 0,void 0,function*(){if(0===this.requestCustomer.id)this.requestProductList=this.requestProductList.filter(e=>e.productId!==t),yield this.genRequestProductListTable();else{const e=this.requestProductList.find(e=>e.productId===t);this.confirmDialog.open(p.a,{data:this.deleteRequestProductConfirmDialog}).afterClosed().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(t){const t=yield this.api.delete("/delete-product-request?id="+e.id).toPromise();t&&t.success?(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e25\u0e22\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19",success:!0},duration:3e3}),yield this.getRequestById()):this.snackBar.openFromComponent(R.a,{data:{message:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e25\u0e1a\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e44\u0e14\u0e49",warning:!0},duration:3e3})}}))}})}resetProductAdd(){return Object(r.a)(this,void 0,void 0,function*(){this.canProduct=!1,this.canModel=!1,this.canAddProduct=!1,this.requestProduct={brand:"",brandId:null,name:"",productId:null,model:"",description:"",total:0},document.getElementById("requestProductBrand").focus()})}back(){window.history.back()}closeJob(){this.confirmPo.input.i=this.po,this.inputDialog.open(B,{data:this.confirmPo}).afterClosed().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){t&&(this.po=t.i,this.closeJobConfirm())}))}closeJobConfirm(){const t=this.requestProductList.filter(t=>null!=t.selectedId).map(t=>t.selectedId),e={requestId:this.requestCustomer.id,po:this.po,idLists:t};this.confirmDialog.open(p.a,{data:this.closeJobConfirmDialog}).afterClosed().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(t){const t=yield this.api.post("/close-job",e).toPromise();t&&t.success?(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19",success:!0},duration:3e3}),yield this.getRequestById()):this.snackBar.openFromComponent(R.a,{data:{message:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e44\u0e14\u0e49",warning:!0},duration:3e3})}}))}save(){return Object(r.a)(this,void 0,void 0,function*(){this.fileUploadQueue=document.getElementsByTagName("mat-file-upload"),0===this.requestCustomer.id?yield this.addRequestProduct():yield this.updateRequestProduct()})}addRequestProduct(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.requestCustomer;t.requestProduct=this.requestProductList,t.attachFile=[],t.requestBy=this.requestBy,this.attachFileList.length>0&&this.attachFileList.forEach(e=>{t.attachFile.push(e.id)}),yield this.root.setBlockUI(!0);const e=yield this.api.post("/add-request",t).toPromise();yield this.root.setBlockUI(!1),e&&e.success?(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3}),yield this.reset()):this.snackBar.openFromComponent(R.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3})})}updateRequestProduct(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.requestCustomer;t.attachFile=[],t.requestBy=this.requestBy,this.attachFileList.length>0&&this.attachFileList.forEach(e=>{t.attachFile.push(e.id)}),yield this.root.setBlockUI(!0);const e=yield this.api.post("/update-request",t).toPromise();yield this.root.setBlockUI(!1),e&&e.success?(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3}),yield this.reset()):this.snackBar.openFromComponent(R.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3})})}reset(){return Object(r.a)(this,void 0,void 0,function*(){yield this.resetProductAdd(),this.requestCustomer={id:0,name:"",email:"",tel:null,prNo:"",address:""},this.requestProductList=[],this.attachFileList=[],yield this.genRequestProductListTable()})}findCustomerServer(t){return Object(r.a)(this,void 0,void 0,function*(){if(0!==t.length){this.isWait=!1;try{const e=yield this.autoComServer.filter("customer",t);this.customerList=e.customers,this.customerFilteredOptions=e.customers,this.isWait=!0}catch(e){this.customerList=[],this.customerFilteredOptions=[],this.isWait=!0}}})}displayCustomer(t){return t||void 0}_filterCustomer(t,e){const i=t.toLowerCase();return e.filter(t=>t.customer.toLowerCase().indexOf(i)>0)}getSales(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.api.gets("/get-all-sales").toPromise();t&&t.success&&(this.saleLists=t.sales,this.requestBy=this.user.user_id)})}getBrandList(){return Object(r.a)(this,void 0,void 0,function*(){this.brandList=yield this.api.gets("/all-brand").toPromise(),this.brandList||this.snackBar.openFromComponent(R.a,{data:{message:"can not get brand list",warning:!0},duration:3e3})})}autoBrand(t){this.brandFilteredOptions=t&&t.length>=1&&"string"==typeof t?this._filterBrand(t,this.brandList):this.brandList.slice()}displayBrand(t){return t||void 0}_filterBrand(t,e){const i=t.toLowerCase();return e.filter(t=>0===t.name.toLowerCase().indexOf(i))}getProductList(){return Object(r.a)(this,void 0,void 0,function*(){this.productList=yield this.api.gets("/all-product").toPromise(),this.productList||this.snackBar.openFromComponent(R.a,{data:{message:"can not get product list",warning:!0},duration:3e3})})}getProductNameList(){return Object(r.a)(this,void 0,void 0,function*(){this.productNameList=yield this.api.gets("/all-product-name").toPromise(),this.productList||this.snackBar.openFromComponent(R.a,{data:{message:"can not get product name list",warning:!0},duration:3e3})})}autoProductName(t){const e=this.brandList.find(t=>t.name===this.requestProduct.brand);let i=[];i=this.productNameList.filter(t=>t.brandId===e.id),this.productNameFilteredOptions=t&&t.length>=1&&"string"==typeof t?this._filterNameProduct(t,i):i.slice()}displayProductName(t){return t||void 0}_filterNameProduct(t,e){const i=t.toLowerCase();return e.filter(t=>0===t.name.toLowerCase().indexOf(i))}autoProductModel(t){return Object(r.a)(this,void 0,void 0,function*(){try{if(0===t.length||"string"!=typeof t)return;this.isWait=!1;const e=t.replace(/\s+/g," "),i=yield this.autoComServer.filter("productWithBrandId",e,this.requestProduct.brandId);this.productList=i,this.productFilteredOptions=i,this.isWait=!0}catch(e){console.log(e),this.productList=[],this.productFilteredOptions=[],this.isWait=!0}})}displayProductModel(t){return t||void 0}_filterProduct(t,e){const i=t.toLowerCase();return e.filter(t=>0===t.model.toLowerCase().indexOf(i))}beforeCheckHave(t,e){return Object(r.a)(this,void 0,void 0,function*(){const i=setInterval(()=>Object(r.a)(this,void 0,void 0,function*(){!0===this.isWait&&(yield this.checkAutoHave(t,e),clearInterval(i))}),300)})}checkAutoHave(t,e){return Object(r.a)(this,void 0,void 0,function*(){switch(e){case"brandList":const e=this.brandList.find(e=>e.name.toLowerCase()===t.toLowerCase());null!=e?(this.requestProduct.brandId=e.id,this.requestProduct.productCountyId=e.productCountyId,this.canProduct=!0):this.canProduct=!1;break;case"productNameList":this.productNameList.find(e=>e.name.toLowerCase()===t.toLowerCase()),this.canModel=!0;break;case"productModelList":this.productList=null!=this.productList?this.productList:[];const i=this.productList.find(e=>{const i=t.replace(/\s+/g," ");return e.model.toLowerCase()===i.toLowerCase()});null!=i?(this.requestProduct.productId=i.id,this.requestProduct.description=i.description):this.requestProduct.productId=0,this.canAddProduct=!0;break;case"customerNameList":this.customerList=null!=this.customerList?this.customerList:[];const o=this.customerList.find(e=>e.customer.toLowerCase()===t.toLowerCase());null!=o?(this.isCustomer=!0,this.requestCustomer.address=o.address,this.requestCustomer.email=o.email,this.requestCustomer.tel=o.tel,this.requestCustomer.customerId=o.id):this.isCustomer=!1}})}genRequestProductListTable(){return Object(r.a)(this,void 0,void 0,function*(){this.requestProductListTable=new s.k(this.requestProductList)})}genCalCostTable(){return Object(r.a)(this,void 0,void 0,function*(){this.calListTable=new s.k(this.calList)})}checkStuckData(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.stuck.check(this.requestCustomer);yield this.stuck.check(this.requestProduct),t&&(this.requestCustomer={id:0,name:"",email:"",tel:null,prNo:"",address:""},this.requestProductList=[],this.attachFileList=[],yield this.genRequestProductListTable(),this.canProduct=!1,this.canModel=!1,this.canAddProduct=!1,this.requestProduct={brand:"",brandId:null,name:"",productId:null,model:"",description:"",total:0})})}saveFile(t){return Object(r.a)(this,void 0,void 0,function*(){const e=yield this.api.uploadFileFetch(t,"request");return!(!e||!e.status||"success"!==e.status||(this.attachFileList.push(e),console.log(this.attachFileList),0))})}fileOver(t){}fileLeave(t){}uploadedFile(t){const e=t;console.log(e),e.forEach(t=>{t.fileEntry.isFile&&t.fileEntry.file(t=>Object(r.a)(this,void 0,void 0,function*(){(yield this.saveFile(t))||this.snackBar.openFromComponent(R.a,{data:{message:"\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",warning:!0},duration:3e3})}))})}removeFile(t){this.attachFileList.length>0&&(this.attachFileList=this.attachFileList.filter((e,i)=>e.id!==t)),console.log(this.attachFileList)}clickRadio(t,e,i){e===i&&setTimeout(()=>{this.requestProductList[t].selectedId=null},100)}downloadFile(t,e){return Object(r.a)(this,void 0,void 0,function*(){let i;i=yield this.api.download("/downloadfile?id="+t).toPromise(),yield this.downLoadNewFile(i,i.type,e)})}downLoadNewFile(t,e,i){return Object(r.a)(this,void 0,void 0,function*(){const o=new Blob([t],{type:e}),n=yield window.URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=i,document.body.appendChild(a),a.click(),document.body.removeChild(a)})}calCostList(){return Object(r.a)(this,void 0,void 0,function*(){const t=[];let e=null;this.requestProductList.forEach(e=>{if(null!=e.selectedId){const i=e.offered.find(t=>t.id===e.selectedId);t.push(i)}});let i=!1;for(let o=0;o<t.length;o++){if(o>0&&t[o].currency!==t[o-1].currency){i=!0;break}e=t[o].currency}i?this.snackBar.openFromComponent(R.a,{data:{message:"\u0e17\u0e48\u0e32\u0e19\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e2a\u0e01\u0e38\u0e25\u0e40\u0e07\u0e34\u0e19\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e43\u0e2b\u0e21\u0e48",warning:!0},duration:3e3}):yield this.getCalApi(t,e)})}getCalApi(t,e){return Object(r.a)(this,void 0,void 0,function*(){const i=[];console.log(t),0!==t.length?(t.forEach(t=>{i.push({importDuty:null,weight:t.weight||null,sumWeight:null,sumPrice:(t.price*t.total).toFixed(2),price:t.price.toFixed(2),brand:t.brand,brandId:t.brandId,currency:t.currency,id:t.id,local_charge:t.local_charge,minTotal:t.minTotal,model:t.model,productId:t.productId,productName:t.productName,remark:t.remark,requestId:t.requestId,sStatus:t.sStatus,sendDay:t.sendDay,supplierName:t.supplierName,supplierPrice:t.supplierPrice,supplierSendId:t.supplierSendId,total:t.total})}),this.getApiDialog.currency=e,this.getApiDialog.selectedDatas=i,console.log(e),console.log(this.getApiDialog),this.inputDialog.open(j,{data:this.getApiDialog}).afterClosed().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(t){const e={currency_name:t.currency,sale_profit:t.saleProfit,total_weight:t.totalWight};t.selectedDatas.forEach((t,i)=>{e["import_duty["+i+"]"]=t.importDuty,e["sum_price["+i+"]"]=t.sumPrice,e["sum_weight["+i+"]"]=t.sumWeight});let i="";for(const t in e)i+=t+"="+e[t]+"&";i=i.slice(0,-1),yield this.calCost(i,t)}}))):this.snackBar.openFromComponent(R.a,{data:{message:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e32\u0e04\u0e32\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e01\u0e48\u0e2d\u0e19",warning:!0},duration:3e3})})}calCost(t,e){return Object(r.a)(this,void 0,void 0,function*(){if(e.selectedDatas&&e.selectedDatas.length>0){const t=[];e.selectedDatas.forEach(e=>{t.push({id:e.productId,weight:e.weight})});const i=yield this.api.post("/update-product-weight",{param:t}).toPromise();console.log(i)}const i=yield this.api.calCost(t);if(console.log(i),e.selectedDatas.length>0&&i&&i.array_sale_profit.length>0&&e.selectedDatas.forEach((t,o)=>{e.selectedDatas[o].lineProfit=i.array_sale_profit[o],e.selectedDatas[o].lineItemProfit=i.array_sale_profit[o]/t.total}),i){const t={request_id:this.requestId,caled:i.sum_result,sale_profit:e.saleProfit,currency:e.currency,items:e.selectedDatas},o=yield this.api.post("/save-cal-cost",t).toPromise();o&&o.success?(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19",success:!0},duration:3e3}),yield this.getCalCost()):this.snackBar.openFromComponent(R.a,{data:{message:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e44\u0e14\u0e49",warning:!0},duration:3e3})}})}getCalCost(){return Object(r.a)(this,void 0,void 0,function*(){console.log("/get-cal-cost?id="+(this.requestId||0));const t=yield this.api.gets("/get-cal-cost?id="+(this.requestId||0)).toPromise();t&&t.success&&t.data&&t.data.length>0&&(this.calList=t.data,yield this.genCalCostTable())})}isArrays(t){return Array.isArray(t)}addComma(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):t}approveRemark(t,e,i){return Object(r.a)(this,void 0,void 0,function*(){console.log(t),console.log(e),console.log(i);const o={text:t,request_id:e,supplier_send_id:i};this.confirmDialog.open(p.a,{data:this.approveRemarkConfirmDialog}).afterClosed().subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){if(t){this.root.setBlockUI(!0);const t=yield this.api.post("/approve-remark",o).toPromise();t&&t.success?(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19",success:!0},duration:3e3}),yield this.getRequestById(),this.root.setBlockUI(!1)):(this.snackBar.openFromComponent(R.a,{data:{message:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e44\u0e14\u0e49",warning:!0},duration:3e3}),this.root.setBlockUI(!1))}}))})}ngOnDestroy(){return Object(r.a)(this,void 0,void 0,function*(){console.log("destroy"),this.unsub.errorMessage.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(f.Tb(h.b),f.Tb(h.b),f.Tb(u.a),f.Tb(b.a),f.Tb(z.b),f.Tb(a.b),f.Tb(a.a),f.Tb(m.a),f.Tb(J.a),f.Tb($.a),f.Tb(U.a),f.Tb(E.a),f.Tb(X.a))},t.\u0275cmp=f.Nb({type:t,selectors:[["app-open-request"]],viewQuery:function(t,e){if(1&t&&f.Tc(nt,1,d.a),2&t){let t;f.zc(t=f.ic())&&(e.paginator=t.first)}},decls:189,vars:48,consts:[["class","w3-row",4,"ngIf"],[1,"mat-elevation-z8"],[1,"w3-container"],["requestCustomerForm","ngForm"],[1,"row"],[1,"w3-third","w3-padding"],[1,"w3-block"],["matInput","","type","text","id","requestCustomerName","name","requestCustomerName","placeholder","\u0e0a\u0e37\u0e48\u0e2d","required","",3,"ngModel","matAutocomplete","ngModelChange","blur"],["requestCustomerName","ngModel"],[3,"displayWith"],["customerAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["style","color: blue;",4,"ngIf"],["matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","id","requestCustomerEmail","name","requestCustomerEmail","disabled","",3,"ngModel","ngModelChange"],["requestCustomerEmail","ngModel"],["matInput","","placeholder","\u0e42\u0e17\u0e23","id","requestCustomerTel","name","requestCustomerTel","required","","disabled","",3,"ngModel","ngModelChange"],["requestCustomerTel","ngModel"],["matInput","","placeholder"," PR No.","id","prno","name","prno",3,"ngModel","ngModelChange"],["prNo","ngModel"],[1,"w3-twothird","w3-padding"],["matInput","","placeholder","\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48","id","requestCustomerAddress","name","requestCustomerAddress","required","","disabled","",3,"ngModel","ngModelChange"],["requestCustomerAddress","ngModel"],[1,"w3-row"],[1,"w3-third"],[2,"color","#2189d3","margin-left","16px"],["dropZoneLabel","Drop files here or ","browseBtnClassName","w3-button w3-round-large brow-file-bt",3,"showBrowseBtn","onFileDrop","onFileOver","onFileLeave"],[2,"font-size","20px","padding-right","8px"],[3,"icon"],[1,"w3-row",2,"overflow-x","scroll"],[1,"files","w3-table-all",2,"margin-top","16px"],[1,"files"],[1,"files","w3-col","s6","m9","l9"],[1,"files","w3-col","s2","m1","l1"],[1,"files","w3-col","s2","m1","l1","w3-center"],["class","files",4,"ngFor","ngForOf"],["requestProductForm","ngForm"],[1,"w3-quarter","w3-padding"],["matInput","","type","text","id","requestProductBrand","name","requestProductBrand","placeholder","\u0e41\u0e1a\u0e23\u0e19\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32","required","",3,"ngModel","matAutocomplete","ngModelChange","focus"],["requestProductBrand","ngModel"],["brandAuto","matAutocomplete"],["matInput","","type","text","name","requestProductModel","placeholder","\u0e42\u0e21\u0e40\u0e14\u0e25","required","",3,"ngModel","matAutocomplete","disabled","ngModelChange","focus","blur"],["requestProductModel","ngModel"],["productAutoModel","matAutocomplete"],["matInput","","placeholder","\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32","name","requestProductDescription",1,"text-area",3,"ngModel","ngModelChange"],["requestProductDescription","ngModel"],["matInput","","autofocus","","placeholder","\u0e08\u0e33\u0e19\u0e27\u0e19","id","requestProductTotal","name","requestProductTotal",3,"ngModel","ngModelChange"],["requestProductTotal","ngModel"],["mat-raised-button","","color","warn"],["for","importProduct",1,"ng-tns-c2-0","mat-raised-button","mat-primary"],["type","file","id","importProduct",2,"display","none",3,"change"],[1,"w3-twothird","w3-padding","w3-cell","w3-cell-middle","w3-right-align"],["mat-fab","",3,"disabled","click"],[1,"mat-elevation-z8",3,"expanded"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","brand"],[4,"matHeaderCellDef"],["data-label","\u0e22\u0e35\u0e48\u0e2b\u0e49\u0e2d",3,"ngStyle",4,"matCellDef"],["matColumnDef","model"],["data-label","\u0e42\u0e21\u0e40\u0e14\u0e25",3,"ngStyle",4,"matCellDef"],["matColumnDef","total"],["data-label","\u0e08\u0e33\u0e19\u0e27\u0e19",3,"ngStyle",4,"matCellDef"],["matColumnDef","priceNumber"],["data-label","\u0e23\u0e32\u0e04\u0e32",3,"ngStyle",4,"matCellDef"],["matColumnDef","manage"],["class","set-header-center",4,"matHeaderCellDef"],["class","set-col-center","data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",4,"matCellDef"],["matColumnDef","expandedDetail"],[4,"matCellDef"],[4,"matHeaderRowDef"],["class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["class","example-detail-row example-element-detail",4,"matRowDef","matRowDefColumns"],["clsss","w3-half w3-padding"],["mat-raised-button","",1,"w3-left",3,"disabled","click"],["matColumnDef","no"],["data-label","\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48",4,"matCellDef"],["matColumnDef","created_at"],["data-label","\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",4,"matCellDef"],["matColumnDef","currency"],["data-label","Currency",4,"matCellDef"],["matColumnDef","sum_price"],["data-label","\u0e23\u0e32\u0e04\u0e32\u0e23\u0e27\u0e21(\u0e23\u0e32\u0e04\u0e32\u0e23\u0e27\u0e21 sale profit)",4,"matCellDef"],["matColumnDef","approved_at"],["data-label","\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34",4,"matCellDef"],["matColumnDef","status"],["data-label","\u0e2a\u0e16\u0e32\u0e19\u0e30",4,"matCellDef"],["matColumnDef","expandedDetailCal"],["mat-raised-button","",1,"w3-left",3,"click"],["mat-raised-button","","class","w3-right","color","accent","style","margin-right: 8px;",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"w3-right",2,"margin-right","8px",3,"disabled","click"],["mat-raised-button","",1,"w3-right",2,"margin-right","8px",3,"click"],[1,"w3-padding","mat-elevation-z8",3,"expanded"],["matNativeControl","",3,"ngModel","ngModelChange"],[3,"value"],[1,"w3-col","w3-padding"],[2,"color","blue"],[1,"w3-button",2,"background","none","height","21px","padding","0px !important",3,"click"],["data-label","\u0e22\u0e35\u0e48\u0e2b\u0e49\u0e2d",3,"ngStyle"],["data-label","\u0e42\u0e21\u0e40\u0e14\u0e25",3,"ngStyle"],["data-label","\u0e08\u0e33\u0e19\u0e27\u0e19",3,"ngStyle"],["data-label","\u0e23\u0e32\u0e04\u0e32",3,"ngStyle"],[1,"set-header-center"],["data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",1,"set-col-center"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-button","",3,"disabled","click"],["class","example-element-detail",4,"ngIf"],[1,"example-element-detail"],[1,"example-element-description"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"ngModel","disabled","ngModelChange"],["class","w3-row w3-padding",4,"ngFor","ngForOf"],[1,"w3-row","w3-padding"],[1,"example-radio-button","set-padding-bl",2,"display","inline-block",3,"value","disabled","click"],["style","color: red; display: inline;",4,"ngIf"],["style","display: inline; white-space: initial;",4,"ngIf"],[2,"color","red","display","inline"],[2,"display","inline","white-space","initial"],["style","color: #2189d3; font-size: 12px;",4,"ngIf"],["class","edit-remark",4,"ngIf"],["mat-button","","color","accent",3,"click"],[1,"edit-remark"],["matInput","","placeholder","remark",3,"ngModel","ngModelChange"],[2,"color","#2189d3","font-size","12px"],[1,"example-element-row",3,"click"],[1,"example-detail-row","example-element-detail"],["data-label","\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48"],["data-label","\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23"],["data-label","Currency"],["data-label","\u0e23\u0e32\u0e04\u0e32\u0e23\u0e27\u0e21(\u0e23\u0e32\u0e04\u0e32\u0e23\u0e27\u0e21 sale profit)"],["data-label","\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"],["data-label","\u0e2a\u0e16\u0e32\u0e19\u0e30"],[3,"ngStyle"]],template:function(t,e){if(1&t&&(f.Ub(0,"br"),f.Kc(1,ct,11,3,"div",0),f.Ub(2,"br"),f.Zb(3,"mat-card",1),f.Zb(4,"mat-card-header"),f.Mc(5," \u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e25\u0e39\u0e01\u0e04\u0e49\u0e32 "),f.Yb(),f.Zb(6,"div",2),f.Kc(7,rt,4,1,"div",0),f.Zb(8,"form",null,3),f.Zb(10,"div",4),f.Zb(11,"div",5),f.Zb(12,"mat-form-field",6),f.Zb(13,"input",7,8),f.hc("ngModelChange",function(t){return e.requestCustomer.name=t})("ngModelChange",function(t){return e.findCustomerServer(t),e.checkAutoHave(t,"customerNameList")})("blur",function(){return e.beforeCheckHave(e.requestCustomer.name,"customerNameList")}),f.Yb(),f.Zb(15,"mat-autocomplete",9,10),f.Kc(17,dt,2,2,"mat-option",11),f.Yb(),f.Kc(18,st,2,0,"mat-error",12),f.Kc(19,lt,2,0,"mat-hint",13),f.Yb(),f.Yb(),f.Zb(20,"div",5),f.Zb(21,"mat-form-field",6),f.Zb(22,"input",14,15),f.hc("ngModelChange",function(t){return e.requestCustomer.email=t}),f.Yb(),f.Kc(24,bt,2,1,"mat-error",12),f.Yb(),f.Yb(),f.Zb(25,"div",5),f.Zb(26,"mat-form-field",6),f.Zb(27,"input",16,17),f.hc("ngModelChange",function(t){return e.requestCustomer.tel=t}),f.Yb(),f.Kc(29,mt,2,0,"mat-error",12),f.Yb(),f.Yb(),f.Yb(),f.Zb(30,"div",4),f.Zb(31,"div",5),f.Zb(32,"mat-form-field",6),f.Zb(33,"input",18,19),f.hc("ngModelChange",function(t){return e.requestCustomer.prNo=t}),f.Yb(),f.Yb(),f.Yb(),f.Zb(35,"div",20),f.Zb(36,"mat-form-field",6),f.Zb(37,"input",21,22),f.hc("ngModelChange",function(t){return e.requestCustomer.address=t}),f.Yb(),f.Kc(39,pt,2,0,"mat-error",12),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Zb(40,"div",23),f.Zb(41,"div",24),f.Mc(42,"\xa0"),f.Yb(),f.Zb(43,"div",24),f.Zb(44,"label",25),f.Mc(45,"\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c"),f.Yb(),f.Zb(46,"ngx-file-drop",26),f.hc("onFileDrop",function(t){return e.uploadedFile(t)})("onFileOver",function(t){return e.fileOver(t)})("onFileLeave",function(t){return e.fileLeave(t)}),f.Zb(47,"span",27),f.Ub(48,"fa-icon",28),f.Yb(),f.Yb(),f.Yb(),f.Zb(49,"div",24),f.Mc(50,"\xa0"),f.Yb(),f.Yb(),f.Ub(51,"br"),f.Zb(52,"div",29),f.Zb(53,"table",30),f.Zb(54,"thead",31),f.Zb(55,"tr",31),f.Zb(56,"th",32),f.Mc(57,"File Name"),f.Yb(),f.Zb(58,"th",33),f.Mc(59,"File From"),f.Yb(),f.Zb(60,"th",34),f.Mc(61,"Download"),f.Yb(),f.Zb(62,"th",34),f.Mc(63,"Delete"),f.Yb(),f.Yb(),f.Yb(),f.Kc(64,ht,11,4,"tr",35),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Ub(65,"br"),f.Zb(66,"mat-card",1),f.Zb(67,"mat-card-header"),f.Mc(68," \u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),f.Yb(),f.Zb(69,"div",2),f.Zb(70,"form",null,36),f.Zb(72,"div",4),f.Zb(73,"div",37),f.Zb(74,"mat-form-field",6),f.Zb(75,"input",38,39),f.hc("ngModelChange",function(t){return e.requestProduct.brand=t})("focus",function(t){return e.autoBrand(t)})("ngModelChange",function(t){return e.autoBrand(t),e.checkAutoHave(t,"brandList")}),f.Yb(),f.Zb(77,"mat-autocomplete",9,40),f.Kc(79,ft,2,2,"mat-option",11),f.Yb(),f.Kc(80,gt,2,0,"mat-error",12),f.Kc(81,vt,2,0,"mat-hint",13),f.Yb(),f.Yb(),f.Zb(82,"div",37),f.Zb(83,"mat-form-field",6),f.Zb(84,"input",41,42),f.hc("ngModelChange",function(t){return e.requestProduct.model=t})("focus",function(t){return e.autoProductModel(t)})("ngModelChange",function(t){return e.autoProductModel(t),e.checkAutoHave(t,"productModelList")})("blur",function(){return e.beforeCheckHave(e.requestProduct.model,"productModelList")}),f.Yb(),f.Zb(86,"mat-autocomplete",9,43),f.Kc(88,Ct,2,2,"mat-option",11),f.Yb(),f.Kc(89,yt,2,0,"mat-error",12),f.Yb(),f.Yb(),f.Zb(90,"div",37),f.Zb(91,"mat-form-field",6),f.Zb(92,"textarea",44,45),f.hc("ngModelChange",function(t){return e.requestProduct.description=t}),f.Mc(94,"            "),f.Yb(),f.Yb(),f.Yb(),f.Zb(95,"div",37),f.Zb(96,"mat-form-field",6),f.Zb(97,"input",46,47),f.hc("ngModelChange",function(t){return e.requestProduct.total=t}),f.Yb(),f.Yb(),f.Kc(99,Mt,2,0,"mat-error",12),f.Yb(),f.Yb(),f.Zb(100,"div",4),f.Zb(101,"div",5),f.Zb(102,"button",48),f.Mc(103,"\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19"),f.Yb(),f.Mc(104," \xa0\xa0 "),f.Zb(105,"label",49),f.Mc(106,"\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),f.Yb(),f.Zb(107,"input",50),f.hc("change",function(t){return e.addProductFromExcel(t)}),f.Yb(),f.Mc(108," \xa0\xa0 "),f.Zb(109,"span"),f.Mc(110,"files"),f.Yb(),f.Yb(),f.Zb(111,"div",51),f.Zb(112,"button",52),f.hc("click",function(){return e.addProductList()}),f.Mc(113,"\u0e40\u0e1e\u0e34\u0e48\u0e21"),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Ub(114,"br"),f.Zb(115,"mat-expansion-panel",53),f.Zb(116,"mat-expansion-panel-header"),f.Zb(117,"mat-panel-title"),f.Mc(118," \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 "),f.Yb(),f.Ub(119,"mat-panel-description"),f.Yb(),f.Zb(120,"mat-table",54),f.Xb(121,55),f.Kc(122,Yt,2,0,"mat-header-cell",56),f.Kc(123,qt,2,4,"mat-cell",57),f.Wb(),f.Xb(124,58),f.Kc(125,wt,2,0,"mat-header-cell",56),f.Kc(126,Pt,2,4,"mat-cell",59),f.Wb(),f.Xb(127,60),f.Kc(128,It,2,0,"mat-header-cell",56),f.Kc(129,Lt,2,4,"mat-cell",61),f.Wb(),f.Xb(130,62),f.Kc(131,xt,2,0,"mat-header-cell",56),f.Kc(132,Ht,4,4,"mat-cell",63),f.Wb(),f.Xb(133,64),f.Kc(134,kt,2,0,"mat-header-cell",65),f.Kc(135,Dt,4,3,"mat-cell",66),f.Wb(),f.Xb(136,67),f.Kc(137,Ut,2,2,"mat-cell",68),f.Wb(),f.Kc(138,Et,1,0,"mat-header-row",69),f.Kc(139,Xt,1,2,"mat-row",70),f.Kc(140,zt,1,1,"mat-row",71),f.Yb(),f.Ub(141,"br"),f.Zb(142,"div",23),f.Zb(143,"div",72),f.Zb(144,"button",73),f.hc("click",function(){return e.calCostList()}),f.Mc(145," Cal cost "),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Ub(146,"br"),f.Zb(147,"mat-expansion-panel",53),f.Zb(148,"mat-expansion-panel-header"),f.Zb(149,"mat-panel-title"),f.Mc(150," \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 calculate "),f.Yb(),f.Ub(151,"mat-panel-description"),f.Yb(),f.Zb(152,"mat-table",54),f.Xb(153,74),f.Kc(154,Jt,2,0,"mat-header-cell",56),f.Kc(155,Qt,2,1,"mat-cell",75),f.Wb(),f.Xb(156,76),f.Kc(157,Gt,2,0,"mat-header-cell",56),f.Kc(158,Vt,3,3,"mat-cell",77),f.Wb(),f.Xb(159,78),f.Kc(160,te,2,0,"mat-header-cell",56),f.Kc(161,ee,2,1,"mat-cell",79),f.Wb(),f.Xb(162,80),f.Kc(163,ie,2,0,"mat-header-cell",56),f.Kc(164,oe,2,1,"mat-cell",81),f.Wb(),f.Xb(165,82),f.Kc(166,ne,2,0,"mat-header-cell",56),f.Kc(167,ae,2,1,"mat-cell",83),f.Wb(),f.Xb(168,84),f.Kc(169,ce,2,0,"mat-header-cell",56),f.Kc(170,re,3,4,"mat-cell",85),f.Wb(),f.Xb(171,86),f.Kc(172,ue,4,3,"mat-cell",68),f.Wb(),f.Kc(173,be,1,0,"mat-header-row",69),f.Kc(174,me,1,2,"mat-row",70),f.Kc(175,pe,1,1,"mat-row",71),f.Yb(),f.Yb(),f.Ub(176,"br"),f.Zb(177,"mat-card",1),f.Zb(178,"div",2),f.Zb(179,"div",23),f.Zb(180,"div",72),f.Zb(181,"button",87),f.hc("click",function(){return e.back()}),f.Mc(182," \u0e22\u0e49\u0e2d\u0e19\u0e01\u0e25\u0e31\u0e1a "),f.Yb(),f.Yb(),f.Zb(183,"div",72),f.Kc(184,he,2,1,"button",88),f.Zb(185,"button",89),f.hc("click",function(){return e.save()}),f.Mc(186," \u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01 "),f.Yb(),f.Zb(187,"button",90),f.hc("click",function(){return e.reset()}),f.Mc(188,"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&t){const t=f.Ac(9),i=f.Ac(14),o=f.Ac(16),n=f.Ac(23),a=f.Ac(28),c=f.Ac(38),r=f.Ac(76),d=f.Ac(78),s=f.Ac(85),l=f.Ac(87),u=f.Ac(98);f.Hb(1),f.tc("ngIf","admin"===e.userRole||"co-sales"===e.userRole||"lead-sales"===e.userRole),f.Hb(6),f.tc("ngIf",""!=e.po),f.Hb(6),f.tc("ngModel",e.requestCustomer.name)("matAutocomplete",o),f.Hb(2),f.tc("displayWith",e.displayCustomer),f.Hb(2),f.tc("ngForOf",e.customerFilteredOptions),f.Hb(1),f.tc("ngIf",i.invalid&&i.errors.required),f.Hb(1),f.tc("ngIf",!e.isCustomer&&!i.invalid&&(i.dirty||i.touched)),f.Hb(3),f.tc("ngModel",e.requestCustomer.email),f.Hb(2),f.tc("ngIf",n.invalid&&(n.dirty||n.touched)),f.Hb(3),f.tc("ngModel",e.requestCustomer.tel),f.Hb(2),f.tc("ngIf",a.invalid&&a.errors.required),f.Hb(4),f.tc("ngModel",e.requestCustomer.prNo),f.Hb(4),f.tc("ngModel",e.requestCustomer.address),f.Hb(2),f.tc("ngIf",c.invalid&&c.errors.required),f.Hb(7),f.tc("showBrowseBtn",!0),f.Hb(2),f.tc("icon",e.faPaperclip),f.Hb(16),f.tc("ngForOf",e.attachFileList),f.Hb(11),f.tc("ngModel",e.requestProduct.brand)("matAutocomplete",d),f.Hb(2),f.tc("displayWith",e.displayBrand),f.Hb(2),f.tc("ngForOf",e.brandFilteredOptions),f.Hb(1),f.tc("ngIf",r.invalid&&r.errors.required),f.Hb(1),f.tc("ngIf",!e.canProduct&&!r.invalid&&(r.dirty||r.touched)),f.Hb(3),f.tc("ngModel",e.requestProduct.model)("matAutocomplete",l)("disabled",!e.canProduct),f.Hb(2),f.tc("displayWith",e.displayProductModel),f.Hb(2),f.tc("ngForOf",e.productFilteredOptions),f.Hb(1),f.tc("ngIf",s.invalid&&s.errors.required),f.Hb(3),f.tc("ngModel",e.requestProduct.description),f.Hb(5),f.tc("ngModel",e.requestProduct.total),f.Hb(2),f.tc("ngIf",u.invalid&&u.errors.required),f.Hb(13),f.tc("disabled",!e.canAddProduct||0===e.requestProduct.total||0!==e.requestCustomer.id),f.Hb(3),f.tc("expanded",!0),f.Hb(5),f.tc("dataSource",e.requestProductListTable),f.Hb(18),f.tc("matHeaderRowDef",e.displayedColumns),f.Hb(1),f.tc("matRowDefColumns",e.displayedColumns),f.Hb(1),f.tc("matRowDefColumns",f.wc(46,fe)),f.Hb(7),f.tc("expanded",!0),f.Hb(5),f.tc("dataSource",e.calListTable),f.Hb(21),f.tc("matHeaderRowDef",e.calDisplayColumn),f.Hb(1),f.tc("matRowDefColumns",e.calDisplayColumn),f.Hb(1),f.tc("matRowDefColumns",f.wc(47,ge)),f.Hb(9),f.tc("ngIf",0!==e.requestCustomer.id),f.Hb(1),f.tc("disabled",t.invalid||0==e.requestProductList.length)}},directives:[n.m,Q.a,Q.b,o.x,o.o,o.p,v.c,C.b,o.c,G.c,o.u,o.n,o.q,G.a,n.l,V.a,tt.a,g.b,et.c,et.e,et.f,et.d,s.j,s.c,s.e,s.b,s.g,s.i,v.g,o.v,o.r,o.y,it.n,v.b,v.f,s.d,s.a,n.n,ot.b,ot.a,s.f,s.h],pipes:[n.e],styles:['table[_ngcontent-%COMP%]{width:100%}.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#f5f5f5}.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.mat-radio-button[_ngcontent-%COMP%]{display:block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-outer-circle[_ngcontent-%COMP%]{box-sizing:border-box;height:16px;left:0;position:absolute;top:0;transition:border-color .28s ease;width:16px;border-width:2px;border-style:solid;border-radius:50%}.set-padding-bl[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:8px}.mat-table__wrapper[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{min-width:auto!important;width:100%!important}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{width:100%}.mat-column-brand[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%]{flex:0 0 12%!important}.mat-column-model[_ngcontent-%COMP%]{flex:0 0 24%!important}.mat-column-total[_ngcontent-%COMP%]{flex:0 0 8%!important}.mat-column-priceStatus[_ngcontent-%COMP%]{flex:0 0 38%!important}.mat-column-manage[_ngcontent-%COMP%]{flex:0 0 18%!important}@media (min-device-width:768px) and (max-device-width:1024px),only screen and (max-width:760px){table.files[_ngcontent-%COMP%], tbody.files[_ngcontent-%COMP%], td.files[_ngcontent-%COMP%], th.files[_ngcontent-%COMP%], thead.files[_ngcontent-%COMP%], tr.files[_ngcontent-%COMP%]{display:block}thead.files[_ngcontent-%COMP%]   tr.files[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr.files[_ngcontent-%COMP%]{border:1px solid #ccc}tr.files[_ngcontent-%COMP%]:nth-of-type(odd){background:#eee}td.files[_ngcontent-%COMP%]{border:none;position:relative;padding-left:50%}td.files[_ngcontent-%COMP%]:before{position:absolute;top:6px;left:6px;padding-right:10px;white-space:nowrap}td.files[_ngcontent-%COMP%]:first-of-type:before{content:"File Name"}td.files[_ngcontent-%COMP%]:nth-of-type(2):before{content:"File From"}td.files[_ngcontent-%COMP%]:nth-of-type(3):before{content:"Download"}td.files[_ngcontent-%COMP%]:nth-of-type(4):before{content:"Delete"}}'],data:{animation:[Object(l.m)("detailExpand",[Object(l.j)("collapsed",Object(l.k)({height:"0px",minHeight:"0"})),Object(l.j)("expanded",Object(l.k)({height:"*"})),Object(l.l)("expanded <=> collapsed",Object(l.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();const Ye=[{path:"new",component:Me,canActivate:[c.a],data:{expectedRole:"admin,staff,sales,co-sales,lead-sales"}},{path:":id",component:Me,canActivate:[c.a],data:{expectedRole:"admin,staff,sales,co-sales,lead-sales"}}];let Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.Rb({type:t}),t.\u0275inj=f.Qb({imports:[[a.f.forChild(Ye)],a.f]}),t})();var qe=i("ADsi"),we=i("AKYE"),Pe=i("NFeN");let Ie=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.Rb({type:t}),t.\u0275inj=f.Qb({providers:[J.a],imports:[[n.c,o.i,Ze,qe.a,V.b,Pe.b,we.a]]}),t})()}}]);