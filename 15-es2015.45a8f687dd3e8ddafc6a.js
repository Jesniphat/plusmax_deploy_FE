(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Dojc:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var s=a("mrSG"),i=a("xzLf"),o=a("n3+I"),l=a("fXoL"),n=a("tyNb");let c=(()=>{class e{constructor(e,t,a){this.router=e,this.apiLogin=t,this.root=a}canActivate(e,t){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);try{const t=e.data.expectedRole.split(","),a=yield this.apiLogin.role();return t.indexOf(a)>=0?(yield this.root.setBlockUI(!1),!0):(yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1)}catch(t){return console.log(t),yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1}})}}return e.\u0275fac=function(t){return new(t||e)(l.dc(n.b),l.dc(i.a),l.dc(o.a))},e.\u0275prov=l.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qHTg:function(e,t,a){"use strict";a.r(t),a.d(t,"SalesGroupModule",function(){return E});var s=a("ofXK"),i=a("tyNb"),o=a("Dojc"),l=a("mrSG"),n=a("M9IT"),c=a("Dh3D"),r=a("+0xr"),d=a("PLN7"),b=a("n3+I"),u=a("wHSu"),h=a("fXoL"),m=a("bTqV"),p=a("kmnG"),f=a("qFsG"),g=a("6NWb");const v=["salesGroupPaginator"],S=["salesGroupSort"];function Y(e,t){1&e&&(h.Zb(0,"mat-header-cell",21),h.Mc(1," \u0e25\u0e33\u0e14\u0e31\u0e1a "),h.Yb())}function Z(e,t){if(1&e&&(h.Zb(0,"mat-cell",22),h.Mc(1),h.Yb()),2&e){const e=t.index,a=h.lc();h.Hb(1),h.Oc(" ",null!=a.salesGroupPage?a.salesGroupPage.pageIndex*a.salesGroupPage.pageSize+e+1:e+1," ")}}function L(e,t){1&e&&(h.Zb(0,"mat-header-cell",21),h.Mc(1," \u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e25\u0e38\u0e48\u0e21 "),h.Yb())}function w(e,t){if(1&e&&(h.Zb(0,"mat-cell",23),h.Mc(1),h.Yb()),2&e){const e=t.$implicit;h.Hb(1),h.Oc(" ",e.name," ")}}function M(e,t){1&e&&(h.Zb(0,"mat-header-cell",21),h.Mc(1," Sales Lead "),h.Yb())}function y(e,t){if(1&e&&(h.Zb(0,"mat-cell",24),h.Mc(1),h.Yb()),2&e){const e=t.$implicit;h.Hb(1),h.Oc(" ",e.leadSales," ")}}function O(e,t){1&e&&(h.Zb(0,"mat-header-cell",25),h.Mc(1," \u0e08\u0e31\u0e14\u0e01\u0e32\u0e23 "),h.Yb())}function H(e,t){if(1&e){const e=h.ac();h.Zb(0,"mat-cell",26),h.Zb(1,"button",27),h.hc("click",function(){h.Dc(e);const a=t.$implicit;return h.lc().editUser(a.id)}),h.Ub(2,"fa-icon",28),h.Yb(),h.Yb()}if(2&e){const e=h.lc();h.Hb(2),h.tc("icon",e.faPen)}}function k(e,t){1&e&&h.Ub(0,"mat-header-row")}function G(e,t){1&e&&h.Ub(0,"mat-row")}const I=function(){return["/sales-group/manage",0]},C=function(){return[5,10,25,100]};let D=(()=>{class e{constructor(e,t,a){this.router=e,this.api=t,this.root=a,this.faPen=u.j,this.displayedColumns=["no","name","leadSales","manage"],this.salesGroups=[]}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("Sales Groups"),yield this.root.setBlockUI(!0),yield this.getAllList(),yield this.genSalesGroupTable(this.salesGroups),yield this.root.setBlockUI(!1)})}getAllList(){return Object(l.a)(this,void 0,void 0,function*(){const e=yield this.api.gets("/get-sales-group").toPromise();e&&e.success&&(this.salesGroups=e.list)})}applyFilter(e){return Object(l.a)(this,void 0,void 0,function*(){this.salesGroupLists.filter=e.trim().toLowerCase(),this.salesGroupLists.paginator&&this.salesGroupLists.paginator.firstPage()})}genSalesGroupTable(e){return Object(l.a)(this,void 0,void 0,function*(){this.salesGroupLists=new r.k(e),this.salesGroupLists.sort=this.salesGroupSort,this.salesGroupLists.paginator=this.salesGroupPaginator})}editUser(e){return Object(l.a)(this,void 0,void 0,function*(){this.router.navigate(["/sales-group/manage",e])})}ngOnDestroy(){return Object(l.a)(this,void 0,void 0,function*(){})}}return e.\u0275fac=function(t){return new(t||e)(h.Tb(i.b),h.Tb(d.a),h.Tb(b.a))},e.\u0275cmp=h.Nb({type:e,selectors:[["app-sale-group-list"]],viewQuery:function(e,t){if(1&e&&(h.Tc(v,1,n.a),h.Tc(S,1,c.a)),2&e){let e;h.zc(e=h.ic())&&(t.salesGroupPaginator=e.first),h.zc(e=h.ic())&&(t.salesGroupSort=e.first)}},decls:28,vars:7,consts:[[1,"w3-container"],[1,"w3-row"],[1,"w3-col","w3-right",2,"width","50px"],["mat-fab","",3,"routerLink"],[1,"w3-rest",2,"padding-right","16px"],["matInput","","placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32",3,"keyup"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","no"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","\u0e25\u0e33\u0e14\u0e31\u0e1a",4,"matCellDef"],["matColumnDef","name"],["data-label","\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e25\u0e38\u0e48\u0e21",4,"matCellDef"],["matColumnDef","leadSales"],["data-label","Sales Lead",4,"matCellDef"],["matColumnDef","manage"],["class","set-header-center",4,"matHeaderCellDef"],["class","set-col-center","data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","page"],["mat-sort-header",""],["data-label","\u0e25\u0e33\u0e14\u0e31\u0e1a"],["data-label","\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e25\u0e38\u0e48\u0e21"],["data-label","Sales Lead"],[1,"set-header-center"],["data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",1,"set-col-center"],["mat-button","",3,"click"],[3,"icon"]],template:function(e,t){1&e&&(h.Zb(0,"div",0),h.Ub(1,"br"),h.Zb(2,"div",1),h.Zb(3,"div",2),h.Zb(4,"a",3),h.Mc(5,"\u0e40\u0e1e\u0e34\u0e48\u0e21"),h.Yb(),h.Yb(),h.Zb(6,"div",4),h.Zb(7,"mat-form-field"),h.Zb(8,"input",5),h.hc("keyup",function(e){return t.applyFilter(e.target.value)}),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Ub(9,"br"),h.Zb(10,"div",1),h.Zb(11,"div",6),h.Zb(12,"mat-table",7),h.Xb(13,8),h.Kc(14,Y,2,0,"mat-header-cell",9),h.Kc(15,Z,2,1,"mat-cell",10),h.Wb(),h.Xb(16,11),h.Kc(17,L,2,0,"mat-header-cell",9),h.Kc(18,w,2,1,"mat-cell",12),h.Wb(),h.Xb(19,13),h.Kc(20,M,2,0,"mat-header-cell",9),h.Kc(21,y,2,1,"mat-cell",14),h.Wb(),h.Xb(22,15),h.Kc(23,O,2,0,"mat-header-cell",16),h.Kc(24,H,3,1,"mat-cell",17),h.Wb(),h.Kc(25,k,1,0,"mat-header-row",18),h.Kc(26,G,1,0,"mat-row",19),h.Yb(),h.Zb(27,"mat-paginator",20),h.hc("page",function(e){return t.salesGroupPage=e}),h.Yb(),h.Yb(),h.Yb(),h.Yb()),2&e&&(h.Hb(4),h.tc("routerLink",h.wc(5,I)),h.Hb(8),h.tc("dataSource",t.salesGroupLists),h.Hb(13),h.tc("matHeaderRowDef",t.displayedColumns),h.Hb(1),h.tc("matRowDefColumns",t.displayedColumns),h.Hb(1),h.tc("pageSizeOptions",h.wc(6,C)))},directives:[m.a,i.e,p.c,f.b,r.j,c.a,r.c,r.e,r.b,r.g,r.i,n.a,r.d,c.b,r.a,m.b,g.a,r.f,r.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),e})();var U=a("Q+/z"),j=a("dNgK"),K=a("Wp6s"),x=a("3Pt+"),P=a("MutI"),T=a("d3UM"),F=a("FKr1");function B(e,t){1&e&&(h.Zb(0,"mat-error"),h.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e25\u0e38\u0e48\u0e21 "),h.Yb())}function N(e,t){if(1&e&&(h.Zb(0,"mat-list-option",21),h.Mc(1),h.Yb()),2&e){const e=t.$implicit;h.tc("value",e),h.Hb(1),h.Oc(" ",e.userName," ")}}function A(e,t){if(1&e&&(h.Zb(0,"mat-list-option",21),h.Mc(1),h.Yb()),2&e){const e=t.$implicit;h.tc("value",e),h.Hb(1),h.Oc(" ",e.userName," ")}}function z(e,t){if(1&e&&(h.Zb(0,"mat-option",21),h.Mc(1),h.Yb()),2&e){const e=t.$implicit;h.tc("value",e.userId),h.Hb(1),h.Nc(e.userName)}}function R(e,t){1&e&&(h.Zb(0,"mat-error"),h.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e2b\u0e19\u0e49\u0e32 sales "),h.Yb())}const q={name:""},X=[{path:"",component:D,canActivate:[o.a],data:{expectedRole:"admin"}},{path:"manage/:id",component:(()=>{class e{constructor(e,t,a,s){this.api=e,this.root=t,this.route=a,this.snackBar=s,this.groupSales=Object.assign({id:""},q),this.salesList=[],this.salesSelectedList=[],this.salesSelected=[],this.newSalesSelected=[],this.saleLead=null}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){this.groupSales.id=this.route.snapshot.paramMap.get("id"),yield this.root.setHeaderText("Group manage"),yield this.root.setBlockUI(!0),yield this.getSales(),yield this.root.setBlockUI(!1)})}getSales(){return Object(l.a)(this,void 0,void 0,function*(){const e=yield this.api.gets("/get-sales-list?id="+this.groupSales.id).toPromise();e&&e.success&&e.sales&&(this.salesList=e.sales,this.salesSelectedList=e.exits),"0"!==this.groupSales.id&&e.group&&(this.saleLead=e.group.lead_sales,this.groupSales.name=e.group.name)})}addSales(){return Object(l.a)(this,void 0,void 0,function*(){const e=[];this.salesSelected.forEach(t=>{e.push(t.userId),this.salesSelectedList.push(t)}),this.salesList=this.salesList.filter(t=>-1===e.indexOf(t.userId))})}removeSales(){return Object(l.a)(this,void 0,void 0,function*(){const e=[];this.newSalesSelected.forEach(t=>{t.userId===this.saleLead&&(this.saleLead=null),e.push(t.userId),this.salesList.push(t)}),this.salesSelectedList=this.salesSelectedList.filter(t=>-1===e.indexOf(t.userId))})}cancel(){return Object(l.a)(this,void 0,void 0,function*(){this.salesList=[],this.salesSelectedList=[],this.groupSales=Object.assign({id:""},q),this.saleLead=null,yield this.getSales()})}save(){return Object(l.a)(this,void 0,void 0,function*(){const e={id:this.groupSales.id,name:this.groupSales.name,saleLead:this.saleLead,saleLists:this.salesSelectedList};yield this.root.setBlockUI(!0);const t=yield this.api.post("/save-sales-group",e).toPromise();yield this.root.setBlockUI(!1),t&&t.success?(this.snackBar.openFromComponent(U.a,{data:{message:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3}),0!==this.groupSales.id&&"0"!==this.groupSales.id||(yield this.cancel())):this.snackBar.openFromComponent(U.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 ",warning:!0},duration:3e3})})}ngOnDestroy(){return Object(l.a)(this,void 0,void 0,function*(){yield this.cancel()})}}return e.\u0275fac=function(t){return new(t||e)(h.Tb(d.a),h.Tb(b.a),h.Tb(i.a),h.Tb(j.b))},e.\u0275cmp=h.Nb({type:e,selectors:[["app-sale-group-manage"]],decls:69,vars:12,consts:[[1,"mat-elevation-z8"],[2,"color","#49af3a"],[1,"w3-container"],["salesGroupForm","ngForm"],[1,"w3-row"],[1,"w3-col","w3-padding"],[1,"group-name","w3-block"],["matInput","","autofocus","","placeholder","\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e25\u0e38\u0e48\u0e21","id","group-name","name","groupName","required","",3,"ngModel","ngModelChange"],["groupName","ngModel"],[4,"ngIf"],[1,"w3-col","l12","m12","s12"],[3,"ngModel","ngModelChange"],["sales",""],[3,"value",4,"ngFor","ngForOf"],[1,"w3-padding","full-width"],["mat-raised-button","","color","accent",1,"w3-right",2,"margin-left","8px",3,"disabled","click"],["salesed",""],["salesLeadGroupForm","ngForm"],["name","salesLeadSelect","required","",3,"ngModel","ngModelChange"],["salesLeadSelect","ngModel"],["mat-raised-button","",1,"w3-left",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(h.Ub(0,"br"),h.Zb(1,"mat-card",0),h.Zb(2,"mat-card-header"),h.Zb(3,"b",1),h.Mc(4,"\u0e01\u0e25\u0e38\u0e48\u0e21 Sales"),h.Yb(),h.Yb(),h.Zb(5,"div",2),h.Zb(6,"form",null,3),h.Zb(8,"div",4),h.Zb(9,"div",5),h.Zb(10,"mat-form-field",6),h.Zb(11,"input",7,8),h.hc("ngModelChange",function(e){return t.groupSales.name=e}),h.Yb(),h.Kc(13,B,2,0,"mat-error",9),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Ub(14,"br"),h.Zb(15,"mat-card",0),h.Zb(16,"mat-card-header"),h.Zb(17,"b",1),h.Mc(18,"Sales \u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"),h.Yb(),h.Yb(),h.Zb(19,"div",2),h.Zb(20,"div",4),h.Zb(21,"div",10),h.Zb(22,"mat-selection-list",11,12),h.hc("ngModelChange",function(e){return t.salesSelected=e}),h.Kc(24,N,2,2,"mat-list-option",13),h.Yb(),h.Yb(),h.Yb(),h.Zb(25,"div",4),h.Zb(26,"div",14),h.Zb(27,"button",15),h.hc("click",function(){return t.addSales()}),h.Mc(28," \u0e40\u0e1e\u0e34\u0e48\u0e21 "),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Ub(29,"br"),h.Zb(30,"mat-card",0),h.Zb(31,"mat-card-header"),h.Zb(32,"b",1),h.Mc(33,"Sales \u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01"),h.Yb(),h.Yb(),h.Zb(34,"div",2),h.Zb(35,"div",4),h.Zb(36,"div",10),h.Zb(37,"mat-selection-list",11,16),h.hc("ngModelChange",function(e){return t.newSalesSelected=e}),h.Kc(39,A,2,2,"mat-list-option",13),h.Yb(),h.Yb(),h.Yb(),h.Zb(40,"div",4),h.Zb(41,"div",14),h.Zb(42,"button",15),h.hc("click",function(){return t.removeSales()}),h.Mc(43," \u0e25\u0e1a "),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Ub(44,"br"),h.Zb(45,"mat-card",0),h.Zb(46,"mat-card-header"),h.Zb(47,"b",1),h.Mc(48,"Lead Sales"),h.Yb(),h.Yb(),h.Zb(49,"div",2),h.Zb(50,"form",null,17),h.Zb(52,"div",4),h.Zb(53,"div",5),h.Zb(54,"mat-form-field",6),h.Zb(55,"mat-label"),h.Mc(56,"Select an lead sales"),h.Yb(),h.Zb(57,"mat-select",18,19),h.hc("ngModelChange",function(e){return t.saleLead=e}),h.Kc(59,z,2,2,"mat-option",13),h.Yb(),h.Kc(60,R,2,0,"mat-error",9),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.Ub(61,"br"),h.Zb(62,"mat-card",0),h.Zb(63,"div",4),h.Zb(64,"div",14),h.Zb(65,"button",20),h.hc("click",function(){return t.cancel()}),h.Mc(66,"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"),h.Yb(),h.Zb(67,"button",15),h.hc("click",function(){return t.save()}),h.Mc(68," \u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01 "),h.Yb(),h.Yb(),h.Yb(),h.Yb()),2&e){const e=h.Ac(7),a=h.Ac(12),s=h.Ac(51),i=h.Ac(58);h.Hb(11),h.tc("ngModel",t.groupSales.name),h.Hb(2),h.tc("ngIf",a.invalid&&a.errors.required),h.Hb(9),h.tc("ngModel",t.salesSelected),h.Hb(2),h.tc("ngForOf",t.salesList),h.Hb(3),h.tc("disabled",0==t.salesSelected.length),h.Hb(10),h.tc("ngModel",t.newSalesSelected),h.Hb(2),h.tc("ngForOf",t.salesSelectedList),h.Hb(3),h.tc("disabled",0==t.newSalesSelected.length),h.Hb(15),h.tc("ngModel",t.saleLead),h.Hb(2),h.tc("ngForOf",t.salesSelectedList),h.Hb(1),h.tc("ngIf",i.invalid&&i.errors.required),h.Hb(7),h.tc("disabled",0==t.salesSelectedList.length||s.invalid||e.invalid||null==t.saleLead)}},directives:[K.a,K.b,x.x,x.o,x.p,p.c,f.b,x.c,x.u,x.n,x.q,s.m,P.c,s.l,m.b,p.g,T.a,p.b,P.b,F.n],styles:[""]}),e})(),canActivate:[o.a],data:{expectedRole:"admin"}}];let W=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Rb({type:e}),e.\u0275inj=h.Qb({imports:[[i.f.forChild(X)],i.f]}),e})();var $=a("ADsi"),Q=a("AKYE");let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Rb({type:e}),e.\u0275inj=h.Qb({imports:[[s.c,W,x.i,$.a,Q.a]]}),e})()}}]);