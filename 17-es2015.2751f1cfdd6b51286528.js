(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Dojc:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var a=i("mrSG"),o=i("xzLf"),n=i("n3+I"),s=i("fXoL"),r=i("tyNb");let c=(()=>{class e{constructor(e,t,i){this.router=e,this.apiLogin=t,this.root=i}canActivate(e,t){return Object(a.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);try{const t=e.data.expectedRole.split(","),i=yield this.apiLogin.role();return t.indexOf(i)>=0?(yield this.root.setBlockUI(!1),!0):(yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1)}catch(t){return console.log(t),yield this.root.setBlockUI(!1),this.router.navigate(["/access-denied"]),!1}})}}return e.\u0275fac=function(t){return new(t||e)(s.dc(r.b),s.dc(o.a),s.dc(n.a))},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},sV9j:function(e,t,i){"use strict";i.r(t),i.d(t,"SettingModule",function(){return Ze});var a=i("3Pt+"),o=i("ofXK"),n=i("tyNb"),s=i("mrSG"),r=i("PLN7"),c=i("n3+I"),l=i("fXoL");let d=(()=>{class e{constructor(e,t,i){this.api=e,this.router=t,this.root=i}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0),yield this.checkSettingRoot()})}checkSettingRoot(){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.api.get("/role").toPromise();this.router.navigate("admin"===e?["/setting/list"]:["/setting/profile"])})}}return e.\u0275fac=function(t){return new(t||e)(l.Tb(r.a),l.Tb(n.b),l.Tb(c.a))},e.\u0275cmp=l.Nb({type:e,selectors:[["app-setting"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();var b=i("M9IT"),u=i("Dh3D"),m=i("+0xr"),h=i("wHSu"),f=i("Hlss"),p=i("Q+/z"),g=i("0IaG"),v=i("dNgK"),w=i("bTqV"),M=i("kmnG"),Y=i("qFsG"),Z=i("d3UM"),y=i("FKr1"),C=i("6NWb");function I(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," \u0e25\u0e33\u0e14\u0e31\u0e1a "),l.Yb())}function k(e,t){if(1&e&&(l.Zb(0,"mat-cell",30),l.Mc(1),l.Yb()),2&e){const e=t.index;l.Hb(1),l.Oc(" ",e+1," ")}}function H(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," Code "),l.Yb())}function D(e,t){if(1&e&&(l.Zb(0,"mat-cell",31),l.Mc(1),l.Yb()),2&e){const e=t.$implicit;l.Hb(1),l.Oc(" ",e.code," ")}}function _(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," \u0e0a\u0e37\u0e48\u0e2d - \u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25 "),l.Yb())}function O(e,t){if(1&e&&(l.Zb(0,"mat-cell",32),l.Mc(1),l.Yb()),2&e){const e=t.$implicit;l.Hb(1),l.Oc(" ",e.full_name," ")}}function U(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," Email "),l.Yb())}function x(e,t){if(1&e&&(l.Zb(0,"mat-cell",33),l.Mc(1),l.Yb()),2&e){const e=t.$implicit;l.Hb(1),l.Oc(" ",e.user_email," ")}}function P(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," \u0e42\u0e17\u0e23 "),l.Yb())}function K(e,t){if(1&e&&(l.Zb(0,"mat-cell",34),l.Mc(1),l.Yb()),2&e){const e=t.$implicit;l.Hb(1),l.Oc(" ",e.mobile," ")}}function j(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," \u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 "),l.Yb())}function B(e,t){if(1&e&&(l.Zb(0,"mat-cell",35),l.Mc(1),l.Yb()),2&e){const e=t.$implicit;l.Hb(1),l.Oc(" ",e.position," ")}}function S(e,t){1&e&&(l.Zb(0,"mat-header-cell",29),l.Mc(1," \u0e2a\u0e16\u0e32\u0e19\u0e30 "),l.Yb())}function T(e,t){if(1&e){const e=l.ac();l.Zb(0,"mat-cell",36),l.Zb(1,"mat-form-field",37),l.Zb(2,"mat-select",38),l.hc("selectionChange",function(i){l.Dc(e);const a=t.$implicit,o=t.index;return l.lc().changeStatus(i,a.user_id,o)}),l.Zb(3,"mat-option",39),l.Mc(4,"inactive"),l.Yb(),l.Zb(5,"mat-option",40),l.Mc(6,"active"),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){const e=t.index,i=l.lc();l.Hb(2),l.tc("value",i.user[e].status)}}function q(e,t){1&e&&(l.Zb(0,"mat-header-cell",41),l.Mc(1," \u0e08\u0e31\u0e14\u0e01\u0e32\u0e23 "),l.Yb())}function L(e,t){if(1&e){const e=l.ac();l.Zb(0,"mat-cell",42),l.Zb(1,"button",43),l.hc("click",function(){l.Dc(e);const i=t.$implicit;return l.lc().editUser(i.user_id)}),l.Ub(2,"fa-icon",44),l.Yb(),l.Yb()}if(2&e){const e=l.lc();l.Hb(2),l.tc("icon",e.faPen)}}function A(e,t){1&e&&l.Ub(0,"mat-header-row")}function F(e,t){1&e&&l.Ub(0,"mat-row")}const E=function(){return["/setting/user",0]},R=function(){return[5,10,25,100]};let z=(()=>{class e{constructor(e,t,i,a,o){this.router=e,this.api=t,this.root=i,this.confirmDialog=a,this.snackBar=o,this.faPen=h.j,this.displayedColumns=["no","code","full_name","user_email","mobile","position","status","manage"],this.user=[],this.changeStatusConfirmDialog={header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e01\u0e32\u0e23\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",body:"\u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e19\u0e35\u0e49\u0e08\u0e23\u0e34\u0e07\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",cancelButton:"\u0e44\u0e21\u0e48\u0e15\u0e01\u0e25\u0e07",confirmButton:"\u0e15\u0e01\u0e25\u0e07"}}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("User List"),this.user=yield this.getUser(),yield this.genDataTable(this.user),yield this.root.setBlockUI(!1)})}ngAfterViewChecked(){}genDataTable(e){return Object(s.a)(this,void 0,void 0,function*(){this.userLists=new m.k(e),this.userLists.sort=this.sort,this.userLists.paginator=this.paginator})}applyFilter(e){return Object(s.a)(this,void 0,void 0,function*(){this.userLists.filter=e.trim().toLowerCase(),this.userLists.paginator&&this.userLists.paginator.firstPage()})}getUser(){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.api.gets("/users").toPromise();return e.length>0?e:[]})}editUser(e){console.log(e),this.router.navigate(["/setting/user",e])}changeStatus(e,t,i){return Object(s.a)(this,void 0,void 0,function*(){this.user[i].status=e.value,this.confirmDialog.open(f.a,{data:this.changeStatusConfirmDialog}).afterClosed().subscribe(a=>Object(s.a)(this,void 0,void 0,function*(){a?yield this.updateStatus(t,e.value):this.user[i].status="1"===this.user[i].status?"0":"1"}))})}updateStatus(e,t){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const i=yield this.api.post("/set-user-status",{user_id:e,status:t}).toPromise();if(i&&i.messages)yield this.root.setBlockUI(!1),this.snackBar.openFromComponent(p.a,{data:{message:"This user "+t=="1"?"active":"inactive",success:!0},duration:3e3});else{const e="1"===t?"active user fail":"inactive user fail";yield this.root.setBlockUI(!1),this.snackBar.openFromComponent(p.a,{data:{message:e,warning:!0},duration:3e3})}})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(l.Tb(n.b),l.Tb(r.a),l.Tb(c.a),l.Tb(g.b),l.Tb(v.b))},e.\u0275cmp=l.Nb({type:e,selectors:[["app-setting-list"]],viewQuery:function(e,t){if(1&e&&(l.Tc(b.a,3),l.Tc(u.a,3)),2&e){let e;l.zc(e=l.ic())&&(t.paginator=e.first),l.zc(e=l.ic())&&(t.sort=e.first)}},decls:40,vars:7,consts:[[1,"w3-container"],[1,"w3-row"],[1,"w3-col","w3-right",2,"width","50px"],["mat-fab","",3,"routerLink"],[1,"w3-rest",2,"padding-right","16px"],["matInput","","placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32 User",3,"keyup"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","no"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","\u0e25\u0e33\u0e14\u0e31\u0e1a",4,"matCellDef"],["matColumnDef","code"],["data-label","Code",4,"matCellDef"],["matColumnDef","full_name"],["data-label","\u0e0a\u0e37\u0e48\u0e2d - \u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25",4,"matCellDef"],["matColumnDef","user_email"],["data-label","Email",4,"matCellDef"],["matColumnDef","mobile"],["data-label","\u0e42\u0e17\u0e23",4,"matCellDef"],["matColumnDef","position"],["data-label","\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07",4,"matCellDef"],["matColumnDef","status"],["data-label","\u0e2a\u0e16\u0e32\u0e19\u0e30",4,"matCellDef"],["matColumnDef","manage"],["class","set-header-center",4,"matHeaderCellDef"],["class","set-col-center","data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["data-label","\u0e25\u0e33\u0e14\u0e31\u0e1a"],["data-label","Code"],["data-label","\u0e0a\u0e37\u0e48\u0e2d - \u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25"],["data-label","Email"],["data-label","\u0e42\u0e17\u0e23"],["data-label","\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07"],["data-label","\u0e2a\u0e16\u0e32\u0e19\u0e30"],[2,"max-width","68px"],[3,"value","selectionChange"],["value","0"],["value","1"],[1,"set-header-center"],["data-label","\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23",1,"set-col-center"],["mat-button","",3,"click"],[3,"icon"]],template:function(e,t){1&e&&(l.Zb(0,"div",0),l.Ub(1,"br"),l.Zb(2,"div",1),l.Zb(3,"div",2),l.Zb(4,"a",3),l.Mc(5,"\u0e40\u0e1e\u0e34\u0e48\u0e21"),l.Yb(),l.Yb(),l.Zb(6,"div",4),l.Zb(7,"mat-form-field"),l.Zb(8,"input",5),l.hc("keyup",function(e){return t.applyFilter(e.target.value)}),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Ub(9,"br"),l.Zb(10,"div",1),l.Zb(11,"div",6),l.Zb(12,"mat-table",7),l.Xb(13,8),l.Kc(14,I,2,0,"mat-header-cell",9),l.Kc(15,k,2,1,"mat-cell",10),l.Wb(),l.Xb(16,11),l.Kc(17,H,2,0,"mat-header-cell",9),l.Kc(18,D,2,1,"mat-cell",12),l.Wb(),l.Xb(19,13),l.Kc(20,_,2,0,"mat-header-cell",9),l.Kc(21,O,2,1,"mat-cell",14),l.Wb(),l.Xb(22,15),l.Kc(23,U,2,0,"mat-header-cell",9),l.Kc(24,x,2,1,"mat-cell",16),l.Wb(),l.Xb(25,17),l.Kc(26,P,2,0,"mat-header-cell",9),l.Kc(27,K,2,1,"mat-cell",18),l.Wb(),l.Xb(28,19),l.Kc(29,j,2,0,"mat-header-cell",9),l.Kc(30,B,2,1,"mat-cell",20),l.Wb(),l.Xb(31,21),l.Kc(32,S,2,0,"mat-header-cell",9),l.Kc(33,T,7,1,"mat-cell",22),l.Wb(),l.Xb(34,23),l.Kc(35,q,2,0,"mat-header-cell",24),l.Kc(36,L,3,1,"mat-cell",25),l.Wb(),l.Kc(37,A,1,0,"mat-header-row",26),l.Kc(38,F,1,0,"mat-row",27),l.Yb(),l.Ub(39,"mat-paginator",28),l.Yb(),l.Yb(),l.Yb()),2&e&&(l.Hb(4),l.tc("routerLink",l.wc(5,E)),l.Hb(8),l.tc("dataSource",t.userLists),l.Hb(25),l.tc("matHeaderRowDef",t.displayedColumns),l.Hb(1),l.tc("matRowDefColumns",t.displayedColumns),l.Hb(1),l.tc("pageSizeOptions",l.wc(6,R)))},directives:[w.a,n.e,M.c,Y.b,m.j,u.a,m.c,m.e,m.b,m.g,m.i,b.a,m.d,u.b,m.a,Z.a,y.n,w.b,C.a,m.f,m.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),e})();var W=i("Dojc"),X=i("Wp6s"),N=i("bSwM"),$=i("NFeN"),G=i("QibW");function Q(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e0a\u0e37\u0e48\u0e2d "),l.Yb())}function V(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25 "),l.Yb())}function J(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21 Code "),l.Yb())}function ee(e,t){1&e&&(l.Zb(0,"span"),l.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07"),l.Yb())}function te(e,t){1&e&&(l.Zb(0,"span"),l.Mc(1,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c"),l.Yb())}function ie(e,t){if(1&e&&(l.Zb(0,"mat-error"),l.Kc(1,ee,2,0,"span",16),l.Kc(2,te,2,0,"span",16),l.Yb()),2&e){l.lc();const e=l.Ac(37);l.Hb(1),l.tc("ngIf",e.errors.email),l.Hb(1),l.tc("ngIf",e.errors.required)}}function ae(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c "),l.Yb())}function oe(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21 Line ID "),l.Yb())}function ne(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 "),l.Yb())}function se(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e16\u0e32\u0e19\u0e30 "),l.Yb())}function re(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",12),l.Zb(1,"mat-form-field",42),l.Zb(2,"mat-label"),l.Mc(3,"Status"),l.Yb(),l.Zb(4,"mat-select",43,44),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc(2).user.status=t}),l.Zb(6,"mat-option",45),l.Mc(7,"active"),l.Yb(),l.Zb(8,"mat-option",46),l.Mc(9,"inactive"),l.Yb(),l.Yb(),l.Kc(10,se,2,0,"mat-error",16),l.Yb(),l.Yb()}if(2&e){const e=l.Ac(5),t=l.lc(2);l.Hb(4),l.tc("ngModel",t.user.status),l.Hb(6),l.tc("ngIf",e.invalid&&e.errors.required)}}function ce(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",2),l.Zb(1,"div",12),l.Zb(2,"mat-form-field",38),l.Zb(3,"input",39,40),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc().user.position=t}),l.Yb(),l.Kc(5,ne,2,0,"mat-error",16),l.Yb(),l.Yb(),l.Kc(6,re,11,2,"div",41),l.Yb()}if(2&e){const e=l.Ac(4),t=l.lc();l.Hb(3),l.tc("ngModel",t.user.position),l.Hb(2),l.tc("ngIf",e.invalid&&e.errors.required),l.Hb(1),l.tc("ngIf","update"!==t.mode)}}const le=function(){return{standalone:!0}};function de(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",2),l.Zb(1,"div",34),l.Zb(2,"section",47),l.Zb(3,"mat-checkbox",48),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc().changePassword=t}),l.Mc(4,"\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19"),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){const e=l.lc();l.Hb(3),l.tc("ngModel",e.changePassword)("ngModelOptions",l.wc(2,le))}}function be(e,t){1&e&&(l.Zb(0,"mat-error"),l.Mc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19 "),l.Yb())}function ue(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",2),l.Zb(1,"mat-form-field",49),l.Zb(2,"input",50,51),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc().user.password=t}),l.Yb(),l.Zb(4,"mat-icon",52),l.hc("click",function(){l.Dc(e);const t=l.lc();return t.hide=!t.hide}),l.Ub(5,"fa-icon",53),l.Yb(),l.Kc(6,be,2,0,"mat-error",16),l.Yb(),l.Yb()}if(2&e){const e=l.Ac(3),t=l.lc();l.Hb(2),l.tc("placeholder","create"==t.mode?"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19":"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e40\u0e01\u0e48\u0e32")("ngModel",t.user.password)("type",t.hide?"password":"text")("required","create"==t.mode),l.Hb(3),l.tc("icon",t.hide?t.icon.faEye:t.icon.faEyeSlash),l.Hb(1),l.tc("ngIf","create"==t.mode&&e.invalid&&e.errors.required)}}function me(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",2),l.Zb(1,"div",54),l.Zb(2,"mat-form-field",49),l.Zb(3,"input",55,56),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc().user.new_password=t}),l.Yb(),l.Zb(5,"mat-icon",52),l.hc("click",function(){l.Dc(e);const t=l.lc();return t.hide=!t.hide}),l.Ub(6,"fa-icon",53),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){const e=l.lc();l.Hb(3),l.tc("ngModel",e.user.new_password)("type",e.hide?"password":"text"),l.Hb(3),l.tc("icon",e.hide?e.icon.faEye:e.icon.faEyeSlash)}}function he(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",2),l.Zb(1,"div",42),l.Zb(2,"mat-form-field",49),l.Zb(3,"input",57,56),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc().user.renew_password=t}),l.Yb(),l.Zb(5,"mat-icon",52),l.hc("click",function(){l.Dc(e);const t=l.lc();return t.hide=!t.hide}),l.Ub(6,"fa-icon",53),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){const e=l.lc();l.Hb(3),l.tc("ngModel",e.user.renew_password)("type",e.hide?"password":"text"),l.Hb(3),l.tc("icon",e.hide?e.icon.faEye:e.icon.faEyeSlash)}}function fe(e,t){if(1&e){const e=l.ac();l.Zb(0,"div",2),l.Zb(1,"div",58),l.Zb(2,"label",59),l.Mc(3,"\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19"),l.Yb(),l.Zb(4,"mat-radio-group",60),l.hc("ngModelChange",function(t){return l.Dc(e),l.lc().user.role=t}),l.Zb(5,"mat-radio-button",61),l.Mc(6,"Admin"),l.Yb(),l.Zb(7,"mat-radio-button",62),l.Mc(8,"Sales"),l.Yb(),l.Zb(9,"mat-radio-button",63),l.Mc(10,"Co Sales"),l.Yb(),l.Zb(11,"mat-radio-button",64),l.Mc(12,"Lead Sales"),l.Yb(),l.Zb(13,"mat-radio-button",65),l.Mc(14,"Staff"),l.Yb(),l.Zb(15,"mat-radio-button",66),l.Mc(16,"Quotation only"),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){const e=l.lc();l.Hb(4),l.tc("ngModel",e.user.role)}}const pe={avatar:"",title:"",first_name:"",last_name:"",email:"",code:"",mobile:"",line_id:"",status:"1",position:"",password:"",new_password:"",renew_password:"",role:"staff"};let ge=(()=>{class e{constructor(e,t,i,a,o,n){this.router=e,this.route=t,this.api=i,this.root=a,this.confirmDialog=o,this.snackBar=n,this.icon={faEye:h.f,faEyeSlash:h.g},this.userId="0",this.userPic="../../../../assets/images/photo-placeholder.jpeg",this.user=pe,this.hide=!0,this.changePassword=!1,this.errorMessage="",this.mode="create",this.unsub=this.root.apiError$.subscribe(e=>this.errorMessage=e)}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("Manage User"),this.route.params.subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){var t;this.userId=null!==(t=null==e?void 0:e.id)&&void 0!==t?t:0,this.userPic=""===this.user.avatar?this.userPic:this.user.avatar,this.mode="0"===this.userId||0===this.userId?"create":null==this.userId?"update":"edit","edit"===this.mode?(console.log("edit"),yield this.getUserById()):"update"===this.mode?(console.log("update"),yield this.getMyProfile()):(console.log("add"),yield this.reset())})),document.getElementById("first_name").focus()})}getUserById(){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const e=yield this.api.get("/get-user-byid?userId="+this.userId).toPromise();yield this.root.setBlockUI(!1),console.log(e),e&&(this.user=Object.assign(this.user,e),this.userPic=e.avatar)})}getMyProfile(){return Object(s.a)(this,void 0,void 0,function*(){console.log("Get my profile"),yield this.root.setBlockUI(!0);const e=yield this.api.get("/my-profile").toPromise();yield this.root.setBlockUI(!1),console.log(e),e&&(this.user=Object.assign(this.user,e),this.userPic=e.avatar)})}save(e){return Object(s.a)(this,void 0,void 0,function*(){"create"===this.mode?yield this.saveUser():yield this.updateUser()})}saveUser(){return Object(s.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!0);const e=yield this.api.post("/save-user",this.user).toPromise();yield this.root.setBlockUI(!1),e.user_id?(this.snackBar.openFromComponent(p.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3}),console.log(pe),yield this.reset(),this.user.avatar="",this.userPic="../../../../assets/images/photo-placeholder.jpeg"):this.snackBar.openFromComponent(p.a,{data:{message:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3})})}updateUser(){return Object(s.a)(this,void 0,void 0,function*(){if(this.changePassword){if(!(yield this.checkMatchPassword()))return void this.snackBar.openFromComponent(p.a,{data:{message:"\u0e23\u0e2b\u0e31\u0e2a\u0e17\u0e35\u0e48\u0e17\u0e48\u0e32\u0e19\u0e01\u0e23\u0e2d\u0e01\u0e44\u0e21\u0e48\u0e15\u0e23\u0e07\u0e01\u0e31\u0e19",warning:!0},duration:3e3})}else delete this.user.password,delete this.user.new_password,delete this.user.renew_password;yield this.root.setBlockUI(!0);const e=Object.assign(this.user,{change_password:this.changePassword}),t="edit"===this.mode?yield this.api.post("/update-user?userId="+this.userId,e).toPromise():yield this.api.post("/update-profile",e).toPromise();yield this.root.setBlockUI(!1),t?(this.snackBar.openFromComponent(p.a,{data:{message:"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3}),"edit"===this.mode?this.getUserById():"update"===this.mode&&this.getMyProfile()):(console.log(t),this.snackBar.openFromComponent(p.a,{data:{message:"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "+this.errorMessage,warning:!0},duration:3e3}))})}checkMatchPassword(){return Object(s.a)(this,void 0,void 0,function*(){return this.user.new_password===this.user.renew_password})}back(){window.history.back()}reset(){return Object(s.a)(this,void 0,void 0,function*(){this.user={avatar:"",title:"",first_name:"",last_name:"",email:"",mobile:"",line_id:"",status:"1",position:"",password:"",new_password:"",renew_password:"",role:"staff"},this.userPic="../../../../assets/images/photo-placeholder.jpeg"})}handleInputChange(e){return Object(s.a)(this,void 0,void 0,function*(){const t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0],i=new FileReader;t.type.match(/image-*/)?(yield i.readAsDataURL(t),i.onload=()=>{this.user.avatar=i.result,this.userPic=i.result}):alert("invalid format")})}ngOnDestroy(){return Object(s.a)(this,void 0,void 0,function*(){console.log("leave page"),yield this.reset(),this.unsub.unsubscribe()})}}return e.\u0275fac=function(t){return new(t||e)(l.Tb(n.b),l.Tb(n.a),l.Tb(r.a),l.Tb(c.a),l.Tb(g.b),l.Tb(v.b))},e.\u0275cmp=l.Nb({type:e,selectors:[["app-setting-user"]],decls:67,vars:20,consts:[[1,"mat-elevation-z8"],[1,"w3-container"],[1,"w3-row"],[1,"w3-col","w3-padding",2,"width","95px"],[1,"avatar",3,"src"],[1,"w3-rest","w3-padding",2,"margin-top","10px"],["type","file","name","file-3[]","id","file-3","accept","image/*","multiple","",1,"inputfile","inputfile-3",3,"change"],["for","file-3",2,"cursor","pointer","margin-left","7px"],["xmlns","http://www.w3.org/2000/svg","width","20","height","17","viewBox","0 0 20 17"],["d","M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"],[1,"user-form"],["userForm","ngForm"],[1,"w3-half","w3-padding"],[1,"first-name","w3-block"],["matInput","","autofocus","","placeholder","\u0e0a\u0e37\u0e48\u0e2d","id","first_name","name","first-name","required","",3,"ngModel","ngModelChange"],["first_name","ngModel"],[4,"ngIf"],[1,"last-name","w3-block"],["matInput","","placeholder","\u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25","id","last_name","name","last_name","required","",3,"ngModel","ngModelChange"],["last_name","ngModel"],[1,"code","w3-block"],["matInput","","type","text","placeholder","Code","id","code","name","code","required","",3,"ngModel","ngModelChange"],["code","ngModel"],[1,"email","w3-block"],["matInput","","type","email","placeholder","Email","id","email","name","email","required","","email","",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"mobile","w3-block"],["matInput","","type","tel","placeholder","\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c","id","mobile","name","mobile","required","",3,"ngModel","ngModelChange"],["mobile","ngModel"],[1,"line_id","w3-block"],["matInput","","placeholder","Line ID","id","line_id","name","line_id",3,"ngModel","ngModelChange"],["line_id","ngModel"],["class","w3-row",4,"ngIf"],[1,"w3-half","w3-cell","w3-cell-top"],[1,"w3-block","w3-padding"],["mat-raised-button","",1,"w3-left",3,"click"],["mat-raised-button","","color","accent",1,"w3-right",2,"margin-left","8px",3,"disabled","click"],["mat-raised-button","",1,"w3-right",2,"margin-right","8px",3,"click"],[1,"position","w3-block"],["matInput","","placeholder","\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07","id","position","name","position","required","",3,"ngModel","ngModelChange"],["position","ngModel"],["class","w3-half w3-padding",4,"ngIf"],[1,"w3-block"],["id","status","name","status","required","",3,"ngModel","ngModelChange"],["status","ngModel"],["value","1"],["value","0"],[1,"example-section"],[1,"example-margin",3,"ngModel","ngModelOptions","ngModelChange"],[1,"password","w3-block","w3-padding"],["matInput","","id","pasword","name","password",3,"placeholder","ngModel","type","required","ngModelChange"],["password","ngModel"],["matSuffix","",3,"click"],[3,"icon"],[1,"w3-blocks"],["matInput","","placeholder","\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e43\u0e2b\u0e21\u0e48","id","new-pasword","name","new-password",3,"ngModel","type","ngModelChange"],["new_password","ngModel"],["matInput","","placeholder","\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07","id","renew-pasword","name","renew-password",3,"ngModel","type","ngModelChange"],[1,"w3-block",2,"padding","8px 36px !important"],["id","role-radio-group-label"],["aria-labelledby","role-radio-group-label","id","role","name","role","required","",1,"role-group",3,"ngModel","ngModelChange"],["value","admin",1,"role-button","w3-padding"],["value","sales",1,"role-button","w3-padding"],["value","co-sales",1,"role-button","w3-padding"],["value","lead-sales",1,"role-button","w3-padding"],["value","staff",1,"role-button","w3-padding"],["value","qt-only",1,"role-button","w3-padding"]],template:function(e,t){if(1&e){const e=l.ac();l.Ub(0,"br"),l.Zb(1,"mat-card",0),l.Zb(2,"mat-card-header"),l.Mc(3," \u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e23\u0e30\u0e1a\u0e1a "),l.Yb(),l.Zb(4,"div",1),l.Zb(5,"div",2),l.Zb(6,"div",3),l.Ub(7,"img",4),l.Yb(),l.Zb(8,"div",5),l.Zb(9,"input",6),l.hc("change",function(e){return t.handleInputChange(e)}),l.Yb(),l.Zb(10,"label",7),l.kc(),l.Zb(11,"svg",8),l.Ub(12,"path",9),l.Yb(),l.jc(),l.Zb(13,"span"),l.Mc(14,"Choose a file\u2026"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Zb(15,"form",10,11),l.Zb(17,"div",2),l.Zb(18,"div",12),l.Zb(19,"mat-form-field",13),l.Zb(20,"input",14,15),l.hc("ngModelChange",function(e){return t.user.first_name=e}),l.Yb(),l.Kc(22,Q,2,0,"mat-error",16),l.Yb(),l.Yb(),l.Zb(23,"div",12),l.Zb(24,"mat-form-field",17),l.Zb(25,"input",18,19),l.hc("ngModelChange",function(e){return t.user.last_name=e}),l.Yb(),l.Kc(27,V,2,0,"mat-error",16),l.Yb(),l.Yb(),l.Yb(),l.Zb(28,"div",2),l.Zb(29,"div",12),l.Zb(30,"mat-form-field",20),l.Zb(31,"input",21,22),l.hc("ngModelChange",function(e){return t.user.code=e}),l.Yb(),l.Kc(33,J,2,0,"mat-error",16),l.Yb(),l.Yb(),l.Zb(34,"div",12),l.Zb(35,"mat-form-field",23),l.Zb(36,"input",24,25),l.hc("ngModelChange",function(e){return t.user.email=e}),l.Yb(),l.Kc(38,ie,3,2,"mat-error",16),l.Yb(),l.Yb(),l.Yb(),l.Zb(39,"div",2),l.Zb(40,"div",12),l.Zb(41,"mat-form-field",26),l.Zb(42,"input",27,28),l.hc("ngModelChange",function(e){return t.user.mobile=e}),l.Yb(),l.Kc(44,ae,2,0,"mat-error",16),l.Yb(),l.Yb(),l.Zb(45,"div",12),l.Zb(46,"mat-form-field",29),l.Zb(47,"input",30,31),l.hc("ngModelChange",function(e){return t.user.line_id=e}),l.Yb(),l.Kc(49,oe,2,0,"mat-error",16),l.Yb(),l.Yb(),l.Yb(),l.Kc(50,ce,7,3,"div",32),l.Zb(51,"div",2),l.Zb(52,"div",33),l.Kc(53,de,5,3,"div",32),l.Kc(54,ue,7,6,"div",32),l.Kc(55,me,7,3,"div",32),l.Kc(56,he,7,3,"div",32),l.Yb(),l.Zb(57,"div",33),l.Kc(58,fe,17,1,"div",32),l.Yb(),l.Yb(),l.Zb(59,"div",2),l.Zb(60,"div",34),l.Zb(61,"button",35),l.hc("click",function(){return t.back()}),l.Mc(62,"\u0e22\u0e49\u0e2d\u0e19\u0e01\u0e25\u0e31\u0e1a"),l.Yb(),l.Zb(63,"button",36),l.hc("click",function(){l.Dc(e);const i=l.Ac(16);return t.save(i)}),l.Mc(64,"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"),l.Yb(),l.Zb(65,"button",37),l.hc("click",function(){return t.reset()}),l.Mc(66,"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){const e=l.Ac(16),i=l.Ac(21),a=l.Ac(26),o=l.Ac(32),n=l.Ac(37),s=l.Ac(43),r=l.Ac(48);l.Hb(7),l.tc("src",t.userPic,l.Fc),l.Hb(13),l.tc("ngModel",t.user.first_name),l.Hb(2),l.tc("ngIf",i.invalid&&i.errors.required),l.Hb(3),l.tc("ngModel",t.user.last_name),l.Hb(2),l.tc("ngIf",a.invalid&&a.errors.required),l.Hb(4),l.tc("ngModel",t.user.code),l.Hb(2),l.tc("ngIf",o.invalid&&o.errors.required),l.Hb(3),l.tc("ngModel",t.user.email),l.Hb(2),l.tc("ngIf",n.invalid&&(n.dirty||n.touched)),l.Hb(4),l.tc("ngModel",t.user.mobile),l.Hb(2),l.tc("ngIf",s.invalid&&s.errors.required),l.Hb(3),l.tc("ngModel",t.user.line_id),l.Hb(2),l.tc("ngIf",r.invalid&&r.errors.required),l.Hb(1),l.tc("ngIf","update"!==t.mode),l.Hb(3),l.tc("ngIf","edit"==t.mode||"update"==t.mode),l.Hb(1),l.tc("ngIf","create"==t.mode||"update"==t.mode&&t.changePassword),l.Hb(1),l.tc("ngIf",("edit"==t.mode||"update"==t.mode)&&t.changePassword),l.Hb(1),l.tc("ngIf",("edit"==t.mode||"update"==t.mode)&&t.changePassword),l.Hb(2),l.tc("ngIf","update"!==t.mode),l.Hb(5),l.tc("disabled",e.invalid)}},directives:[X.a,X.b,a.x,a.o,a.p,M.c,Y.b,a.c,a.u,a.n,a.q,o.m,a.d,w.b,M.b,M.g,Z.a,y.n,N.a,$.a,M.h,C.a,G.b,G.a],styles:[".avatar[_ngcontent-%COMP%]{width:95px!important;height:95px!important;border-radius:60px}#file-3[_ngcontent-%COMP%]{display:inherit;visibility:hidden}.role-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();const ve=[{path:"",component:d},{path:"list",component:z,canActivate:[W.a],data:{expectedRole:"admin"}},{path:"user/:id",component:ge,canActivate:[W.a],data:{expectedRole:"admin"}},{path:"profile",component:ge}];let we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Rb({type:e}),e.\u0275inj=l.Qb({imports:[[n.f.forChild(ve)],n.f]}),e})();var Me=i("ADsi"),Ye=i("AKYE");let Ze=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Rb({type:e}),e.\u0275inj=l.Qb({imports:[[o.c,a.i,we,Me.a,Ye.a]]}),e})()}}]);