(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{gfTr:function(e,t,i){"use strict";i.d(t,"a",function(){return g}),i.d(t,"b",function(){return v});var n=i("fXoL"),s=i("PqYM"),o=i("ofXK");const r=["fileSelector"];function l(e,t){if(1&e&&(n.Zb(0,"div",8),n.Mc(1),n.Yb()),2&e){const e=n.lc(2);n.Hb(1),n.Nc(e.dropZoneLabel)}}function a(e,t){if(1&e){const e=n.ac();n.Zb(0,"div"),n.Zb(1,"input",9),n.hc("click",function(t){return n.Dc(e),n.lc(2).openFileSelector(t)}),n.Yb(),n.Yb()}if(2&e){const e=n.lc(2);n.Hb(1),n.uc("value",e.browseBtnLabel),n.tc("className",e.browseBtnClassName)}}function c(e,t){if(1&e&&(n.Kc(0,l,2,1,"div",6),n.Kc(1,a,2,2,"div",7)),2&e){const e=n.lc();n.tc("ngIf",e.dropZoneLabel),n.Hb(1),n.tc("ngIf",e.showBrowseBtn)}}function d(e,t){}const b=function(e){return{openFileSelector:e}};class u{constructor(e,t){this.relativePath=e,this.fileEntry=t}}var m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let h=(()=>{let e=class{constructor(e){this.template=e}};return e.\u0275fac=function(t){return new(t||e)(n.Tb(n.R))},e.\u0275dir=n.Ob({type:e,selectors:[["","ngx-file-drop-content-tmp",""]]}),e=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r}([m("design:paramtypes",[n.R])],e),e})();var p=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let g=(()=>{let e=class{constructor(e,t){this.zone=e,this.renderer=t,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new n.q,this.onFileOver=new n.q,this.onFileLeave=new n.q,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=e=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",e=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",e=>{this.globalDraggingInProgress=!1})}get disabled(){return this._disabled}set disabled(e){this._disabled=null!=e&&""+e!="false"}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(e){this.useDragEnter?this.preventAndStop(e):this.isDropzoneDisabled()||this.useDragEnter||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragEnter(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragLeave(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}dropFiles(e){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)){let t;e.dataTransfer.dropEffect="copy",t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}}uploadFiles(e){!this.isDropzoneDisabled()&&e.target&&(this.checkFiles(e.target.files||[]),this.resetFileInput())}checkFiles(e){for(let t=0;t<e.length;t++){const i=e[t];let n=null;if(this.canGetAsEntry(i)&&(n=i.webkitGetAsEntry()),n)if(n.isFile){const e=new u(n.name,n);this.addToQueue(e)}else n.isDirectory&&this.traverseFileTree(n,n.name);else if(i){const e={name:i.name,isDirectory:!1,isFile:!0,file:e=>{e(i)}},t=new u(e.name,e);this.addToQueue(t)}}this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(s.a)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const e=this.files;this.files=[],this.onFileDrop.emit(e)}})}traverseFileTree(e,t){if(e.isFile){const i=new u(t,e);this.files.push(i)}else{t+="/";const i=e.createReader();let n=[];const s=()=>{this.numOfActiveReadEntries++,i.readEntries(i=>{if(i.length)n=n.concat(i),s();else if(0===n.length){const i=new u(t,e);this.zone.run(()=>{this.addToQueue(i)})}else for(let e=0;e<n.length;e++)this.zone.run(()=>{this.traverseFileTree(n[e],t+n[e].name)});this.numOfActiveReadEntries--})};s()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const e=this.fileSelector.nativeElement,t=e.parentElement,i=this.getHelperFormElement(),n=this.getFileInputPlaceholderElement();t!==i&&(this.renderer.insertBefore(t,n,e),this.renderer.appendChild(i,e),i.reset(),this.renderer.insertBefore(t,e,n),this.renderer.removeChild(t,n))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}canGetAsEntry(e){return!!e.webkitGetAsEntry}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(e){this.files.push(e)}preventAndStop(e){e.stopPropagation(),e.preventDefault()}};return e.\u0275fac=function(t){return new(t||e)(n.Tb(n.E),n.Tb(n.K))},e.\u0275cmp=n.Nb({type:e,selectors:[["ngx-file-drop"]],contentQueries:function(e,t,i){if(1&e&&n.Mb(i,h,1,n.R),2&e){let e;n.zc(e=n.ic())&&(t.contentTemplate=e.first)}},viewQuery:function(e,t){if(1&e&&n.Tc(r,3),2&e){let e;n.zc(e=n.ic())&&(t.fileSelector=e.first)}},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[[3,"className","drop","dragover","dragenter","dragleave"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"className","value","click"]],template:function(e,t){if(1&e&&(n.Zb(0,"div",0),n.hc("drop",function(e){return t.dropFiles(e)})("dragover",function(e){return t.onDragOver(e)})("dragenter",function(e){return t.onDragEnter(e)})("dragleave",function(e){return t.onDragLeave(e)}),n.Zb(1,"div",1),n.Zb(2,"input",2,3),n.hc("change",function(e){return t.uploadFiles(e)}),n.Yb(),n.Kc(4,c,2,2,"ng-template",null,4,n.Lc),n.Kc(6,d,0,0,"ng-template",5),n.Yb(),n.Yb()),2&e){const e=n.Ac(5);n.Lb("ngx-file-drop__drop-zone--over",t.isDraggingOverDropZone),n.tc("className",t.dropZoneClassName),n.Hb(1),n.tc("className",t.contentClassName),n.Hb(1),n.tc("accept",t.accept)("multiple",t.multiple),n.Ib("directory",t.directory||void 0)("webkitdirectory",t.directory||void 0)("mozdirectory",t.directory||void 0)("msdirectory",t.directory||void 0)("odirectory",t.directory||void 0),n.Hb(4),n.tc("ngTemplateOutlet",t.contentTemplate||e)("ngTemplateOutletContext",n.xc(13,b,t.openFileSelector))}},directives:[o.r,o.m],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{height:100px;margin:auto;border:2px dotted #0782d0;border-radius:30px}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:rgba(147,147,147,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100px;color:#0782d0}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),p([Object(n.w)(),f("design:type",String)],e.prototype,"accept",void 0),p([Object(n.w)(),f("design:type",Boolean)],e.prototype,"directory",void 0),p([Object(n.w)(),f("design:type",Boolean)],e.prototype,"multiple",void 0),p([Object(n.w)(),f("design:type",String)],e.prototype,"dropZoneLabel",void 0),p([Object(n.w)(),f("design:type",String)],e.prototype,"dropZoneClassName",void 0),p([Object(n.w)(),f("design:type",Boolean)],e.prototype,"useDragEnter",void 0),p([Object(n.w)(),f("design:type",String)],e.prototype,"contentClassName",void 0),p([Object(n.w)(),f("design:type",Boolean),f("design:paramtypes",[Boolean])],e.prototype,"disabled",null),p([Object(n.w)(),f("design:type",Boolean)],e.prototype,"showBrowseBtn",void 0),p([Object(n.w)(),f("design:type",String)],e.prototype,"browseBtnClassName",void 0),p([Object(n.w)(),f("design:type",String)],e.prototype,"browseBtnLabel",void 0),p([Object(n.G)(),f("design:type",n.q)],e.prototype,"onFileDrop",void 0),p([Object(n.G)(),f("design:type",n.q)],e.prototype,"onFileOver",void 0),p([Object(n.G)(),f("design:type",n.q)],e.prototype,"onFileLeave",void 0),p([Object(n.l)(h,{read:n.R}),f("design:type",n.R)],e.prototype,"contentTemplate",void 0),p([Object(n.V)("fileSelector",{static:!0}),f("design:type",n.n)],e.prototype,"fileSelector",void 0),e=p([f("design:paramtypes",[n.E,n.K])],e),e})(),v=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Rb({type:e,bootstrap:function(){return[g]}}),e.\u0275inj=n.Qb({providers:[],imports:[[o.c]]}),e})()},pjD5:function(e,t,i){"use strict";i.r(t),i.d(t,"SubmitRequestModule",function(){return J});var n=i("3Pt+"),s=i("ofXK"),o=i("ADsi"),r=i("AKYE"),l=i("tyNb"),a=i("mrSG"),c=i("+0xr"),d=i("n3+I"),b=i("PLN7"),u=i("Q+/z"),m=i("AytR"),h=i("wHSu"),p=i("BF3V"),f=i("fXoL"),g=i("dNgK"),v=i("Wp6s"),y=i("Dh3D"),D=i("kmnG"),w=i("qFsG"),L=i("gfTr"),Z=i("6NWb"),F=i("bTqV"),M=i("/1cH"),O=i("FKr1"),Y=i("7FpO");function C(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Brand "),f.Yb())}function E(e,t){if(1&e&&(f.Zb(0,"mat-cell",39),f.Mc(1),f.Yb()),2&e){const e=t.$implicit;f.Hb(1),f.Oc(" ",e.brand," ")}}function T(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Model "),f.Yb())}function S(e,t){if(1&e&&(f.Zb(0,"mat-cell",40),f.Mc(1),f.Yb()),2&e){const e=t.$implicit;f.Hb(1),f.Oc(" ",e.model," ")}}function _(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Total "),f.Yb())}function B(e,t){if(1&e&&(f.Zb(0,"mat-cell",41),f.Mc(1),f.Yb()),2&e){const e=t.$implicit;f.Hb(1),f.Oc(" ",e.total," ")}}function x(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Change Model "),f.Yb())}function H(e,t){if(1&e&&(f.Zb(0,"mat-option",47),f.Mc(1),f.Yb()),2&e){const e=t.$implicit;f.tc("value",e.model),f.Hb(1),f.Oc(" ",e.model," ")}}function k(e,t){if(1&e){const e=f.ac();f.Zb(0,"mat-cell",42),f.Zb(1,"mat-form-field",24),f.Zb(2,"input",43,44),f.hc("ngModelChange",function(i){f.Dc(e);const n=t.index;return f.lc().submitLists[n].changed_model=i})("ngModelChange",function(i){f.Dc(e);const n=t.$implicit;return f.lc().findProduct(n.brandId,i)})("blur",function(){f.Dc(e);const i=t.$implicit,n=t.index,s=f.lc();return s.setIdByModelName(i.brandId,s.submitLists[n].changed_model,n,i.product_county)}),f.Yb(),f.Zb(4,"mat-autocomplete",null,45),f.Kc(6,H,2,2,"mat-option",46),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=t.index,i=f.Ac(5),n=f.lc();f.Hb(2),f.vc("id","changeModel",n.submitLists[e].id,""),f.vc("name","changeModel",n.submitLists[e].id,""),f.tc("ngModel",n.submitLists[e].changed_model)("matAutocomplete",i),f.Hb(4),f.tc("ngForOf",n.filteredProduct)}}function I(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Price "),f.Yb())}function N(e,t){if(1&e){const e=f.ac();f.Zb(0,"mat-cell"),f.Zb(1,"mat-form-field",24),f.Zb(2,"input",48,49),f.hc("ngModelChange",function(i){f.Dc(e);const n=t.index;return f.lc().submitLists[n].price=i}),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=t.index,i=f.lc();f.Hb(2),f.vc("id","price",i.submitLists[e].id,""),f.vc("name","price",i.submitLists[e].id,""),f.tc("ngModel",i.submitLists[e].price)("disabled","selected"==i.submitLists[e].sStatus)}}function P(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Currency "),f.Yb())}function j(e,t){if(1&e){const e=f.ac();f.Zb(0,"mat-cell"),f.Zb(1,"mat-form-field",24),f.Zb(2,"input",50,51),f.hc("ngModelChange",function(i){f.Dc(e);const n=t.index;return f.lc().submitLists[n].currency=i}),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=t.index,i=f.lc();f.Hb(2),f.vc("id","currency",i.submitLists[e].id,""),f.vc("name","currency",i.submitLists[e].id,""),f.tc("ngModel",i.submitLists[e].currency)("disabled",!0)}}function K(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Min Total "),f.Yb())}function R(e,t){if(1&e){const e=f.ac();f.Zb(0,"mat-cell"),f.Zb(1,"mat-form-field",24),f.Zb(2,"input",52,53),f.hc("ngModelChange",function(i){f.Dc(e);const n=t.index;return f.lc().submitLists[n].minTotal=i}),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=t.index,i=f.lc();f.Hb(2),f.vc("id","minTotal",i.submitLists[e].id,""),f.vc("name","minTotal",i.submitLists[e].id,""),f.tc("ngModel",i.submitLists[e].minTotal)("disabled","selected"==i.submitLists[e].sStatus)}}function A(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Local charge "),f.Yb())}function q(e,t){if(1&e){const e=f.ac();f.Zb(0,"mat-cell"),f.Zb(1,"mat-form-field",24),f.Zb(2,"input",54,55),f.hc("ngModelChange",function(i){f.Dc(e);const n=t.index;return f.lc().submitLists[n].local_charge=i}),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=t.index,i=f.lc();f.Hb(2),f.vc("id","local_charge",i.submitLists[e].id,""),f.vc("name","local_charge",i.submitLists[e].id,""),f.tc("ngModel",i.submitLists[e].local_charge)("disabled","selected"==i.submitLists[e].sStatus)}}function z(e,t){1&e&&(f.Zb(0,"mat-header-cell"),f.Mc(1," Send Days "),f.Yb())}function U(e,t){if(1&e){const e=f.ac();f.Zb(0,"mat-cell"),f.Zb(1,"mat-form-field",24),f.Zb(2,"input",56,57),f.hc("ngModelChange",function(i){f.Dc(e);const n=t.index;return f.lc().submitLists[n].sendDay=i}),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=t.index,i=f.lc();f.Hb(2),f.vc("id","sendDay",i.submitLists[e].id,""),f.vc("name","sendDay",i.submitLists[e].id,""),f.tc("ngModel",i.submitLists[e].sendDay)("disabled","selected"==i.submitLists[e].sStatus)}}function W(e,t){1&e&&f.Ub(0,"mat-header-row")}function X(e,t){1&e&&f.Ub(0,"mat-row")}function Q(e,t){if(1&e){const e=f.ac();f.Zb(0,"tr"),f.Zb(1,"td",33),f.Mc(2),f.Yb(),f.Zb(3,"td",34),f.Mc(4),f.Yb(),f.Zb(5,"td",35),f.Zb(6,"button",59),f.hc("click",function(){f.Dc(e);const t=f.lc().$implicit;return f.lc().downloadFile(t.id,t.original_name)}),f.Ub(7,"fa-icon",31),f.Yb(),f.Yb(),f.Zb(8,"td",35),f.Zb(9,"button",59),f.hc("click",function(){f.Dc(e);const t=f.lc().$implicit;return f.lc().removeFile(t.id)}),f.Ub(10,"fa-icon",31),f.Yb(),f.Yb(),f.Yb()}if(2&e){const e=f.lc().$implicit,t=f.lc();f.Hb(2),f.Nc(e.original_name),f.Hb(2),f.Nc("request"==e.type?"Requester":"supplier"==e.type?"Supplier":""),f.Hb(3),f.tc("icon",t.faDownload),f.Hb(3),f.tc("icon",t.faTrashAlt)}}function $(e,t){if(1&e&&(f.Xb(0),f.Kc(1,Q,11,4,"tr",58),f.Wb()),2&e){const e=t.$implicit,i=f.lc();f.Hb(1),f.tc("ngIf","supplier"==e.type&&e.created_by==i.me)}}const G=[{path:"",component:(()=>{class e{constructor(e,t,i,n,s){this.api=e,this.root=t,this.route=i,this.snackBar=n,this.autoComProd=s,this.logo="../../../assets/logo/logo_y.png",this.faTrashAlt=h.p,this.faDownload=h.c,this.faPaperclip=h.i,this.linkUrl="",this.submitHead={sendDay:1,remark:""},this.submitLists=[],this.displayedColumns=["brand","model","total","changeModel","price","currency","minTotal","remark","sendDay"],this.cansave=!0,this.isOffer=!1,this.unsub={errorMessage:null},this.me=0,this.uploadAttachFileUrl=m.a.api+m.a.path+"/attach",this.attachFileList=[],this.fileUploadQueue=null,this.filteredProduct=[],this.unsub.errorMessage=this.root.apiError$.subscribe(e=>this.errorMessage=e)}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("SUBMIT FROM"),this.linkUrl=this.route.snapshot.queryParamMap.get("l"),this.linkUrl&&(yield this.getSubmitData())})}getSubmitData(){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.api.gets("/get-submit?link="+this.linkUrl).toPromise();e&&e.success&&(this.me=e.supplier_id,this.submitHead.id=e.id,this.submitHead.remark=e.remark,this.submitHead.sendDay=e.send_day,this.submitHead.requestId=e.request_id,this.submitLists=e.submitList,this.attachFileList=e.files,e.currency&&this.submitLists.forEach((t,i)=>{this.submitLists[i].currency=e.currency}),this.submitLists.forEach((e,t)=>{parseInt(this.submitLists[t].sendDay,10)>=7&&(this.submitLists[t].sendDay=(parseInt(this.submitLists[t].sendDay,10)-7).toString())}),"0"===e.status&&(this.isOffer=!0),yield this.genSubmitTable())})}genSubmitTable(){return Object(a.a)(this,void 0,void 0,function*(){this.submitListTables=new c.k(this.submitLists)})}save(){return Object(a.a)(this,void 0,void 0,function*(){this.submitLists.forEach((e,t)=>{this.submitLists[t].sendDay=(parseInt(this.submitLists[t].sendDay,10)+7).toString()});const e={id:this.submitHead.id,remark:this.submitHead.remark,requestId:this.submitHead.requestId,productList:this.submitLists,files:[]};this.attachFileList.length>0&&this.attachFileList.forEach(t=>{e.files.push(t.id)}),console.log(e),yield this.root.setBlockUI(!0);const t=yield this.api.post("/submit-request",e).toPromise();yield this.root.setBlockUI(!1),t&&t.success?(this.cansave=!1,this.isOffer=!0,this.snackBar.openFromComponent(u.a,{data:{message:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",success:!0},duration:3e3}),this.submitLists.forEach((e,t)=>{parseInt(this.submitLists[t].sendDay,10)>=7&&(this.submitLists[t].sendDay=(parseInt(this.submitLists[t].sendDay,10)-7).toString())})):this.snackBar.openFromComponent(u.a,{data:{message:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e14\u0e49 "+this.errorMessage,error:!0},duration:3e3})})}saveFile(e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.api.uploadFileFetch(e,"supplier",this.me);return!(!t||!t.status||"success"!==t.status||(this.attachFileList.push(t),console.log(this.attachFileList),0))})}fileOver(e){}fileLeave(e){}uploadedFile(e){const t=e;console.log(t),t.forEach(e=>{e.fileEntry.isFile&&e.fileEntry.file(e=>Object(a.a)(this,void 0,void 0,function*(){(yield this.saveFile(e))||this.snackBar.openFromComponent(u.a,{data:{message:"\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",warning:!0},duration:3e3})}))})}removeFile(e){this.attachFileList.length>0&&(this.attachFileList=this.attachFileList.filter((t,i)=>t.id!==e)),console.log(this.attachFileList)}downloadFile(e,t){return Object(a.a)(this,void 0,void 0,function*(){const i=yield this.api.download("/downloadfile?id="+e).toPromise();yield this.downLoadNewFile(i,i.type,t)})}downLoadNewFile(e,t,i){return Object(a.a)(this,void 0,void 0,function*(){const n=new Blob([e],{type:t}),s=yield window.URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)})}closeWindows(){return Object(a.a)(this,void 0,void 0,function*(){const e=window.open("","_self","");setTimeout(()=>{e.close(),console.log("fff")},3e3)})}findProduct(e,t){return Object(a.a)(this,void 0,void 0,function*(){this.autoComProd.findProductWithBrandId(e,t,e=>{this.filteredProduct=e})})}setIdByModelName(e,t,i,n){return Object(a.a)(this,void 0,void 0,function*(){if(null!=t||""!==t){const s=yield this.api.get("/get-product-byid?brand="+e+"&model="+t).toPromise();s&&s.id?(this.submitLists[i].changed_id=s.id,this.submitLists[i].is_changed="1"):yield this.updateNewProductBySupplier(t,e,n,i)}else this.submitLists[i].changed_id=0,this.submitLists[i].is_changed="0"})}updateNewProductBySupplier(e,t,i,n){return Object(a.a)(this,void 0,void 0,function*(){const s={model:e,brandId:t,county:i},o=yield this.api.post("/update-product-bysupplier",s).toPromise();o&&o.success?(this.submitLists[n].changed_id=o.id,this.submitLists[n].is_changed="1"):(this.submitLists[n].changed_id=0,this.submitLists[n].is_changed="1",this.submitLists[n].changed_model=null)})}ngOnDestroy(){this.unsub.errorMessage.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(f.Tb(b.a),f.Tb(d.a),f.Tb(l.a),f.Tb(g.b),f.Tb(p.a))},e.\u0275cmp=f.Nb({type:e,selectors:[["app-submit-request"]],decls:79,vars:9,consts:[[1,"w3-container"],[1,"row"],[1,"w3-col","w3-padding"],["height","80",3,"src"],["supplierSubmitForm","ngForm"],[1,"w3-row"],["matSort","",3,"dataSource"],["matColumnDef","brand"],[4,"matHeaderCellDef"],["data-label","Brand",4,"matCellDef"],["matColumnDef","model"],["data-label","Model",4,"matCellDef"],["matColumnDef","total"],["data-label","Total",4,"matCellDef"],["matColumnDef","changeModel"],["data-label","Change Model",4,"matCellDef"],["matColumnDef","price"],[4,"matCellDef"],["matColumnDef","currency"],["matColumnDef","minTotal"],["matColumnDef","remark"],["matColumnDef","sendDay"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"w3-block","w3-padding"],["matInput","","placeholder","Remark","id","remark","name","remark",3,"ngModel","ngModelChange"],["remark","ngModel"],[1,"w3-third"],[2,"color","#2189d3","margin-left","16px"],["dropZoneLabel","Drop files here or ","browseBtnClassName","w3-button w3-round-large brow-file-bt",3,"showBrowseBtn","onFileDrop","onFileOver","onFileLeave"],[2,"font-size","20px","padding-right","8px"],[3,"icon"],[1,"w3-table-all",2,"margin-top","16px"],[1,"w3-col","s6","m9","l9"],[1,"w3-col","s2","m1","l1"],[1,"w3-col","s2","m1","l1","w3-center"],[4,"ngFor","ngForOf"],[1,"w3-col","w3-center"],["mat-raised-button","","color","accent",1,"w3-center",2,"margin-right","8px",3,"disabled","click"],["data-label","Brand"],["data-label","Model"],["data-label","Total"],["data-label","Change Model"],["matInput","","placeholder","Change Model",3,"id","name","ngModel","matAutocomplete","ngModelChange","blur"],["changeModel{{submitLists[i].id}}","ngModel"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","appOnlyNum","","placeholder","Price","required","",3,"id","name","ngModel","disabled","ngModelChange"],["price{{submitLists[i].id}}","ngModel"],["matInput","","placeholder","Currency","required","",3,"id","name","ngModel","disabled","ngModelChange"],["currency{{submitLists[i].id}}","ngModel"],["matInput","","placeholder","Min Total","required","",3,"id","name","ngModel","disabled","ngModelChange"],["minTotal{{submitLists[i].id}}","ngModel"],["matInput","","appOnlyNum","","placeholder","Local charge",3,"id","name","ngModel","disabled","ngModelChange"],["local_charge{{submitLists[i].id}}","ngModel"],["matInput","","appOnlyNum","","placeholder","Send Days","required","",3,"id","name","ngModel","disabled","ngModelChange"],["sendDay{{submitLists[i].id}}","ngModel"],[4,"ngIf"],[1,"w3-button",2,"background","none","height","21px","padding","0px !important",3,"click"]],template:function(e,t){if(1&e&&(f.Ub(0,"br"),f.Zb(1,"div"),f.Zb(2,"mat-card"),f.Zb(3,"div",0),f.Zb(4,"div",1),f.Zb(5,"div",2),f.Ub(6,"img",3),f.Yb(),f.Yb(),f.Zb(7,"div",1),f.Zb(8,"div",2),f.Zb(9,"h6"),f.Mc(10,"No.88/5 Thanon Nang Linchi, Khwaeng Chong Nonsi, Khet Yan Nawa, Krung Thep Maha Nakhon 10120"),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Zb(11,"form",null,4),f.Zb(13,"div",5),f.Zb(14,"mat-table",6),f.Xb(15,7),f.Kc(16,C,2,0,"mat-header-cell",8),f.Kc(17,E,2,1,"mat-cell",9),f.Wb(),f.Xb(18,10),f.Kc(19,T,2,0,"mat-header-cell",8),f.Kc(20,S,2,1,"mat-cell",11),f.Wb(),f.Xb(21,12),f.Kc(22,_,2,0,"mat-header-cell",8),f.Kc(23,B,2,1,"mat-cell",13),f.Wb(),f.Xb(24,14),f.Kc(25,x,2,0,"mat-header-cell",8),f.Kc(26,k,7,5,"mat-cell",15),f.Wb(),f.Xb(27,16),f.Kc(28,I,2,0,"mat-header-cell",8),f.Kc(29,N,4,4,"mat-cell",17),f.Wb(),f.Xb(30,18),f.Kc(31,P,2,0,"mat-header-cell",8),f.Kc(32,j,4,4,"mat-cell",17),f.Wb(),f.Xb(33,19),f.Kc(34,K,2,0,"mat-header-cell",8),f.Kc(35,R,4,4,"mat-cell",17),f.Wb(),f.Xb(36,20),f.Kc(37,A,2,0,"mat-header-cell",8),f.Kc(38,q,4,4,"mat-cell",17),f.Wb(),f.Xb(39,21),f.Kc(40,z,2,0,"mat-header-cell",8),f.Kc(41,U,4,4,"mat-cell",17),f.Wb(),f.Kc(42,W,1,0,"mat-header-row",22),f.Kc(43,X,1,0,"mat-row",23),f.Yb(),f.Yb(),f.Zb(44,"div",5),f.Zb(45,"div",2),f.Zb(46,"mat-form-field",24),f.Zb(47,"textarea",25,26),f.hc("ngModelChange",function(e){return t.submitHead.remark=e}),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Ub(49,"br"),f.Zb(50,"div",5),f.Zb(51,"div",27),f.Mc(52,"\xa0"),f.Yb(),f.Zb(53,"div",27),f.Zb(54,"label",28),f.Mc(55,"Attach File"),f.Yb(),f.Zb(56,"ngx-file-drop",29),f.hc("onFileDrop",function(e){return t.uploadedFile(e)})("onFileOver",function(e){return t.fileOver(e)})("onFileLeave",function(e){return t.fileLeave(e)}),f.Zb(57,"span",30),f.Ub(58,"fa-icon",31),f.Yb(),f.Yb(),f.Yb(),f.Zb(59,"div",27),f.Mc(60,"\xa0"),f.Yb(),f.Yb(),f.Ub(61,"br"),f.Zb(62,"div",5),f.Zb(63,"table",32),f.Zb(64,"tr"),f.Zb(65,"th",33),f.Mc(66,"File Name"),f.Yb(),f.Zb(67,"th",34),f.Mc(68,"File From"),f.Yb(),f.Zb(69,"th",35),f.Mc(70,"Download"),f.Yb(),f.Zb(71,"th",35),f.Mc(72,"Delete"),f.Yb(),f.Yb(),f.Kc(73,$,2,1,"ng-container",36),f.Yb(),f.Yb(),f.Ub(74,"br"),f.Zb(75,"div",5),f.Zb(76,"div",37),f.Zb(77,"button",38),f.hc("click",function(){return t.save()}),f.Mc(78," Save "),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&e){const e=f.Ac(12);f.Hb(6),f.tc("src",t.logo,f.Fc),f.Hb(8),f.tc("dataSource",t.submitListTables),f.Hb(28),f.tc("matHeaderRowDef",t.displayedColumns),f.Hb(1),f.tc("matRowDefColumns",t.displayedColumns),f.Hb(4),f.tc("ngModel",t.submitHead.remark),f.Hb(9),f.tc("showBrowseBtn",!0),f.Hb(2),f.tc("icon",t.faPaperclip),f.Hb(15),f.tc("ngForOf",t.attachFileList),f.Hb(4),f.tc("disabled",e.invalid)}},directives:[v.a,n.x,n.o,n.p,c.j,y.a,c.c,c.e,c.b,c.g,c.i,D.c,w.b,n.c,n.n,n.q,L.a,Z.a,s.l,F.b,c.d,c.a,M.c,M.a,O.n,Y.a,n.u,c.f,c.h,s.m],styles:[""]}),e})()}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.Rb({type:e}),e.\u0275inj=f.Qb({imports:[[l.f.forChild(G)],l.f]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.Rb({type:e}),e.\u0275inj=f.Qb({imports:[[s.c,n.i,V,o.a,r.a,L.b]]}),e})()}}]);