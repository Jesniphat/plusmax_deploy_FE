(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{MsxG:function(e,t,i){"use strict";i.r(t),i.d(t,"LoginModule",function(){return Z});var o=i("ofXK"),n=i("3Pt+"),r=i("b6Qw"),s=i("tyNb"),a=i("mrSG"),c=i("n3+I"),l=i("xzLf"),d=i("Q+/z"),b=i("f2kA"),h=i("PLN7"),m=i("fXoL"),u=i("dNgK"),g=i("kmnG"),p=i("qFsG"),w=i("2oD1"),f=i("bSwM"),v=i("bTqV");const y=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,r,s){this.root=e,this.loginService=t,this.router=i,this.snackBar=o,this.cookieService=n,this.users=r,this.api=s,this.email="",this.password="",this.errorMessages="",this.linkTo="",this.remember=!1}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("LOGIN"),yield this.getRemember(),document.getElementById("id01").style.display="block",this.linkTo=this.cookieService.get("linkTo")})}getRemember(){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.users.getRemember();e&&(this.email=e.username,this.remember=!0)})}keyDownFunction(e){return Object(a.a)(this,void 0,void 0,function*(){13===e.keyCode&&(yield this.login())})}login(){return Object(a.a)(this,void 0,void 0,function*(){this.remember?yield this.users.remember(this.email,""):yield this.users.removeRemember(),yield this.root.setBlockUI(!0);const e={email:this.email,password:this.password};try{const t=yield this.loginService.login(e).toPromise();localStorage.setItem("token",t.token);const i=yield this.loginService.role();if(this.linkTo){console.log("have link to");const e=yield this.api.get("/profile").toPromise();e&&localStorage.setItem("profile",JSON.stringify(e)),this.router.navigate(["/"+this.linkTo])}else"admin"===i?this.router.navigate(["/dashboard/admin"]):"staff"===i?this.router.navigate(["/dashboard/staff"]):"sales"===i||"lead-sales"===i||"co-sales"===i?this.router.navigate(["/dashboard/sales"]):"qt-only"===i&&this.router.navigate(["/quotation/list"])}catch(t){console.log(t),yield this.root.setBlockUI(!1),yield this.snackBar.openFromComponent(d.a,{data:{message:t.error.error,error:!0},duration:3e3})}})}ngOnDestroy(){return Object(a.a)(this,void 0,void 0,function*(){yield this.root.setBlockUI(!1)})}}return e.\u0275fac=function(t){return new(t||e)(m.Tb(c.a),m.Tb(l.a),m.Tb(s.b),m.Tb(u.b),m.Tb(r.a),m.Tb(b.a),m.Tb(h.a))},e.\u0275cmp=m.Nb({type:e,selectors:[["app-login"]],decls:21,vars:3,consts:[["id","id01",1,"w3-modal"],[1,"w3-modal-content","w3-card-4","w3-animate-zoom",2,"max-width","600px"],[1,"w3-teal"],[1,"w3-container","top-menu"],[1,"w3-container"],[1,"w3-section"],[1,"example-full-width"],["appAutoFocus","","matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","value","",3,"ngModel","ngModelChange"],["matInput","","type","password","placeholder","\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19","value","",3,"ngModel","ngModelChange","keydown"],[3,"ngModel","ngModelChange"],[1,"w3-container","w3-border-top","w3-padding-16","w3-light-grey"],[1,"w3-padding","w3-hide-small"],["href","#/login/forget"],["mat-raised-button","","color","accent",1,"w3-right",3,"click"]],template:function(e,t){1&e&&(m.Zb(0,"div",0),m.Zb(1,"div",1),m.Zb(2,"div",2),m.Zb(3,"div",3),m.Zb(4,"h4"),m.Mc(5,"LOGIN"),m.Yb(),m.Yb(),m.Yb(),m.Zb(6,"div",4),m.Zb(7,"div",5),m.Zb(8,"mat-form-field",6),m.Zb(9,"input",7),m.hc("ngModelChange",function(e){return t.email=e}),m.Yb(),m.Yb(),m.Zb(10,"mat-form-field",6),m.Zb(11,"input",8),m.hc("ngModelChange",function(e){return t.password=e})("keydown",function(e){return t.keyDownFunction(e)}),m.Yb(),m.Yb(),m.Zb(12,"mat-checkbox",9),m.hc("ngModelChange",function(e){return t.remember=e}),m.Mc(13,"Remember me"),m.Yb(),m.Yb(),m.Yb(),m.Zb(14,"div",10),m.Zb(15,"span",11),m.Mc(16,"\u0e25\u0e37\u0e21 "),m.Zb(17,"a",12),m.Mc(18,"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19?"),m.Yb(),m.Yb(),m.Zb(19,"button",13),m.hc("click",function(){return t.login()}),m.Mc(20,"Login"),m.Yb(),m.Yb(),m.Yb(),m.Yb()),2&e&&(m.Hb(9),m.tc("ngModel",t.email),m.Hb(2),m.tc("ngModel",t.password),m.Hb(1),m.tc("ngModel",t.remember))},directives:[g.c,p.b,n.c,w.a,n.n,n.q,f.a,v.b],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}"]}),e})()},{path:"forget",component:(()=>{class e{constructor(e,t,i,o){this.root=e,this.api=t,this.router=i,this.snackBar=o,this.email=""}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){yield this.root.setHeaderText("FORGET PASSWORD"),document.getElementById("id01").style.display="block"})}send(){return Object(a.a)(this,void 0,void 0,function*(){this.root.setBlockUI(!0);const e=yield this.api.post("/forget-password",{email:this.email}).toPromise();this.root.setBlockUI(!1),e&&e.success?(yield this.snackBar.openFromComponent(d.a,{data:{message:"\u0e23\u0e30\u0e1a\u0e1a\u0e44\u0e14\u0e49\u0e2a\u0e48\u0e07 email \u0e16\u0e36\u0e07\u0e17\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27\u0e01\u0e23\u0e38\u0e13\u0e32\u0e15\u0e23\u0e27\u0e2a\u0e2d\u0e1a email \u0e02\u0e2d\u0e07\u0e17\u0e48\u0e32\u0e19",success:!0},duration:3e3}),this.router.navigate(["/login"])):yield this.snackBar.openFromComponent(d.a,{data:{message:"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",error:!0},duration:3e3})})}}return e.\u0275fac=function(t){return new(t||e)(m.Tb(c.a),m.Tb(h.a),m.Tb(s.b),m.Tb(u.b))},e.\u0275cmp=m.Nb({type:e,selectors:[["app-forget-password"]],decls:13,vars:1,consts:[["id","id01",1,"w3-modal"],[1,"w3-modal-content","w3-card-4","w3-animate-zoom",2,"max-width","600px"],[1,"w3-teal"],[1,"w3-container","top-menu"],[1,"w3-container"],[1,"w3-section"],[1,"example-full-width"],["appAutoFocus","","matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","value","",3,"ngModel","ngModelChange"],[1,"w3-container","w3-border-top","w3-padding-16","w3-light-grey"],["mat-raised-button","","color","accent",1,"w3-right",3,"click"]],template:function(e,t){1&e&&(m.Zb(0,"div",0),m.Zb(1,"div",1),m.Zb(2,"div",2),m.Zb(3,"div",3),m.Zb(4,"h4"),m.Mc(5,"FORGET PASSWORD"),m.Yb(),m.Yb(),m.Yb(),m.Zb(6,"div",4),m.Zb(7,"div",5),m.Zb(8,"mat-form-field",6),m.Zb(9,"input",7),m.hc("ngModelChange",function(e){return t.email=e}),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Zb(10,"div",8),m.Zb(11,"button",9),m.hc("click",function(){return t.send()}),m.Mc(12,"Submit"),m.Yb(),m.Yb(),m.Yb(),m.Yb()),2&e&&(m.Hb(9),m.tc("ngModel",t.email))},directives:[g.c,p.b,n.c,w.a,n.n,n.q,v.b],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Rb({type:e}),e.\u0275inj=m.Qb({imports:[[s.f.forChild(y)],s.f]}),e})();var M=i("ADsi"),Y=i("AKYE");let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Rb({type:e}),e.\u0275inj=m.Qb({providers:[r.a],imports:[[o.c,k,n.i,M.a,Y.a]]}),e})()}}]);