!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{MsxG:function(t,r,o){"use strict";o.r(r),o.d(r,"LoginModule",function(){return C});var i,a,s,c,u=o("ofXK"),l=o("3Pt+"),d=o("b6Qw"),b=o("tyNb"),m=o("mrSG"),h=o("n3+I"),p=o("xzLf"),f=o("Q+/z"),g=o("f2kA"),w=o("PLN7"),v=o("fXoL"),k=o("dNgK"),x=o("kmnG"),y=o("qFsG"),M=o("2oD1"),Y=o("bSwM"),Z=o("bTqV"),R=[{path:"",component:(a=function(){function t(n,r,o,i,a,s,c){e(this,t),this.root=n,this.loginService=r,this.router=o,this.snackBar=i,this.cookieService=a,this.users=s,this.api=c,this.email="",this.password="",this.errorMessages="",this.linkTo="",this.remember=!1}return n(t,[{key:"ngOnInit",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.root.setHeaderText("LOGIN");case 2:return e.next=4,this.getRemember();case 4:document.getElementById("id01").style.display="block",this.linkTo=this.cookieService.get("linkTo");case 6:case"end":return e.stop()}},e,this)}))}},{key:"getRemember",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.users.getRemember();case 2:(t=e.sent)&&(this.email=t.username,this.remember=!0);case 4:case"end":return e.stop()}},e,this)}))}},{key:"keyDownFunction",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=13===e.keyCode,!t.t0){t.next=4;break}return t.next=4,this.login();case 4:case"end":return t.stop()}},t,this)}))}},{key:"login",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.remember){e.next=5;break}return e.next=3,this.users.remember(this.email,"");case 3:e.next=7;break;case 5:return e.next=7,this.users.removeRemember();case 7:return e.next=9,this.root.setBlockUI(!0);case 9:return t={email:this.email,password:this.password},e.prev=10,e.next=13,this.loginService.login(t).toPromise();case 13:return n=e.sent,localStorage.setItem("token",n.token),e.next=17,this.loginService.role();case 17:if(r=e.sent,!this.linkTo){e.next=26;break}return console.log("have link to"),e.next=22,this.api.get("/profile").toPromise();case 22:(o=e.sent)&&localStorage.setItem("profile",JSON.stringify(o)),this.router.navigate(["/"+this.linkTo]),e.next=27;break;case 26:"admin"===r?this.router.navigate(["/dashboard/admin"]):"staff"===r?this.router.navigate(["/dashboard/staff"]):"sales"!==r&&"lead-sales"!==r&&"co-sales"!==r||this.router.navigate(["/dashboard/sales"]);case 27:e.next=36;break;case 29:return e.prev=29,e.t0=e.catch(10),console.log(e.t0),e.next=34,this.root.setBlockUI(!1);case 34:return e.next=36,this.snackBar.openFromComponent(f.a,{data:{message:e.t0.error.error,error:!0},duration:3e3});case 36:case"end":return e.stop()}},e,this,[[10,29]])}))}},{key:"ngOnDestroy",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.root.setBlockUI(!1);case 2:case"end":return e.stop()}},e,this)}))}}]),t}(),a.\u0275fac=function(e){return new(e||a)(v.Tb(h.a),v.Tb(p.a),v.Tb(b.b),v.Tb(k.b),v.Tb(d.a),v.Tb(g.a),v.Tb(w.a))},a.\u0275cmp=v.Nb({type:a,selectors:[["app-login"]],decls:21,vars:3,consts:[["id","id01",1,"w3-modal"],[1,"w3-modal-content","w3-card-4","w3-animate-zoom",2,"max-width","600px"],[1,"w3-teal"],[1,"w3-container","top-menu"],[1,"w3-container"],[1,"w3-section"],[1,"example-full-width"],["appAutoFocus","","matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","value","",3,"ngModel","ngModelChange"],["matInput","","type","password","placeholder","\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19","value","",3,"ngModel","ngModelChange","keydown"],[3,"ngModel","ngModelChange"],[1,"w3-container","w3-border-top","w3-padding-16","w3-light-grey"],[1,"w3-padding","w3-hide-small"],["href","#/login/forget"],["mat-raised-button","","color","accent",1,"w3-right",3,"click"]],template:function(e,t){1&e&&(v.Zb(0,"div",0),v.Zb(1,"div",1),v.Zb(2,"div",2),v.Zb(3,"div",3),v.Zb(4,"h4"),v.Mc(5,"LOGIN"),v.Yb(),v.Yb(),v.Yb(),v.Zb(6,"div",4),v.Zb(7,"div",5),v.Zb(8,"mat-form-field",6),v.Zb(9,"input",7),v.hc("ngModelChange",function(e){return t.email=e}),v.Yb(),v.Yb(),v.Zb(10,"mat-form-field",6),v.Zb(11,"input",8),v.hc("ngModelChange",function(e){return t.password=e})("keydown",function(e){return t.keyDownFunction(e)}),v.Yb(),v.Yb(),v.Zb(12,"mat-checkbox",9),v.hc("ngModelChange",function(e){return t.remember=e}),v.Mc(13,"Remember me"),v.Yb(),v.Yb(),v.Yb(),v.Zb(14,"div",10),v.Zb(15,"span",11),v.Mc(16,"\u0e25\u0e37\u0e21 "),v.Zb(17,"a",12),v.Mc(18,"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19?"),v.Yb(),v.Yb(),v.Zb(19,"button",13),v.hc("click",function(){return t.login()}),v.Mc(20,"Login"),v.Yb(),v.Yb(),v.Yb(),v.Yb()),2&e&&(v.Hb(9),v.tc("ngModel",t.email),v.Hb(2),v.tc("ngModel",t.password),v.Hb(1),v.tc("ngModel",t.remember))},directives:[x.c,y.b,l.c,M.a,l.n,l.q,Y.a,Z.b],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a)},{path:"forget",component:(i=function(){function t(n,r,o,i){e(this,t),this.root=n,this.api=r,this.router=o,this.snackBar=i,this.email=""}return n(t,[{key:"ngOnInit",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.root.setHeaderText("FORGET PASSWORD");case 2:document.getElementById("id01").style.display="block";case 3:case"end":return e.stop()}},e,this)}))}},{key:"send",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.root.setBlockUI(!0),e.next=3,this.api.post("/forget-password",{email:this.email}).toPromise();case 3:if(t=e.sent,this.root.setBlockUI(!1),!t||!t.success){e.next=11;break}return e.next=8,this.snackBar.openFromComponent(f.a,{data:{message:"\u0e23\u0e30\u0e1a\u0e1a\u0e44\u0e14\u0e49\u0e2a\u0e48\u0e07 email \u0e16\u0e36\u0e07\u0e17\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27\u0e01\u0e23\u0e38\u0e13\u0e32\u0e15\u0e23\u0e27\u0e2a\u0e2d\u0e1a email \u0e02\u0e2d\u0e07\u0e17\u0e48\u0e32\u0e19",success:!0},duration:3e3});case 8:this.router.navigate(["/login"]),e.next=13;break;case 11:return e.next=13,this.snackBar.openFromComponent(f.a,{data:{message:"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",error:!0},duration:3e3});case 13:case"end":return e.stop()}},e,this)}))}}]),t}(),i.\u0275fac=function(e){return new(e||i)(v.Tb(h.a),v.Tb(w.a),v.Tb(b.b),v.Tb(k.b))},i.\u0275cmp=v.Nb({type:i,selectors:[["app-forget-password"]],decls:13,vars:1,consts:[["id","id01",1,"w3-modal"],[1,"w3-modal-content","w3-card-4","w3-animate-zoom",2,"max-width","600px"],[1,"w3-teal"],[1,"w3-container","top-menu"],[1,"w3-container"],[1,"w3-section"],[1,"example-full-width"],["appAutoFocus","","matInput","","placeholder","\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e25\u0e4c","value","",3,"ngModel","ngModelChange"],[1,"w3-container","w3-border-top","w3-padding-16","w3-light-grey"],["mat-raised-button","","color","accent",1,"w3-right",3,"click"]],template:function(e,t){1&e&&(v.Zb(0,"div",0),v.Zb(1,"div",1),v.Zb(2,"div",2),v.Zb(3,"div",3),v.Zb(4,"h4"),v.Mc(5,"FORGET PASSWORD"),v.Yb(),v.Yb(),v.Yb(),v.Zb(6,"div",4),v.Zb(7,"div",5),v.Zb(8,"mat-form-field",6),v.Zb(9,"input",7),v.hc("ngModelChange",function(e){return t.email=e}),v.Yb(),v.Yb(),v.Yb(),v.Yb(),v.Zb(10,"div",8),v.Zb(11,"button",9),v.hc("click",function(){return t.send()}),v.Mc(12,"Submit"),v.Yb(),v.Yb(),v.Yb(),v.Yb()),2&e&&(v.Hb(9),v.tc("ngModel",t.email))},directives:[x.c,y.b,l.c,M.a,l.n,l.q,Z.b],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}"]}),i)}],T=((s=function t(){e(this,t)}).\u0275fac=function(e){return new(e||s)},s.\u0275mod=v.Rb({type:s}),s.\u0275inj=v.Qb({imports:[[b.f.forChild(R)],b.f]}),s),O=o("ADsi"),I=o("AKYE"),C=((c=function t(){e(this,t)}).\u0275fac=function(e){return new(e||c)},c.\u0275mod=v.Rb({type:c}),c.\u0275inj=v.Qb({providers:[d.a],imports:[[u.c,T,l.i,O.a,I.a]]}),c)}}])}();